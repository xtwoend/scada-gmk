import{a as V,v as D,b as e,c as f,m as v,D as b,C as w,h as y,d as k,s as S,e as x,f as C,H as A}from"./vendor.7ea1ac66.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerpolicy&&(l.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?l.credentials="include":o.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();window.axios=V;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";const h=(s,t)=>{const n=s.__vccOpts||s;for(const[i,o]of t)n[i]=o;return n},B={props:{options:Array,type:{type:String,default:"select"},default:{type:Array,default:()=>[]}},data(){return{show:!1,selected:this.default}},methods:{showDropdown(){this.show=!this.show},hide(){this.show=!1},groupBy(s,t){return s.reduce((n,i,o)=>{var l;return(n[l=t(i,o,s)]||(n[l]=[])).push(i),n},{})}},computed:{groups(){return this.options[0].hasOwnProperty("group")?this.groupBy(this.options,s=>s.group):this.options}},watch:{selected(s){this.$emit("checked",s)}},directives:{clickOutside:D.directive}},F={class:"dd"},T={id:"list1",class:"dropdown-check-list",tabindex:"100"},O=e.createStaticVNode('<svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-adjustments-horizontal" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M14 6m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"></path><path d="M4 6l8 0"></path><path d="M16 6l4 0"></path><path d="M8 12m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"></path><path d="M4 12l2 0"></path><path d="M10 12l10 0"></path><path d="M17 18m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"></path><path d="M4 18l11 0"></path><path d="M19 18l1 0"></path></svg>',1),L=[O],U={key:2,class:"items"},P={key:0},I=["id","value"],$=["for"],q={key:1},M=["id","value"],z=["for"];function j(s,t,n,i,o,l){const c=e.resolveDirective("click-outside");return e.withDirectives((e.openBlock(),e.createElementBlock("div",F,[e.createElementVNode("div",T,[n.type=="select"?(e.openBlock(),e.createElementBlock("span",{key:0,class:"anchor form-control",onClick:t[0]||(t[0]=(...a)=>l.showDropdown&&l.showDropdown(...a))}," Select Parameter ")):e.createCommentVNode("",!0),n.type=="icon"?(e.openBlock(),e.createElementBlock("span",{key:1,class:"icon",onClick:t[1]||(t[1]=(...a)=>l.showDropdown&&l.showDropdown(...a))},L)):e.createCommentVNode("",!0),o.show?(e.openBlock(),e.createElementBlock("ul",U,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.groups,(a,r)=>(e.openBlock(),e.createElementBlock("li",{key:r},[Array.isArray(a)?(e.openBlock(),e.createElementBlock("div",P,[e.createElementVNode("span",null,e.toDisplayString(r),1),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a,(m,_)=>(e.openBlock(),e.createElementBlock("div",{key:_},[e.withDirectives(e.createElementVNode("input",{type:"checkbox",id:_,value:m,"onUpdate:modelValue":t[2]||(t[2]=g=>o.selected=g)},null,8,I),[[e.vModelCheckbox,o.selected]]),e.createElementVNode("label",{for:_},e.toDisplayString(s.$filters.textFormat(m.text)),9,$)]))),128))])):e.createCommentVNode("",!0),Array.isArray(a)?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",q,[e.withDirectives(e.createElementVNode("input",{type:"checkbox",id:r,value:a,"onUpdate:modelValue":t[3]||(t[3]=m=>o.selected=m)},null,8,M),[[e.vModelCheckbox,o.selected]]),e.createElementVNode("label",{for:r},e.toDisplayString(s.$filters.textFormat(a.text)),9,z)]))]))),128))])):e.createCommentVNode("",!0)])])),[[c,l.hide]])}const E=h(B,[["render",j]]);const N=["#2f7ed8","#8bbc21","#910000","#1aadce","#492970","#f28f43","#77a1e5","#c42525","#a6c96a","#7cb5ec","#434348","#90ed7d","#f7a35c","#8085e9","#f15c80","#e4d354","#2b908f","#f45b5b","#91e8e1","#0d233a"];const W={props:{url:String,title:String,defaultData:{type:Array,default:()=>[]},columns:{type:Array,default:()=>[]}},components:{Datepicker:f,Dropdown:E},data(){return{items:this.defaultData,params:{from:new Date,to:new Date,interval:3600,limit:1e3,select:[]},data:[],realtime:{},fetchReady:!1,colors:N,options:{chart:{type:"line",zoomType:"x",height:600},time:{useUTC:!1},title:{text:this.title,style:{fontSize:"24px",fontWeight:"bold"}},xAxis:{type:"datetime",title:{text:""}},yAxis:[],tooltip:{pointFormat:"{series.name}: <b>{point.y:.2f}</b><br/>",crosshairs:!0,shared:!0},legend:{enabled:!0},series:[]}}},mounted(){this.fetchData()},methods:{interval(s){this.params.interval=s,this.fetchData()},selected(s){this.items=s,this.fetchData()},async fetchData(){this.$refs.chart.chart.showLoading();let s=[],t=[],n=[];this.items.forEach((i,o)=>{let l=this.colors[o];t[o]={title:{text:this.textFormat(i.text),style:{color:l,fontSize:"16px"}},lineColor:l,labels:{style:{color:l},align:"left",x:14},lineWidth:1,opposite:!0},i.range&&(t[o].min=i.range[0],t[o].max=i.range[1]);let c=null;!!i.data.match(/\./g)&&(c=parseInt(i.data.split(".")[1])),s[o]={id:i.data,row:i.data.split(".")[0],colIndex:c,yAxis:o,type:i.type?i.type:"spline",name:this.textFormat(i.text),color:l,lineWidth:1,data:[]},n[o]=i.data}),this.options.series=s,this.options.yAxis=t,this.params.select=n,await axios.get(this.url,{params:this.params}).then(i=>{i.data.data.forEach(l=>{let c=l.unix_time;this.options.series.forEach((a,r)=>{let m=l[a.row];a.colIndex!==null?this.options.series[r].data.push([c,m[a.colIndex]]):this.options.series[r].data.push([c,m])})})}),this.$refs.chart.chart.hideLoading()},textFormat(s){let t=s.trim().toLowerCase().split(" ");for(let n=0;n<t.length;n++)t[n]=t[n][0].toUpperCase()+t[n].substr(1);return t.join(" ")}}},H={class:"report"},R={class:"table-wrapper"},K={class:"toolbox"},Y={class:"date-selected"},J=e.createStaticVNode('<option value="10">10s</option><option value="60">1m</option><option value="900">15m</option><option value="1800">30m</option><option value="3600">1h</option><option value="7200">2h</option><option value="10800">3h</option><option value="18000">5h</option><option value="36000">10h</option><option value="86400">24h</option>',10),Q=[J],X={class:"chart"};function G(s,t,n,i,o,l){const c=e.resolveComponent("dropdown"),a=e.resolveComponent("datepicker"),r=e.resolveComponent("highcharts");return e.openBlock(),e.createElementBlock("div",H,[e.createElementVNode("div",R,[e.createElementVNode("div",K,[e.createVNode(c,{options:n.columns,onChecked:l.selected,default:n.defaultData},null,8,["options","onChecked","default"]),e.createElementVNode("div",Y,[e.createVNode(a,{class:"mr-2",type:"datetime",modelValue:o.params.from,"onUpdate:modelValue":t[0]||(t[0]=m=>o.params.from=m),name:"from",textInput:"",autoApply:"",closeOnAutoApply:!1,placeholder:"from"},null,8,["modelValue"]),e.createVNode(a,{class:"mr-2",type:"datetime",modelValue:o.params.to,"onUpdate:modelValue":t[1]||(t[1]=m=>o.params.to=m),name:"to",textInput:"",autoApply:"",closeOnAutoApply:!1,placeholder:"to"},null,8,["modelValue"]),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":t[2]||(t[2]=m=>o.params.interval=m),class:"form-control wd-80 mr-2"},Q,512),[[e.vModelSelect,o.params.interval]]),e.createElementVNode("button",{class:"btn btn-primary",onClick:t[3]||(t[3]=(...m)=>l.fetchData&&l.fetchData(...m))},"Show")])]),e.createElementVNode("div",X,[e.createVNode(r,{ref:"chart",class:"hc","constructor-type":"stockChart",options:o.options},null,8,["options"])])])])}const Z=h(W,[["render",G]]),ee={props:{url:String,title:String,mqtt:{type:Object,default(s){return{url:null,username:null,password:null,topic:null,timefield:"_terminalTime"}}},defaultData:{type:Array,default:()=>[]},columns:{type:Array,default:()=>[]}},components:{Dropdown:E},data(){return{items:this.defaultData,mqttConnection:null,colors:N,params:{last:30},options:{chart:{type:"line",zoomType:"x",height:600},time:{useUTC:!1},title:{text:this.title,style:{fontSize:"24px",fontWeight:"bold"}},xAxis:{type:"datetime",title:{text:""}},yAxis:[],tooltip:{pointFormat:"{series.name}: <b>{point.y:.2f}</b><br/>",crosshairs:!0,shared:!0},legend:{enabled:!0},series:[]}}},created(){this.mqttConnection=v.exports.connect(this.mqtt.url,{username:this.mqtt.username,password:this.mqtt.password})},mounted(){this.fetchData(),this.listen()},methods:{listen(){if(this.mqttConnection){let s=this;this.mqttConnection.on("connect",function(){s.mqttConnection.subscribe(s.mqtt.topic,function(t){t||console.log("connected")})}),this.mqttConnection.on("message",this.received)}},received(s,t){let n=JSON.parse(t.toString()),i=this.mqtt.timefield?this.mqtt.timefield:"_terminalTime",o=Date.parse(n[i]);this.options.series.forEach((l,c)=>{this.options.series[c].data.shift();let a=n[l.row];if(l.colIndex!==null){let r=a[l.colIndex];typeof r=="boolean"&&(r=r?1:0),this.options.series[c].data.push([o,r])}else this.options.series[c].data.push([o,parseFloat(a)])})},selected(s){this.items=s,this.fetchData()},async fetchData(){this.$refs.chart.chart.showLoading();let s=[],t=[];this.mqttI&&this.mqttI.end(),this.items.forEach((n,i)=>{let o=this.colors[i];t[i]={title:{text:this.textFormat(n.text),style:{color:o,fontSize:"14px"}},lineColor:o,labels:{style:{color:o},align:"left",x:14},lineWidth:2,opposite:!0},n.range&&(t[i].min=n.range[0],t[i].max=n.range[1]);let l=null;!!n.data.match(/\./g)&&(l=parseInt(n.data.split(".")[1])),s[i]={id:n.data,row:n.data.split(".")[0],colIndex:l,yAxis:i,type:n.type?n.type:"spline",name:this.textFormat(n.text),color:o,lineWidth:1,data:[]}}),this.options.series=s,this.options.yAxis=t,await axios.get(this.url,{params:this.params}).then(n=>{n.data.data.forEach(o=>{let l=Date.parse(o.terminal_time),c=JSON.parse(o.data);this.options.series.forEach((a,r)=>{let m=c[a.row];if(a.colIndex!==null){let _=m[a.colIndex];typeof _=="boolean"&&(_=_?1:0),this.options.series[r].data.push([l,_])}else this.options.series[r].data.push([l,parseFloat(m)])})})}),this.$refs.chart.chart.hideLoading()},textFormat(s){let t=s.trim().toLowerCase().split(" ");for(let n=0;n<t.length;n++)t[n]=t[n][0].toUpperCase()+t[n].substr(1);return t.join(" ")}}},te={class:"report"},oe={class:"table-wrapper"},ne={class:"toolbox"},se={class:"chart"};function le(s,t,n,i,o,l){const c=e.resolveComponent("dropdown"),a=e.resolveComponent("highcharts");return e.openBlock(),e.createElementBlock("div",te,[e.createElementVNode("div",oe,[e.createElementVNode("div",ne,[e.createVNode(c,{options:n.columns,onChecked:l.selected,default:n.defaultData},null,8,["options","onChecked","default"])]),e.createElementVNode("div",se,[e.createVNode(a,{ref:"chart","constructor-type":"stockChart",class:"hc",options:o.options},null,8,["options"])])])])}const ae=h(ee,[["render",le]]);const re={props:{url:String,export:String,headers:Array,title:String,useInterval:{type:Boolean,default:!1}},components:{Vue3EasyDataTable:b,Datepicker:f},data(){return{options:{page:1,rowsPerPage:25},params:{from:new Date,to:new Date,interval:60},dataLength:0,isLoading:!1,items:[]}},mounted(){this.fetchData()},watch:{options:{handler(s){this.fetchData()},deep:!0}},methods:{async fetchData(){let s=Object.assign(this.params,this.options);this.isLoading=!0,this.items=[];let t=await axios.get(this.url,{params:s}).then(n=>n.data);this.items=t.data,this.dataLength=t.meta.total,this.options.page=t.meta.current_page,this.options.rowsPerPage=t.meta.per_page,this.isLoading=!1},download(){let s=this.export.split("?");const t=new URLSearchParams(s[1]);t.append("interval",this.params.interval),t.append("from",this.params.from.toISOString()),t.append("to",this.params.to.toISOString()),window.open(s[0]+"?"+t.toString(),"_blank")}}},ie={class:"report"},de={class:"table-wrapper"},ce={class:"toolbox"},me={class:"title"},pe={class:"date-selected"},ue=e.createStaticVNode('<option value="10">10s</option><option value="60">1m</option><option value="900">15m</option><option value="1800">30m</option><option value="3600">1h</option><option value="7200">2h</option><option value="10800">3h</option><option value="18000">5h</option><option value="36000">10h</option><option value="86400">24h</option>',10),he=[ue],_e={class:"table-content"};function fe(s,t,n,i,o,l){const c=e.resolveComponent("datepicker"),a=e.resolveComponent("Vue3EasyDataTable");return e.openBlock(),e.createElementBlock("div",ie,[e.createElementVNode("div",de,[e.createElementVNode("div",ce,[e.createElementVNode("h2",me,e.toDisplayString(n.title),1),e.createElementVNode("div",pe,[e.createVNode(c,{class:"mr-2",modelValue:o.params.from,"onUpdate:modelValue":t[0]||(t[0]=r=>o.params.from=r),name:"from",textInput:"",autoApply:"",closeOnAutoApply:!1,placeholder:"from"},null,8,["modelValue"]),e.createVNode(c,{class:"mr-2",modelValue:o.params.to,"onUpdate:modelValue":t[1]||(t[1]=r=>o.params.to=r),name:"to",textInput:"",autoApply:"",closeOnAutoApply:!1,placeholder:"to"},null,8,["modelValue"]),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":t[2]||(t[2]=r=>o.params.interval=r),class:"form-control wd-80 mr-2"},he,512),[[e.vModelSelect,o.params.interval],[e.vShow,n.useInterval]]),e.createElementVNode("button",{class:"btn btn-primary mr-2",onClick:t[3]||(t[3]=(...r)=>l.fetchData&&l.fetchData(...r))},"Show"),e.createElementVNode("button",{class:"btn btn-success",onClick:t[4]||(t[4]=(...r)=>l.download&&l.download(...r))},"Download")])]),e.createElementVNode("div",_e,[e.createVNode(a,{"show-index":"","buttons-pagination":"","table-class-name":"customize-table","server-options":o.options,"onUpdate:server-options":t[5]||(t[5]=r=>o.options=r),"server-items-length":o.dataLength,loading:o.isLoading,headers:n.headers,items:o.items,ref:"vtable"},e.createSlots({_:2},[e.renderList(s.$slots,(r,m)=>({name:m,fn:e.withCtx(_=>[e.renderSlot(s.$slots,m,e.normalizeProps(e.guardReactiveProps(_||{})))])}))]),1032,["server-options","server-items-length","loading","headers","items"])])])])}const Ve=h(re,[["render",fe]]);const Ee={props:{url:String,headers:Array,title:String},components:{Vue3EasyDataTable:b},data(){return{options:{page:1,rowsPerPage:25},dataLength:0,isLoading:!1,items:[]}},mounted(){this.fetchData()},watch:{options:{handler(s){this.fetchData()},deep:!0}},methods:{async fetchData(){this.isLoading=!0,this.items=[];let s=await axios.get(this.url,{params:this.options}).then(t=>t.data);this.items=s.data,this.dataLength=s.meta.total,this.options.page=s.meta.current_page,this.options.rowsPerPage=s.meta.per_page,this.isLoading=!1}}},Ne={class:"report"},ge={class:"table-wrapper"},ye={class:"toolbox"},ve={class:"title"},be=e.createElementVNode("div",{class:"date-selected"},null,-1),xe={class:"table-content"};function De(s,t,n,i,o,l){const c=e.resolveComponent("Vue3EasyDataTable");return e.openBlock(),e.createElementBlock("div",Ne,[e.createElementVNode("div",ge,[e.createElementVNode("div",ye,[e.createElementVNode("h2",ve,e.toDisplayString(n.title),1),be]),e.createElementVNode("div",xe,[e.createVNode(c,{"show-index":"","buttons-pagination":"","table-class-name":"customize-table","server-options":o.options,"onUpdate:server-options":t[0]||(t[0]=a=>o.options=a),"server-items-length":o.dataLength,loading:o.isLoading,headers:n.headers,items:o.items,ref:"vtable"},e.createSlots({_:2},[e.renderList(s.$slots,(a,r)=>({name:r,fn:e.withCtx(m=>[e.renderSlot(s.$slots,r,e.normalizeProps(e.guardReactiveProps(m||{})))])}))]),1032,["server-options","server-items-length","loading","headers","items"])])])])}const we=h(Ee,[["render",De]]),ke={props:{topic:String},data(){return{message:null,options:{}}},created(){this.listen()},methods:{listen(){let s=v.exports.connect("ws://192.168.170.87:9001",this.options),t=this;s.on("connect",function(){s.subscribe(t.topic,function(n){n||(console.log("connected"),s.publish(t.topic,"Hello mqtt"))})}),s.on("message",function(n,i){console.log("topic",n),console.log(i.toString()),t.message=i})}}};function Se(s,t,n,i,o,l){return e.openBlock(),e.createElementBlock("div",null,e.toDisplayString(o.message),1)}const Ce=h(ke,[["render",Se]]);const Ae={props:{title:String,station:String,defaultData:{type:Array,default:()=>[]},columns:{type:Array,default:()=>[]},mqtt:{type:Object,default(){return{url:null,username:null,password:null,topic:null}}}},components:{CircleProgress:w,Dropdown:E},data(){return{items:this.defaultData,mqttConnection:null,score:0,total:0}},created(){this.mqttConnection=v.exports.connect(this.mqtt.url,{username:this.mqtt.username,password:this.mqtt.password})},mounted(){this.listen()},methods:{selected(s){this.items=s},listen(){if(this.mqttConnection){let s=this;this.mqttConnection.on("connect",function(){s.mqttConnection.subscribe(s.mqtt.topic,function(t){t||console.log("connected")})}),this.mqttConnection.on("message",this.received)}},received(s,t){let n=JSON.parse(t.toString());if(n.group==this.station){let i=this.items.length;this.total=n.data.count_record*i;let o=n.data,l=0;this.items.forEach(c=>{l=l+parseInt(o[c.data])}),this.score=parseInt(l/this.total*100)}}}},Be={class:"card"},Fe={class:"card-title"},Te={class:"card-body"},Oe={class:"total"};function Le(s,t,n,i,o,l){const c=e.resolveComponent("dropdown"),a=e.resolveComponent("circle-progress");return e.openBlock(),e.createElementBlock("div",Be,[e.createElementVNode("div",Fe,[e.createVNode(c,{type:"icon",class:"opsi",options:n.columns,onChecked:l.selected,default:n.defaultData},null,8,["options","onChecked","default"]),e.createTextVNode(" "+e.toDisplayString(n.title),1)]),e.createElementVNode("div",Te,[e.createVNode(a,{percent:o.score,"show-percent":""},null,8,["percent"]),e.createElementVNode("div",Oe,[e.createTextVNode("Total Record "),e.createElementVNode("b",null,e.toDisplayString(o.total.toLocaleString()),1)])])])}const Ue=h(Ae,[["render",Le]]),Pe={props:{url:String,title:String,defaultData:{type:Array,default:()=>[]},columns:{type:Array,default:()=>[]}},components:{Datepicker:f,Dropdown:E},data(){return{items:this.defaultData,params:{from:new Date,to:new Date},data:[],realtime:{},fetchReady:!1,colors:N,options:{chart:{type:"line",zoomType:"x",height:600},time:{useUTC:!0},title:{text:this.title,style:{fontSize:"24px",fontWeight:"bold"}},xAxis:{type:"datetime",title:{text:""}},yAxis:[],tooltip:{pointFormat:"{series.name}: <b>{point.y:.2f} KWh</b><br/>",crosshairs:!0,shared:!0},legend:{enabled:!0},series:[]}}},mounted(){this.fetchData()},methods:{selected(s){this.items=s,this.fetchData()},async fetchData(){this.$refs.chart.chart.showLoading();let s=[],t=[],n=[];this.items.forEach((i,o)=>{let l=this.colors[o];t[o]={title:{text:this.textFormat(i.text),style:{color:l,fontSize:"16px"}},lineColor:l,labels:{style:{color:l},align:"left",x:14},lineWidth:1,opposite:!0},i.range&&(t[o].min=i.range[0],t[o].max=i.range[1]),s[o]={id:i.data,yAxis:o,type:i.type?i.type:"spline",name:this.textFormat(i.text),color:l,lineWidth:1,data:[]},n[o]=i.data}),this.options.series=s,this.options.yAxis=t,this.params.select=n,await axios.get(this.url,{params:this.params}).then(i=>{let o=i.data.data;for(const[l,c]of Object.entries(o)){let a=this.options.series.findIndex(r=>r.id==l);a>=0&&c.forEach(r=>{this.options.series[a].data.push([r.time*1e3,r.total/1e3])})}}),this.$refs.chart.chart.hideLoading()},textFormat(s){let t=s.toLowerCase().split(" ");for(let n=0;n<t.length;n++)t[n]=t[n][0].toUpperCase()+t[n].substr(1);return t.join(" ")}}},Ie={class:"report"},$e={class:"table-wrapper"},qe={class:"toolbox"},Me={class:"date-selected"},ze={class:"chart"};function je(s,t,n,i,o,l){const c=e.resolveComponent("dropdown"),a=e.resolveComponent("datepicker"),r=e.resolveComponent("highcharts");return e.openBlock(),e.createElementBlock("div",Ie,[e.createElementVNode("div",$e,[e.createElementVNode("div",qe,[e.createVNode(c,{options:n.columns,onChecked:l.selected,default:n.defaultData},null,8,["options","onChecked","default"]),e.createElementVNode("div",Me,[e.createVNode(a,{class:"mr-2","enable-time-picker":!1,modelValue:o.params.from,"onUpdate:modelValue":t[0]||(t[0]=m=>o.params.from=m),name:"from",textInput:"",autoApply:"",closeOnAutoApply:!1,placeholder:"from"},null,8,["modelValue"]),e.createVNode(a,{class:"mr-2","enable-time-picker":!1,modelValue:o.params.to,"onUpdate:modelValue":t[1]||(t[1]=m=>o.params.to=m),name:"to",textInput:"",autoApply:"",closeOnAutoApply:!1,placeholder:"to"},null,8,["modelValue"]),e.createElementVNode("button",{class:"btn btn-primary",onClick:t[2]||(t[2]=(...m)=>l.fetchData&&l.fetchData(...m))},"Show")])]),e.createElementVNode("div",ze,[e.createVNode(r,{ref:"chart",class:"hc",options:o.options},null,8,["options"])])])])}const We=h(Pe,[["render",je]]),He={props:{url:String,title:String,defaultData:{type:Array,default:()=>[]},columns:{type:Array,default:()=>[]}},components:{Datepicker:f,Dropdown:E},data(){return{items:this.defaultData,params:{from:new Date,to:new Date},data:[],realtime:{},fetchReady:!1,colors:N,options:{chart:{type:"column"},time:{useUTC:!0},title:{text:this.title,style:{fontSize:"24px",fontWeight:"bold"}},tooltip:{pointFormat:"{series.name}: <b>{point.y} %</b><br/>",crosshairs:!0},legend:{enabled:!0},xAxis:{crosshair:!0},yAxis:{min:0,max:100,title:{text:"Score Conformance (%)"}},series:[]}}},mounted(){this.fetchData()},methods:{selected(s){this.items=s,this.fetchData()},async fetchData(){this.$refs.chart.chart.showLoading();let s=[],t=[],n=this;await axios.get(this.url,{params:this.params}).then(i=>{let o=i.data.data,l=n.items.length;o.forEach(c=>{let a=y(c.date,"YYYY-MM-DD");s.push(a.format("ll"));let r=c.count_record*l,m=0;n.items.forEach(g=>{m=m+parseInt(c[g.data])});let _=parseInt(m/r*100);t.push(_)})}),this.options.xAxis.categories=s,this.options.series=[{name:this.title,data:t}],this.$refs.chart.chart.hideLoading()},textFormat(s){let t=s.toLowerCase().split(" ");for(let n=0;n<t.length;n++)t[n]=t[n][0].toUpperCase()+t[n].substr(1);return t.join(" ")}}},Re={class:"report"},Ke={class:"table-wrapper"},Ye={class:"toolbox"},Je={class:"date-selected"},Qe={class:"chart"};function Xe(s,t,n,i,o,l){const c=e.resolveComponent("dropdown"),a=e.resolveComponent("datepicker"),r=e.resolveComponent("highcharts");return e.openBlock(),e.createElementBlock("div",Re,[e.createElementVNode("div",Ke,[e.createElementVNode("div",Ye,[e.createVNode(c,{options:n.columns,onChecked:l.selected,default:n.defaultData},null,8,["options","onChecked","default"]),e.createElementVNode("div",Je,[e.createVNode(a,{class:"mr-2","enable-time-picker":!1,modelValue:o.params.from,"onUpdate:modelValue":t[0]||(t[0]=m=>o.params.from=m),name:"from",textInput:"",autoApply:"",closeOnAutoApply:!1,placeholder:"from"},null,8,["modelValue"]),e.createVNode(a,{class:"mr-2","enable-time-picker":!1,modelValue:o.params.to,"onUpdate:modelValue":t[1]||(t[1]=m=>o.params.to=m),name:"to",textInput:"",autoApply:"",closeOnAutoApply:!1,placeholder:"to"},null,8,["modelValue"]),e.createElementVNode("button",{class:"btn btn-primary",onClick:t[2]||(t[2]=(...m)=>l.fetchData&&l.fetchData(...m))},"Show")])]),e.createElementVNode("div",Qe,[e.createVNode(r,{ref:"chart",class:"hc",options:o.options},null,8,["options"])])])])}const Ge=h(He,[["render",Xe]]);const Ze={components:{Datepicker:f},props:{url:String,title:String},data(){return{params:{date:new Date},device:{name:null,size_fe:null,size_non_fe:null,size_ss:null},date:null,verifications:[],productions:[]}},methods:{async fetchData(){let s=await V.get(this.url,{params:this.params}).then(t=>t.data.data);this.device=s.startup.device,this.date=y(s.startup.started_at).format("DD MMMM YYYY"),this.productions=s.productions,this.verifications=s.startup.verifications},fTime(s){return y(s).format("HH:mm:ss")}}},u=s=>(e.pushScopeId("data-v-1664c35e"),s=s(),e.popScopeId(),s),et={class:"report"},tt={class:"toolbox"},ot={class:"title"},nt={class:"date-selected"},st={class:"row"},lt={class:"column"},at={class:"table bordered"},rt=u(()=>e.createElementVNode("td",{class:"bg-grey"},"Metal Detector",-1)),it={colspan:"3",class:"text-center"},dt=u(()=>e.createElementVNode("tr",{class:"bg-grey"},[e.createElementVNode("td",null,"Test Piece"),e.createElementVNode("td",null,"Fe"),e.createElementVNode("td",null,"Non Fe"),e.createElementVNode("td",null,"SS")],-1)),ct=u(()=>e.createElementVNode("td",{class:"bg-grey"},"Ukuran",-1)),mt=u(()=>e.createElementVNode("div",{class:"column"},null,-1)),pt=u(()=>e.createElementVNode("div",{class:"column"},null,-1)),ut={class:"row date"},ht={class:"column"},_t={class:"row"},ft={class:"column column-60"},Vt={class:"table bordered"},Et=u(()=>e.createElementVNode("thead",null,[e.createElementVNode("tr",{class:"bg-grey"},[e.createElementVNode("td",{rowspan:"2"},"Jam"),e.createElementVNode("td",{rowspan:"2"},"Keterangan"),e.createElementVNode("td",{colspan:"3"},"Verifikasi"),e.createElementVNode("td",{colspan:"2"},"Dibuat Oleh"),e.createElementVNode("td",{colspan:"2"},"Divalidasi Oleh"),e.createElementVNode("td",{rowspan:"2"},"Tindakan koreksi jika MD Error (input no. wor)")]),e.createElementVNode("tr",{class:"bg-grey"},[e.createElementVNode("td",null,"Fe"),e.createElementVNode("td",null,"Non Fe"),e.createElementVNode("td",null,"SS"),e.createElementVNode("td",null,"Nama Operator"),e.createElementVNode("td",null,"Paraf"),e.createElementVNode("td",null,"Nama Foreman"),e.createElementVNode("td",null,"Paraf")])],-1)),Nt={class:"text-center"},gt={class:"text-center"},yt={class:"text-center"},vt=u(()=>e.createElementVNode("td",null,null,-1)),bt=u(()=>e.createElementVNode("td",null,null,-1)),xt=u(()=>e.createElementVNode("tr",null,[e.createElementVNode("td",null,"\xA0"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td")],-1)),Dt={class:"row"},wt={class:"column"},kt={class:"table bordered"},St=u(()=>e.createElementVNode("thead",null,[e.createElementVNode("tr",{class:"bg-grey"},[e.createElementVNode("td",{rowspan:"3"},"No"),e.createElementVNode("td",{rowspan:"3"},"Jam"),e.createElementVNode("td",{rowspan:"3"},"Nama Produk"),e.createElementVNode("td",{rowspan:"3"},"BN"),e.createElementVNode("td",{rowspan:"3"},"Satuan Kemasan"),e.createElementVNode("td",{rowspan:"3"},"Verifikasi"),e.createElementVNode("td",{colspan:"9"},"Kondisi Sensitif Produk"),e.createElementVNode("td",{rowspan:"3"},"Jumlah Produk OK (pcs)"),e.createElementVNode("td",{rowspan:"3"},"Jumlah Produk Non OK (pcs)"),e.createElementVNode("td",{colspan:"2"},"Dibuat Oleh"),e.createElementVNode("td",{colspan:"2"},"Divalidasi Oleh"),e.createElementVNode("td",{rowspan:"3"},"Tindakan Koreksi untuk Produk Not OK")]),e.createElementVNode("tr",{class:"bg-grey"},[e.createElementVNode("td",{colspan:"3"},"Fe"),e.createElementVNode("td",{colspan:"3"},"Non Fe"),e.createElementVNode("td",{colspan:"3"},"SS"),e.createElementVNode("td",{rowspan:"2"},"Nama Operator"),e.createElementVNode("td",{rowspan:"2"},"Paraf"),e.createElementVNode("td",{rowspan:"2"},"Nama Foreman"),e.createElementVNode("td",{rowspan:"2"},"Paraf")]),e.createElementVNode("tr",{class:"bg-grey"},[e.createElementVNode("td",null,"Ujung Depan"),e.createElementVNode("td",null,"Tengah"),e.createElementVNode("td",null,"Ujung Belakang"),e.createElementVNode("td",null,"Ujung Depan"),e.createElementVNode("td",null,"Tengah"),e.createElementVNode("td",null,"Ujung Belakang"),e.createElementVNode("td",null,"Ujung Depan"),e.createElementVNode("td",null,"Tengah"),e.createElementVNode("td",null,"Ujung Belakang")])],-1)),Ct=u(()=>e.createElementVNode("td",null,null,-1)),At={class:"text-center"},Bt={class:"text-center"},Ft={class:"text-center"},Tt={class:"text-center"},Ot={class:"text-center"},Lt={class:"text-center"},Ut={class:"text-center"},Pt={class:"text-center"},It={class:"text-center"},$t=u(()=>e.createElementVNode("td",null,null,-1)),qt=u(()=>e.createElementVNode("td",null,null,-1)),Mt=u(()=>e.createElementVNode("tr",null,[e.createElementVNode("td",null,"\xA0"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td")],-1));function zt(s,t,n,i,o,l){const c=e.resolveComponent("datepicker");return e.openBlock(),e.createElementBlock("div",et,[e.createElementVNode("div",tt,[e.createElementVNode("h2",ot,e.toDisplayString(n.title),1),e.createElementVNode("div",nt,[e.createVNode(c,{"enable-time-picker":!1,class:"mr-2",modelValue:o.params.date,"onUpdate:modelValue":t[0]||(t[0]=a=>o.params.date=a),name:"date",textInput:"",autoApply:"",closeOnAutoApply:!1,placeholder:"date"},null,8,["modelValue"]),e.createElementVNode("button",{class:"btn btn-primary mr-2",onClick:t[1]||(t[1]=(...a)=>l.fetchData&&l.fetchData(...a))},"Show"),e.createElementVNode("button",{class:"btn btn-success",onClick:t[2]||(t[2]=(...a)=>s.download&&s.download(...a))},"Download")])]),e.createElementVNode("div",st,[e.createElementVNode("div",lt,[e.createElementVNode("table",at,[e.createElementVNode("tbody",null,[e.createElementVNode("tr",null,[rt,e.createElementVNode("td",it,e.toDisplayString(o.device.name),1)]),dt,e.createElementVNode("tr",null,[ct,e.createElementVNode("td",null,e.toDisplayString(o.device.size_fe),1),e.createElementVNode("td",null,e.toDisplayString(o.device.size_non_fe),1),e.createElementVNode("td",null,e.toDisplayString(o.device.size_ss),1)])])])]),mt,pt]),e.createElementVNode("div",ut,[e.createElementVNode("div",ht," Tanggal : "+e.toDisplayString(o.date),1)]),e.createElementVNode("div",_t,[e.createElementVNode("div",ft,[e.createElementVNode("table",Vt,[Et,e.createElementVNode("tbody",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.verifications,a=>(e.openBlock(),e.createElementBlock("tr",{key:a.id},[e.createElementVNode("td",null,e.toDisplayString(a.started_at),1),e.createElementVNode("td",null,e.toDisplayString(a.type_text),1),e.createElementVNode("td",Nt,e.toDisplayString(a.fe?"\u2714":""),1),e.createElementVNode("td",gt,e.toDisplayString(a.non_fe?"\u2714":""),1),e.createElementVNode("td",yt,e.toDisplayString(a.ss?"\u2714":""),1),e.createElementVNode("td",null,e.toDisplayString(a.operator?a.operator.name:""),1),vt,e.createElementVNode("td",null,e.toDisplayString(a.foreman?a.foreman.name:""),1),bt,e.createElementVNode("td",null,e.toDisplayString(a.wor_number),1)]))),128)),xt])])])]),e.createElementVNode("div",Dt,[e.createElementVNode("div",wt,[e.createElementVNode("table",kt,[St,e.createElementVNode("tbody",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.productions,a=>(e.openBlock(),e.createElementBlock("tr",{key:a.id},[Ct,e.createElementVNode("td",null,e.toDisplayString(`${l.fTime(a.started_at)} - ${l.fTime(a.finished_at)}`),1),e.createElementVNode("td",null,e.toDisplayString(a.production.product.name),1),e.createElementVNode("td",null,e.toDisplayString(a.production.batch_no),1),e.createElementVNode("td",null,e.toDisplayString(a.production.product.unit),1),e.createElementVNode("td",null,e.toDisplayString(a.order_text),1),e.createElementVNode("td",At,e.toDisplayString(a.fe_front?"\u2714":""),1),e.createElementVNode("td",Bt,e.toDisplayString(a.fe_mid?"\u2714":""),1),e.createElementVNode("td",Ft,e.toDisplayString(a.fe_end?"\u2714":""),1),e.createElementVNode("td",Tt,e.toDisplayString(a.non_fe_front?"\u2714":""),1),e.createElementVNode("td",Ot,e.toDisplayString(a.non_fe_mid?"\u2714":""),1),e.createElementVNode("td",Lt,e.toDisplayString(a.non_fe_end?"\u2714":""),1),e.createElementVNode("td",Ut,e.toDisplayString(a.ss_front?"\u2714":""),1),e.createElementVNode("td",Pt,e.toDisplayString(a.ss_mid?"\u2714":""),1),e.createElementVNode("td",It,e.toDisplayString(a.ss_end?"\u2714":""),1),e.createElementVNode("td",null,e.toDisplayString(a.good_records_count),1),e.createElementVNode("td",null,e.toDisplayString(a.ng_records_count),1),e.createElementVNode("td",null,e.toDisplayString(a.operator?a.operator.name:""),1),$t,e.createElementVNode("td",null,e.toDisplayString(a.foreman?a.foreman.name:""),1),qt,e.createElementVNode("td",null,e.toDisplayString(a.remark),1)]))),128)),Mt])])])])])}const jt=h(Ze,[["render",zt],["__scopeId","data-v-1664c35e"]]);const Wt={components:{VeProgress:k.exports.VeProgress,Datepicker:f},props:{title:String,isSupervisor:Boolean,settingShowed:Boolean,url:String,saveUrl:String},data(){return{params:{date:new Date},variable:{number_of_shift:3,hours_per_shift:8,planned_shutdown_shift:1,downtime_loss:1,ideal_cycle_time_seconds:30,total_production:0,good_production:0}}},mounted(){this.fetchData()},methods:{async fetchData(){let s=await V.get(this.url,{params:this.params}).then(t=>t.data.data);s?this.variable=s:this.variable={number_of_shift:3,hours_per_shift:8,planned_shutdown_shift:1,downtime_loss:0,ideal_cycle_time_seconds:30,total_production:0,good_production:0}},async save(){this.variable.date=this.params.date,await V.post(this.saveUrl,this.variable),this.fetchData()}},computed:{availability(){return this.operating_time/this.total_available_time*100},performance(){return this.ideal_cycle_time*this.variable.total_production/this.operating_time*100},quality(){return this.variable.good_production/this.variable.total_production*100},oee(){return this.availability*this.performance*this.quality/1e4},total_available_time(){return this.variable.number_of_shift*this.variable.hours_per_shift},planned_shutdown(){return this.variable.number_of_shift*this.variable.planned_shutdown_shift},scheduled_operating_time(){return this.total_available_time-this.planned_shutdown},ideal_cycle_time(){return this.variable.ideal_cycle_time_seconds/3600},operating_time(){return this.total_available_time-this.planned_shutdown-this.variable.downtime_loss},effective_operating_time(){return this.variable.total_production*this.ideal_cycle_time},speed_loss(){return this.operating_time-this.effective_operating_time}}},d=s=>(e.pushScopeId("data-v-2c0626d0"),s=s(),e.popScopeId(),s),Ht={class:"toolbox"},Rt={class:"title"},Kt={class:"date-selected"},Yt={class:"row"},Jt={class:"column column-8"},Qt={class:"row"},Xt={class:"column column-12"},Gt={class:"card"},Zt=d(()=>e.createElementVNode("div",{class:"card-title"}," OEE Score ",-1)),eo={class:"card-body"},to=d(()=>e.createElementVNode("span",null,"%",-1)),oo={class:"row"},no={class:"column column-4"},so={class:"card"},lo=d(()=>e.createElementVNode("div",{class:"card-title"}," Availability ",-1)),ao={class:"card-body"},ro=d(()=>e.createElementVNode("span",null,"%",-1)),io={class:"column column-4"},co={class:"card"},mo=d(()=>e.createElementVNode("div",{class:"card-title"}," Performance ",-1)),po={class:"card-body"},uo=d(()=>e.createElementVNode("span",null,"%",-1)),ho={class:"column column-4"},_o={class:"card"},fo=d(()=>e.createElementVNode("div",{class:"card-title"}," Quality ",-1)),Vo={class:"card-body"},Eo=d(()=>e.createElementVNode("span",null,"%",-1)),No={key:0,class:"column column-4"},go={class:"table"},yo=d(()=>e.createElementVNode("thead",null,[e.createElementVNode("tr",null,[e.createElementVNode("th",null,"Factors"),e.createElementVNode("th",null,"Number Of Shifts"),e.createElementVNode("th",null,"Hours per Shift"),e.createElementVNode("th",{class:"text-right"},"Time (hour)")])],-1)),vo=d(()=>e.createElementVNode("td",null,"Total Available Time",-1)),bo=["readonly"],xo=["readonly"],Do={class:"text-right"},wo=d(()=>e.createElementVNode("td",null,"Planned Shutdown",-1)),ko=["readonly"],So=["readonly"],Co={class:"text-right"},Ao=d(()=>e.createElementVNode("td",null,"Scheduled Operating Time",-1)),Bo=d(()=>e.createElementVNode("td",null,null,-1)),Fo=d(()=>e.createElementVNode("td",null,null,-1)),To={class:"text-right"},Oo=d(()=>e.createElementVNode("td",null,"Downtime Loss",-1)),Lo=d(()=>e.createElementVNode("td",null,"(sum by alarm sensor)",-1)),Uo=d(()=>e.createElementVNode("td",null,null,-1)),Po={class:"text-right"},Io=["readonly"],$o=d(()=>e.createElementVNode("td",null,"Ideal Cycle Time",-1)),qo=d(()=>e.createElementVNode("td",null,"Cycle time in Sec",-1)),Mo=["readonly"],zo={class:"text-right"},jo=d(()=>e.createElementVNode("td",null,"Operating Time",-1)),Wo=d(()=>e.createElementVNode("td",null,null,-1)),Ho=d(()=>e.createElementVNode("td",null,null,-1)),Ro={class:"text-right"},Ko=d(()=>e.createElementVNode("td",null,"Net (Effective) operating time",-1)),Yo=d(()=>e.createElementVNode("td",null,null,-1)),Jo=d(()=>e.createElementVNode("td",null,null,-1)),Qo={class:"text-right"},Xo=d(()=>e.createElementVNode("td",null,"Speed Loss",-1)),Go=d(()=>e.createElementVNode("td",null,null,-1)),Zo=d(()=>e.createElementVNode("td",null,null,-1)),en={class:"text-right"},tn=d(()=>e.createElementVNode("tr",{class:"title"},[e.createElementVNode("th",{colspan:"3"},"Production Data"),e.createElementVNode("th",{class:"text-right"},"Units")],-1)),on=d(()=>e.createElementVNode("td",null,"Total Production",-1)),nn=d(()=>e.createElementVNode("td",null,null,-1)),sn=d(()=>e.createElementVNode("td",null,null,-1)),ln={class:"text-right"},an=["readonly"],rn=d(()=>e.createElementVNode("td",null,"Good Production",-1)),dn=d(()=>e.createElementVNode("td",null,null,-1)),cn=d(()=>e.createElementVNode("td",null,null,-1)),mn={class:"text-right"},pn=["readonly"],un=d(()=>e.createElementVNode("td",null,"Production Reject",-1)),hn=d(()=>e.createElementVNode("td",null,null,-1)),_n=d(()=>e.createElementVNode("td",null,null,-1)),fn={class:"text-right"},Vn=d(()=>e.createElementVNode("tr",{class:"title"},[e.createElementVNode("th",{colspan:"3"},"OEE Factors"),e.createElementVNode("th",{class:"text-right"},"Factor %")],-1)),En=d(()=>e.createElementVNode("td",null,"Availability",-1)),Nn=d(()=>e.createElementVNode("td",null,null,-1)),gn=d(()=>e.createElementVNode("td",null,null,-1)),yn={class:"text-right"},vn=d(()=>e.createElementVNode("td",null,"Performance",-1)),bn=d(()=>e.createElementVNode("td",null,null,-1)),xn=d(()=>e.createElementVNode("td",null,null,-1)),Dn={class:"text-right"},wn=d(()=>e.createElementVNode("td",null,"Quality",-1)),kn=d(()=>e.createElementVNode("td",null,null,-1)),Sn=d(()=>e.createElementVNode("td",null,null,-1)),Cn={class:"text-right"},An=d(()=>e.createElementVNode("th",null,"OEE",-1)),Bn=d(()=>e.createElementVNode("th",null,null,-1)),Fn=d(()=>e.createElementVNode("th",null,null,-1)),Tn={class:"text-right"};function On(s,t,n,i,o,l){const c=e.resolveComponent("datepicker"),a=e.resolveComponent("ve-progress");return e.openBlock(),e.createElementBlock("div",null,[e.createElementVNode("div",Ht,[e.createElementVNode("h2",Rt,e.toDisplayString(n.title),1),e.createElementVNode("div",Kt,[e.createVNode(c,{"enable-time-picker":!1,class:"mr-2",modelValue:o.params.date,"onUpdate:modelValue":t[0]||(t[0]=r=>o.params.date=r),name:"date",textInput:"",autoApply:"",closeOnAutoApply:!1,placeholder:"date"},null,8,["modelValue"]),e.createElementVNode("button",{class:"btn btn-primary mr-2",onClick:t[1]||(t[1]=(...r)=>l.fetchData&&l.fetchData(...r))},"Show")])]),e.createElementVNode("div",Yt,[e.createElementVNode("div",Jt,[e.createElementVNode("div",Qt,[e.createElementVNode("div",Xt,[e.createElementVNode("div",Gt,[Zt,e.createElementVNode("div",eo,[e.createVNode(a,{progress:parseFloat(l.oee.toFixed(2)),thickness:30,size:250,color:"#1aadce","empty-thickness":"10%","font-size":"40px"},{legend:e.withCtx(()=>[to]),_:1},8,["progress"])])])])]),e.createElementVNode("div",oo,[e.createElementVNode("div",no,[e.createElementVNode("div",so,[lo,e.createElementVNode("div",ao,[e.createVNode(a,{progress:parseFloat(l.availability.toFixed(2)),color:"#e4d354",thickness:20,size:150,"empty-thickness":"10%","font-size":"22px"},{legend:e.withCtx(()=>[ro]),_:1},8,["progress"])])])]),e.createElementVNode("div",io,[e.createElementVNode("div",co,[mo,e.createElementVNode("div",po,[e.createVNode(a,{progress:parseFloat(l.performance.toFixed(2)),color:"#8085e9",thickness:20,size:150,"empty-thickness":"10%","font-size":"22px"},{legend:e.withCtx(()=>[uo]),_:1},8,["progress"])])])]),e.createElementVNode("div",ho,[e.createElementVNode("div",_o,[fo,e.createElementVNode("div",Vo,[e.createVNode(a,{progress:parseFloat(l.quality.toFixed(2)),color:"#f45b5b",thickness:20,size:150,"empty-thickness":"10%","font-size":"22px"},{legend:e.withCtx(()=>[Eo]),_:1},8,["progress"])])])])])]),n.settingShowed?(e.openBlock(),e.createElementBlock("div",No,[e.createElementVNode("table",go,[yo,e.createElementVNode("tbody",null,[e.createElementVNode("tr",null,[vo,e.createElementVNode("td",null,[e.withDirectives(e.createElementVNode("input",{readonly:!n.isSupervisor,type:"number",class:"form-input","onUpdate:modelValue":t[2]||(t[2]=r=>o.variable.number_of_shift=r),placeholder:"Shifts"},null,8,bo),[[e.vModelText,o.variable.number_of_shift]])]),e.createElementVNode("td",null,[e.withDirectives(e.createElementVNode("input",{readonly:!n.isSupervisor,type:"number",class:"form-input","onUpdate:modelValue":t[3]||(t[3]=r=>o.variable.hours_per_shift=r),placeholder:"Hours/Shift"},null,8,xo),[[e.vModelText,o.variable.hours_per_shift]])]),e.createElementVNode("td",Do,e.toDisplayString(l.total_available_time),1)]),e.createElementVNode("tr",null,[wo,e.createElementVNode("td",null,[e.withDirectives(e.createElementVNode("input",{readonly:!n.isSupervisor,type:"number",class:"form-input","onUpdate:modelValue":t[4]||(t[4]=r=>o.variable.number_of_shift=r),placeholder:"Shifts"},null,8,ko),[[e.vModelText,o.variable.number_of_shift]])]),e.createElementVNode("td",null,[e.withDirectives(e.createElementVNode("input",{readonly:!n.isSupervisor,type:"number",class:"form-input","onUpdate:modelValue":t[5]||(t[5]=r=>o.variable.planned_shutdown_shift=r),placeholder:"Hours/Shift"},null,8,So),[[e.vModelText,o.variable.planned_shutdown_shift]])]),e.createElementVNode("td",Co,e.toDisplayString(l.planned_shutdown),1)]),e.createElementVNode("tr",null,[Ao,Bo,Fo,e.createElementVNode("td",To,e.toDisplayString(l.scheduled_operating_time),1)]),e.createElementVNode("tr",null,[Oo,Lo,Uo,e.createElementVNode("td",Po,[e.withDirectives(e.createElementVNode("input",{readonly:!n.isSupervisor,type:"number",class:"form-input text-right","onUpdate:modelValue":t[6]||(t[6]=r=>o.variable.downtime_loss=r),placeholder:"downtime loss"},null,8,Io),[[e.vModelText,o.variable.downtime_loss]])])]),e.createElementVNode("tr",null,[$o,qo,e.createElementVNode("td",null,[e.withDirectives(e.createElementVNode("input",{readonly:!n.isSupervisor,type:"number",class:"form-input","onUpdate:modelValue":t[7]||(t[7]=r=>o.variable.ideal_cycle_time_seconds=r)},null,8,Mo),[[e.vModelText,o.variable.ideal_cycle_time_seconds]])]),e.createElementVNode("td",zo,e.toDisplayString(l.ideal_cycle_time.toFixed(3)),1)]),e.createElementVNode("tr",null,[jo,Wo,Ho,e.createElementVNode("td",Ro,e.toDisplayString(l.operating_time),1)]),e.createElementVNode("tr",null,[Ko,Yo,Jo,e.createElementVNode("td",Qo,e.toDisplayString(l.effective_operating_time.toFixed(1)),1)]),e.createElementVNode("tr",null,[Xo,Go,Zo,e.createElementVNode("td",en,e.toDisplayString(l.speed_loss.toFixed(1)),1)]),tn,e.createElementVNode("tr",null,[on,nn,sn,e.createElementVNode("td",ln,[e.withDirectives(e.createElementVNode("input",{readonly:!n.isSupervisor,type:"number",class:"form-input text-right","onUpdate:modelValue":t[8]||(t[8]=r=>o.variable.total_production=r)},null,8,an),[[e.vModelText,o.variable.total_production]])])]),e.createElementVNode("tr",null,[rn,dn,cn,e.createElementVNode("td",mn,[e.withDirectives(e.createElementVNode("input",{readonly:!n.isSupervisor,type:"number",class:"form-input text-right","onUpdate:modelValue":t[9]||(t[9]=r=>o.variable.good_production=r)},null,8,pn),[[e.vModelText,o.variable.good_production]])])]),e.createElementVNode("tr",null,[un,hn,_n,e.createElementVNode("td",fn,e.toDisplayString(o.variable.total_production-o.variable.good_production),1)]),Vn,e.createElementVNode("tr",null,[En,Nn,gn,e.createElementVNode("td",yn,e.toDisplayString(l.availability.toFixed(2)),1)]),e.createElementVNode("tr",null,[vn,bn,xn,e.createElementVNode("td",Dn,e.toDisplayString(l.performance.toFixed(2)),1)]),e.createElementVNode("tr",null,[wn,kn,Sn,e.createElementVNode("td",Cn,e.toDisplayString(l.quality.toFixed(2)),1)])]),e.createElementVNode("tfoot",null,[e.createElementVNode("tr",null,[An,Bn,Fn,e.createElementVNode("th",Tn,e.toDisplayString(l.oee.toFixed(2)),1)])])]),n.isSupervisor?(e.openBlock(),e.createElementBlock("button",{key:0,class:"btn btn-primary btn-right",onClick:t[10]||(t[10]=(...r)=>l.save&&l.save(...r))},"Save Setting")):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0)])])}const Ln=h(Wt,[["render",On],["__scopeId","data-v-2c0626d0"]]),Un={components:{Datepicker:f},props:{url:String,title:String},data(){return{params:{date:{month:new Date().getMonth(),year:new Date().getFullYear()}},options:{chart:{type:"bar"},title:{text:this.title,align:"left"},xAxis:{categories:[],title:{text:null},gridLineWidth:1,lineWidth:0},yAxis:{min:0,title:{text:"Duration (hours)",align:"high"},labels:{overflow:"justify"},gridLineWidth:0},tooltip:{valueSuffix:" Hours"},series:[{name:"High Losses",data:[]}]}}},mounted(){this.fetchData()},methods:{async fetchData(){this.options.xAxis.categories=[],this.options.series[0].data=[];let s=await V.get(this.url,{params:this.params.date}).then(t=>t.data);s.error||s.data.forEach(t=>{this.options.xAxis.categories.push(t.message),this.options.series[0].data.push(parseFloat(t.seconds/(60*60)))})}}},Pn={class:"report"},In={class:"table-wrapper"},$n={class:"toolbox"},qn={class:"date-selected"},Mn={class:"chart"};function zn(s,t,n,i,o,l){const c=e.resolveComponent("datepicker"),a=e.resolveComponent("highcharts");return e.openBlock(),e.createElementBlock("div",Pn,[e.createElementVNode("div",In,[e.createElementVNode("div",$n,[e.createElementVNode("div",qn,[e.createVNode(c,{"month-picker":"",class:"mr-2",modelValue:o.params.date,"onUpdate:modelValue":t[0]||(t[0]=r=>o.params.date=r),name:"date",autoApply:"",placeholder:"date"},null,8,["modelValue"]),e.createElementVNode("button",{class:"btn btn-primary",onClick:t[1]||(t[1]=(...r)=>l.fetchData&&l.fetchData(...r))},"Show")])]),e.createElementVNode("div",Mn,[e.createVNode(a,{ref:"chart",class:"hc",options:o.options},null,8,["options"])])])])}const jn=h(Un,[["render",zn]]),Wn={components:{Datepicker:f},props:{url:String,title:String},data(){return{params:{from:new Date,to:new Date},options:{chart:{type:"column"},title:{text:this.title},xAxis:{categories:[],crosshair:!0},yAxis:{min:0,title:{text:"Score (%)"}},tooltip:{headerFormat:'<span style="font-size:10px">{point.key}</span><table>',pointFormat:'<tr><td style="color:{series.color};padding:0">{series.name}: </td><td style="padding:0"><b>{point.y:.1f} mm</b></td></tr>',footerFormat:"</table>",shared:!0,useHTML:!0},plotOptions:{column:{pointPadding:.2,borderWidth:0}},series:[]}}},methods:{async fetchData(){let s=await V.get(this.url,{params:this.params}).then(n=>n.data);["Availability","Performance","Quality","OEE"].forEach((n,i)=>{this.options.series[i]={name:n,data:[]}}),this.options.xAxis.categories=[],s.data.forEach(n=>{this.options.xAxis.categories.push(n.date_score),this.options.series[0].data.push(n.availability*100),this.options.series[1].data.push(n.performance*100),this.options.series[2].data.push(n.quality*100),this.options.series[3].data.push(n.oee*100)})}}},Hn={class:"report"},Rn={class:"table-wrapper"},Kn={class:"toolbox"},Yn={class:"date-selected"},Jn={class:"chart"};function Qn(s,t,n,i,o,l){const c=e.resolveComponent("datepicker"),a=e.resolveComponent("highcharts");return e.openBlock(),e.createElementBlock("div",Hn,[e.createElementVNode("div",Rn,[e.createElementVNode("div",Kn,[e.createElementVNode("div",Yn,[e.createVNode(c,{class:"mr-2",type:"datetime",modelValue:o.params.from,"onUpdate:modelValue":t[0]||(t[0]=r=>o.params.from=r),name:"from",textInput:"","enable-time-picker":!1,autoApply:"",closeOnAutoApply:!1,placeholder:"from"},null,8,["modelValue"]),e.createVNode(c,{class:"mr-2",type:"datetime",modelValue:o.params.to,"onUpdate:modelValue":t[1]||(t[1]=r=>o.params.to=r),name:"to",textInput:"","enable-time-picker":!1,autoApply:"",closeOnAutoApply:!1,placeholder:"to"},null,8,["modelValue"]),e.createElementVNode("button",{class:"btn btn-primary",onClick:t[2]||(t[2]=(...r)=>l.fetchData&&l.fetchData(...r))},"Show")])]),e.createElementVNode("div",Jn,[e.createVNode(a,{ref:"chart",class:"hc",options:o.options},null,8,["options"])])])])}const Xn=h(Wn,[["render",Qn]]);S(x);const p=C({mounted(){},data(){return{active:null}}});x.setOptions({time:{timezone:"Asia/Jakarta"}});p.use(A);Object.defineProperty(String.prototype,"capitalize",{value:function(){let s=this.split(" ");for(let t=0;t<s.length;t++){const n=typeof(s==null?void 0:s[t][0])=="string"?s[t][0].toUpperCase():"";s[t]=n+s[t].substr(1)}return s.join(" ")},enumerable:!1});p.config.globalProperties.$filters={textFormat(s){return s.toLowerCase().capitalize()}};p.component("trend-view",Z);p.component("trend-live",ae);p.component("log-table",Ve);p.component("v-table",we);p.component("v-mqtt",Ce);p.component("pie",Ue);p.component("pwr-trend",We);p.component("score-bar",Ge);p.component("md-report",jt);p.component("oee-score",Ln);p.component("bar-chart",jn);p.component("oee-history",Xn);p.mount("#app");
