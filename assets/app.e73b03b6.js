import{a as E,v as $,b as e,c as f,m as x,D as k,C,h as g,d as w,s as A,e as D,x as B,f as F,H as T}from"./vendor.61aad8a9.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const l of t)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(t){const l={};return t.integrity&&(l.integrity=t.integrity),t.referrerpolicy&&(l.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?l.credentials="include":t.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(t){if(t.ep)return;t.ep=!0;const l=n(t);fetch(t.href,l)}})();window.axios=E;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";const u=(s,o)=>{const n=s.__vccOpts||s;for(const[r,t]of o)n[r]=t;return n},I={props:{options:Array,type:{type:String,default:"select"},default:{type:Array,default:()=>[]}},data(){return{show:!1,selected:this.default}},methods:{showDropdown(){this.show=!this.show},hide(){this.show=!1},groupBy(s,o){return s.reduce((n,r,t)=>{var l;return(n[l=o(r,t,s)]||(n[l]=[])).push(r),n},{})}},computed:{groups(){return this.options[0].hasOwnProperty("group")?this.groupBy(this.options,s=>s.group):this.options}},watch:{selected(s){this.$emit("checked",s)}},directives:{clickOutside:$.directive}},L={class:"dd"},P={id:"list1",class:"dropdown-check-list",tabindex:"100"},O=e.createStaticVNode('<svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-adjustments-horizontal" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M14 6m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"></path><path d="M4 6l8 0"></path><path d="M16 6l4 0"></path><path d="M8 12m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"></path><path d="M4 12l2 0"></path><path d="M10 12l10 0"></path><path d="M17 18m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"></path><path d="M4 18l11 0"></path><path d="M19 18l1 0"></path></svg>',1),U=[O],q={key:2,class:"items"},M={key:0},z=["id","value"],j=["for"],Y={key:1},R=["id","value"],W=["for"];function H(s,o,n,r,t,l){const i=e.resolveDirective("click-outside");return e.withDirectives((e.openBlock(),e.createElementBlock("div",L,[e.createElementVNode("div",P,[n.type=="select"?(e.openBlock(),e.createElementBlock("span",{key:0,class:"anchor form-control",onClick:o[0]||(o[0]=(...a)=>l.showDropdown&&l.showDropdown(...a))}," Select Parameter ")):e.createCommentVNode("",!0),n.type=="icon"?(e.openBlock(),e.createElementBlock("span",{key:1,class:"icon",onClick:o[1]||(o[1]=(...a)=>l.showDropdown&&l.showDropdown(...a))},U)):e.createCommentVNode("",!0),t.show?(e.openBlock(),e.createElementBlock("ul",q,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.groups,(a,d)=>(e.openBlock(),e.createElementBlock("li",{key:d},[Array.isArray(a)?(e.openBlock(),e.createElementBlock("div",M,[e.createElementVNode("span",null,e.toDisplayString(d),1),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a,(p,V)=>(e.openBlock(),e.createElementBlock("div",{key:V},[e.withDirectives(e.createElementVNode("input",{type:"checkbox",id:V,value:p,"onUpdate:modelValue":o[2]||(o[2]=b=>t.selected=b)},null,8,z),[[e.vModelCheckbox,t.selected]]),e.createElementVNode("label",{for:V},e.toDisplayString(s.$filters.textFormat(p.text)),9,j)]))),128))])):e.createCommentVNode("",!0),Array.isArray(a)?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",Y,[e.withDirectives(e.createElementVNode("input",{type:"checkbox",id:d,value:a,"onUpdate:modelValue":o[3]||(o[3]=p=>t.selected=p)},null,8,R),[[e.vModelCheckbox,t.selected]]),e.createElementVNode("label",{for:d},e.toDisplayString(s.$filters.textFormat(a.text)),9,W)]))]))),128))])):e.createCommentVNode("",!0)])])),[[i,l.hide]])}const y=u(I,[["render",H]]);const v=["#2f7ed8","#8bbc21","#910000","#1aadce","#492970","#f28f43","#77a1e5","#c42525","#a6c96a","#7cb5ec","#434348","#90ed7d","#f7a35c","#8085e9","#f15c80","#e4d354","#2b908f","#f45b5b","#91e8e1","#0d233a"];const K={props:{url:String,title:String,defaultData:{type:Array,default:()=>[]},columns:{type:Array,default:()=>[]}},components:{Datepicker:f,Dropdown:y},data(){return{items:this.defaultData,params:{from:new Date,to:new Date,interval:3600,limit:1e3,select:[]},data:[],realtime:{},fetchReady:!1,colors:v,options:{chart:{type:"line",zoomType:"x",height:600},time:{useUTC:!1},title:{text:this.title,style:{fontSize:"24px",fontWeight:"bold"}},xAxis:{type:"datetime",title:{text:""}},yAxis:[],tooltip:{pointFormat:"{series.name}: <b>{point.y:.2f}</b><br/>",crosshairs:!0,shared:!0},legend:{enabled:!0},series:[]}}},mounted(){this.fetchData()},methods:{interval(s){this.params.interval=s,this.fetchData()},selected(s){this.items=s,this.fetchData()},async fetchData(){this.$refs.chart.chart.showLoading();let s=[],o=[],n=[];this.items.forEach((r,t)=>{let l=this.colors[t];o[t]={title:{text:this.textFormat(r.text),style:{color:l,fontSize:"16px"}},lineColor:l,labels:{style:{color:l},align:"left",x:14},lineWidth:1,opposite:!0},r.range&&(o[t].min=r.range[0],o[t].max=r.range[1]);let i=null;!!r.data.match(/\./g)&&(i=parseInt(r.data.split(".")[1])),s[t]={id:r.data,row:r.data.split(".")[0],colIndex:i,yAxis:t,type:r.type?r.type:"spline",name:this.textFormat(r.text),color:l,lineWidth:1,data:[]},n[t]=r.data}),this.options.series=s,this.options.yAxis=o,this.params.select=n,await axios.get(this.url,{params:this.params}).then(r=>{r.data.data.forEach(l=>{let i=l.unix_time;this.options.series.forEach((a,d)=>{let p=l[a.row];a.colIndex!==null?this.options.series[d].data.push([i,p[a.colIndex]]):this.options.series[d].data.push([i,p])})})}),this.$refs.chart.chart.hideLoading()},textFormat(s){let o=s.trim().toLowerCase().split(" ");for(let n=0;n<o.length;n++)o[n]=o[n][0].toUpperCase()+o[n].substr(1);return o.join(" ")}}},J={class:"report"},Q={class:"table-wrapper"},G={class:"toolbox"},X={class:"date-selected"},Z=e.createStaticVNode('<option value="10">10s</option><option value="60">1m</option><option value="900">15m</option><option value="1800">30m</option><option value="3600">1h</option><option value="7200">2h</option><option value="10800">3h</option><option value="18000">5h</option><option value="36000">10h</option><option value="86400">24h</option>',10),ee=[Z],te={class:"chart"};function oe(s,o,n,r,t,l){const i=e.resolveComponent("dropdown"),a=e.resolveComponent("datepicker"),d=e.resolveComponent("highcharts");return e.openBlock(),e.createElementBlock("div",J,[e.createElementVNode("div",Q,[e.createElementVNode("div",G,[e.createVNode(i,{options:n.columns,onChecked:l.selected,default:n.defaultData},null,8,["options","onChecked","default"]),e.createElementVNode("div",X,[e.createVNode(a,{class:"mr-2",type:"datetime",modelValue:t.params.from,"onUpdate:modelValue":o[0]||(o[0]=p=>t.params.from=p),name:"from",textInput:"",autoApply:"",closeOnAutoApply:!1,placeholder:"from"},null,8,["modelValue"]),e.createVNode(a,{class:"mr-2",type:"datetime",modelValue:t.params.to,"onUpdate:modelValue":o[1]||(o[1]=p=>t.params.to=p),name:"to",textInput:"",autoApply:"",closeOnAutoApply:!1,placeholder:"to"},null,8,["modelValue"]),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":o[2]||(o[2]=p=>t.params.interval=p),class:"form-control wd-80 mr-2"},ee,512),[[e.vModelSelect,t.params.interval]]),e.createElementVNode("button",{class:"btn btn-primary",onClick:o[3]||(o[3]=(...p)=>l.fetchData&&l.fetchData(...p))},"Show")])]),e.createElementVNode("div",te,[e.createVNode(d,{ref:"chart",class:"hc","constructor-type":"stockChart",options:t.options},null,8,["options"])])])])}const se=u(K,[["render",oe]]),ne={props:{url:String,title:String,mqtt:{type:Object,default(s){return{url:null,username:null,password:null,topic:null,timefield:"_terminalTime"}}},defaultData:{type:Array,default:()=>[]},columns:{type:Array,default:()=>[]}},components:{Dropdown:y},data(){return{items:this.defaultData,mqttConnection:null,colors:v,params:{last:30},options:{chart:{type:"line",zoomType:"x",height:600},time:{useUTC:!1},title:{text:this.title,style:{fontSize:"24px",fontWeight:"bold"}},xAxis:{type:"datetime",title:{text:""}},yAxis:[],tooltip:{pointFormat:"{series.name}: <b>{point.y:.2f}</b><br/>",crosshairs:!0,shared:!0},legend:{enabled:!0},series:[]}}},created(){this.mqttConnection=x.exports.connect(this.mqtt.url,{username:this.mqtt.username,password:this.mqtt.password})},mounted(){this.fetchData(),this.listen()},methods:{listen(){if(this.mqttConnection){let s=this;this.mqttConnection.on("connect",function(){s.mqttConnection.subscribe(s.mqtt.topic,function(o){o||console.log("connected")})}),this.mqttConnection.on("message",this.received)}},received(s,o){let n=JSON.parse(o.toString()),r=this.mqtt.timefield?this.mqtt.timefield:"_terminalTime",t=Date.parse(n[r]);console.log(n.mc_run),this.options.series.forEach((l,i)=>{this.options.series[i].data.shift();let a=n[l.row];if(l.colIndex!==null){let d=a[l.colIndex];typeof d=="boolean"&&(d=d?1:0),this.options.series[i].data.push([t,d])}else typeof a=="boolean"&&(a=a?1:0),this.options.series[i].data.push([t,parseFloat(a)])})},selected(s){this.items=s,this.fetchData()},async fetchData(){this.$refs.chart.chart.showLoading();let s=[],o=[];this.mqttI&&this.mqttI.end(),this.items.forEach((n,r)=>{let t=this.colors[r];o[r]={title:{text:this.textFormat(n.text),style:{color:t,fontSize:"14px"}},lineColor:t,labels:{style:{color:t},align:"left",x:14},lineWidth:2,opposite:!0},n.range&&(o[r].min=n.range[0],o[r].max=n.range[1]);let l=null;!!n.data.match(/\./g)&&(l=parseInt(n.data.split(".")[1])),s[r]={id:n.data,row:n.data.split(".")[0],colIndex:l,yAxis:r,type:n.type?n.type:"spline",name:this.textFormat(n.text),color:t,lineWidth:1,data:[]}}),this.options.series=s,this.options.yAxis=o,await axios.get(this.url,{params:this.params}).then(n=>{n.data.data.forEach(t=>{let l=Date.parse(t.terminal_time),i=JSON.parse(t.data);this.options.series.forEach((a,d)=>{let p=i[a.row];if(a.colIndex!==null){let V=p[a.colIndex];typeof V=="boolean"&&(V=V?1:0),this.options.series[d].data.push([l,V])}else typeof p=="boolean"&&(p=p?1:0),this.options.series[d].data.push([l,parseFloat(p)])})})}),this.$refs.chart.chart.hideLoading()},textFormat(s){let o=s.trim().toLowerCase().split(" ");for(let n=0;n<o.length;n++)o[n]=o[n][0].toUpperCase()+o[n].substr(1);return o.join(" ")}}},le={class:"report"},ae={class:"table-wrapper"},re={class:"toolbox"},ie={class:"chart"};function ce(s,o,n,r,t,l){const i=e.resolveComponent("dropdown"),a=e.resolveComponent("highcharts");return e.openBlock(),e.createElementBlock("div",le,[e.createElementVNode("div",ae,[e.createElementVNode("div",re,[e.createVNode(i,{options:n.columns,onChecked:l.selected,default:n.defaultData},null,8,["options","onChecked","default"])]),e.createElementVNode("div",ie,[e.createVNode(a,{ref:"chart","constructor-type":"stockChart",class:"hc",options:t.options},null,8,["options"])])])])}const de=u(ne,[["render",ce]]);const me={props:{url:String,export:String,headers:Array,title:String,useInterval:{type:Boolean,default:!1}},components:{Vue3EasyDataTable:k,Datepicker:f},data(){return{options:{page:1,rowsPerPage:25},params:{from:new Date,to:new Date,interval:60},dataLength:0,isLoading:!1,items:[]}},mounted(){this.fetchData()},watch:{options:{handler(s){this.fetchData()},deep:!0}},methods:{async fetchData(){let s=Object.assign(this.params,this.options);this.isLoading=!0,this.items=[];let o=await axios.get(this.url,{params:s}).then(n=>n.data);this.items=o.data,this.dataLength=o.meta.total,this.options.page=o.meta.current_page,this.options.rowsPerPage=o.meta.per_page,this.isLoading=!1},download(){let s=this.export.split("?");const o=new URLSearchParams(s[1]);o.append("interval",this.params.interval),o.append("from",this.params.from.toISOString()),o.append("to",this.params.to.toISOString()),window.open(s[0]+"?"+o.toString(),"_blank")}}},pe={class:"report"},he={class:"table-wrapper"},ue={class:"toolbox"},_e={class:"title"},Ve={class:"date-selected"},Ee=e.createStaticVNode('<option value="10">10s</option><option value="60">1m</option><option value="900">15m</option><option value="1800">30m</option><option value="3600">1h</option><option value="7200">2h</option><option value="10800">3h</option><option value="18000">5h</option><option value="36000">10h</option><option value="86400">24h</option>',10),Ne=[Ee],fe={class:"table-content"};function ge(s,o,n,r,t,l){const i=e.resolveComponent("datepicker"),a=e.resolveComponent("Vue3EasyDataTable");return e.openBlock(),e.createElementBlock("div",pe,[e.createElementVNode("div",he,[e.createElementVNode("div",ue,[e.createElementVNode("h2",_e,e.toDisplayString(n.title),1),e.createElementVNode("div",Ve,[e.createVNode(i,{class:"mr-2",modelValue:t.params.from,"onUpdate:modelValue":o[0]||(o[0]=d=>t.params.from=d),name:"from",textInput:"",autoApply:"",closeOnAutoApply:!1,placeholder:"from"},null,8,["modelValue"]),e.createVNode(i,{class:"mr-2",modelValue:t.params.to,"onUpdate:modelValue":o[1]||(o[1]=d=>t.params.to=d),name:"to",textInput:"",autoApply:"",closeOnAutoApply:!1,placeholder:"to"},null,8,["modelValue"]),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":o[2]||(o[2]=d=>t.params.interval=d),class:"form-control wd-80 mr-2"},Ne,512),[[e.vModelSelect,t.params.interval],[e.vShow,n.useInterval]]),e.createElementVNode("button",{class:"btn btn-primary mr-2",onClick:o[3]||(o[3]=(...d)=>l.fetchData&&l.fetchData(...d))},"Show"),e.createElementVNode("button",{class:"btn btn-success",onClick:o[4]||(o[4]=(...d)=>l.download&&l.download(...d))},"Download")])]),e.createElementVNode("div",fe,[e.createVNode(a,{"show-index":"","buttons-pagination":"","table-class-name":"customize-table","server-options":t.options,"onUpdate:server-options":o[5]||(o[5]=d=>t.options=d),"server-items-length":t.dataLength,loading:t.isLoading,headers:n.headers,items:t.items,ref:"vtable"},e.createSlots({_:2},[e.renderList(s.$slots,(d,p)=>({name:p,fn:e.withCtx(V=>[e.renderSlot(s.$slots,p,e.normalizeProps(e.guardReactiveProps(V||{})))])}))]),1032,["server-options","server-items-length","loading","headers","items"])])])])}const ye=u(me,[["render",ge]]);const ve={props:{url:String,headers:Array,title:String},components:{Vue3EasyDataTable:k},data(){return{options:{page:1,rowsPerPage:25},dataLength:0,isLoading:!1,items:[]}},mounted(){this.fetchData()},watch:{options:{handler(s){this.fetchData()},deep:!0}},methods:{async fetchData(){this.isLoading=!0,this.items=[];let s=await axios.get(this.url,{params:this.options}).then(o=>o.data);this.items=s.data,this.dataLength=s.meta.total,this.options.page=s.meta.current_page,this.options.rowsPerPage=s.meta.per_page,this.isLoading=!1}}},be={class:"report"},xe={class:"table-wrapper"},De={class:"toolbox"},Se={class:"title"},ke=e.createElementVNode("div",{class:"date-selected"},null,-1),we={class:"table-content"};function $e(s,o,n,r,t,l){const i=e.resolveComponent("Vue3EasyDataTable");return e.openBlock(),e.createElementBlock("div",be,[e.createElementVNode("div",xe,[e.createElementVNode("div",De,[e.createElementVNode("h2",Se,e.toDisplayString(n.title),1),ke]),e.createElementVNode("div",we,[e.createVNode(i,{"show-index":"","buttons-pagination":"","table-class-name":"customize-table","server-options":t.options,"onUpdate:server-options":o[0]||(o[0]=a=>t.options=a),"server-items-length":t.dataLength,loading:t.isLoading,headers:n.headers,items:t.items,ref:"vtable"},e.createSlots({_:2},[e.renderList(s.$slots,(a,d)=>({name:d,fn:e.withCtx(p=>[e.renderSlot(s.$slots,d,e.normalizeProps(e.guardReactiveProps(p||{})))])}))]),1032,["server-options","server-items-length","loading","headers","items"])])])])}const Ce=u(ve,[["render",$e]]),Ae={props:{topic:String},data(){return{message:null,options:{}}},created(){this.listen()},methods:{listen(){let s=x.exports.connect("ws://192.168.170.87:9001",this.options),o=this;s.on("connect",function(){s.subscribe(o.topic,function(n){n||(console.log("connected"),s.publish(o.topic,"Hello mqtt"))})}),s.on("message",function(n,r){console.log("topic",n),console.log(r.toString()),o.message=r})}}};function Be(s,o,n,r,t,l){return e.openBlock(),e.createElementBlock("div",null,e.toDisplayString(t.message),1)}const Fe=u(Ae,[["render",Be]]);const Te={props:{title:String,station:String,defaultData:{type:Array,default:()=>[]},columns:{type:Array,default:()=>[]},mqtt:{type:Object,default(){return{url:null,username:null,password:null,topic:null}}}},components:{CircleProgress:C,Dropdown:y},data(){return{items:this.defaultData,mqttConnection:null,score:0,total:0}},created(){this.mqttConnection=x.exports.connect(this.mqtt.url,{username:this.mqtt.username,password:this.mqtt.password})},mounted(){this.listen()},methods:{selected(s){this.items=s},listen(){if(this.mqttConnection){let s=this;this.mqttConnection.on("connect",function(){s.mqttConnection.subscribe(s.mqtt.topic,function(o){o||console.log("connected")})}),this.mqttConnection.on("message",this.received)}},received(s,o){let n=JSON.parse(o.toString());if(n.group==this.station){let r=this.items.length;this.total=n.data.count_record*r;let t=n.data,l=0;this.items.forEach(i=>{l=l+parseInt(t[i.data])}),this.score=parseInt(l/this.total*100)}}}},Ie={class:"card"},Le={class:"card-title"},Pe={class:"card-body"},Oe={class:"total"};function Ue(s,o,n,r,t,l){const i=e.resolveComponent("dropdown"),a=e.resolveComponent("circle-progress");return e.openBlock(),e.createElementBlock("div",Ie,[e.createElementVNode("div",Le,[e.createVNode(i,{type:"icon",class:"opsi",options:n.columns,onChecked:l.selected,default:n.defaultData},null,8,["options","onChecked","default"]),e.createTextVNode(" "+e.toDisplayString(n.title),1)]),e.createElementVNode("div",Pe,[e.createVNode(a,{percent:t.score,"show-percent":""},null,8,["percent"]),e.createElementVNode("div",Oe,[e.createTextVNode("Total Record "),e.createElementVNode("b",null,e.toDisplayString(t.total.toLocaleString()),1)])])])}const qe=u(Te,[["render",Ue]]),Me={props:{url:String,title:String,defaultData:{type:Array,default:()=>[]},columns:{type:Array,default:()=>[]}},components:{Datepicker:f,Dropdown:y},data(){return{items:this.defaultData,params:{from:new Date,to:new Date},data:[],realtime:{},fetchReady:!1,colors:v,options:{chart:{type:"line",zoomType:"x",height:600},time:{useUTC:!0},title:{text:this.title,style:{fontSize:"24px",fontWeight:"bold"}},xAxis:{type:"datetime",title:{text:""}},yAxis:[],tooltip:{pointFormat:"{series.name}: <b>{point.y:.2f} KWh</b><br/>",crosshairs:!0,shared:!0},legend:{enabled:!0},series:[]}}},mounted(){this.fetchData()},methods:{selected(s){this.items=s,this.fetchData()},async fetchData(){this.$refs.chart.chart.showLoading();let s=[],o=[],n=[];this.items.forEach((r,t)=>{let l=this.colors[t];o[t]={title:{text:this.textFormat(r.text),style:{color:l,fontSize:"16px"}},lineColor:l,labels:{style:{color:l},align:"left",x:14},lineWidth:1,opposite:!0},r.range&&(o[t].min=r.range[0],o[t].max=r.range[1]),s[t]={id:r.data,yAxis:t,type:r.type?r.type:"spline",name:this.textFormat(r.text),color:l,lineWidth:1,data:[]},n[t]=r.data}),this.options.series=s,this.options.yAxis=o,this.params.select=n,await axios.get(this.url,{params:this.params}).then(r=>{let t=r.data.data;for(const[l,i]of Object.entries(t)){let a=this.options.series.findIndex(d=>d.id==l);a>=0&&i.forEach(d=>{this.options.series[a].data.push([d.time*1e3,d.total/1e3])})}}),this.$refs.chart.chart.hideLoading()},textFormat(s){let o=s.toLowerCase().split(" ");for(let n=0;n<o.length;n++)o[n]=o[n][0].toUpperCase()+o[n].substr(1);return o.join(" ")}}},ze={class:"report"},je={class:"table-wrapper"},Ye={class:"toolbox"},Re={class:"date-selected"},We={class:"chart"};function He(s,o,n,r,t,l){const i=e.resolveComponent("dropdown"),a=e.resolveComponent("datepicker"),d=e.resolveComponent("highcharts");return e.openBlock(),e.createElementBlock("div",ze,[e.createElementVNode("div",je,[e.createElementVNode("div",Ye,[e.createVNode(i,{options:n.columns,onChecked:l.selected,default:n.defaultData},null,8,["options","onChecked","default"]),e.createElementVNode("div",Re,[e.createVNode(a,{class:"mr-2","enable-time-picker":!1,modelValue:t.params.from,"onUpdate:modelValue":o[0]||(o[0]=p=>t.params.from=p),name:"from",textInput:"",autoApply:"",closeOnAutoApply:!1,placeholder:"from"},null,8,["modelValue"]),e.createVNode(a,{class:"mr-2","enable-time-picker":!1,modelValue:t.params.to,"onUpdate:modelValue":o[1]||(o[1]=p=>t.params.to=p),name:"to",textInput:"",autoApply:"",closeOnAutoApply:!1,placeholder:"to"},null,8,["modelValue"]),e.createElementVNode("button",{class:"btn btn-primary",onClick:o[2]||(o[2]=(...p)=>l.fetchData&&l.fetchData(...p))},"Show")])]),e.createElementVNode("div",We,[e.createVNode(d,{ref:"chart",class:"hc",options:t.options},null,8,["options"])])])])}const Ke=u(Me,[["render",He]]),Je={props:{url:String,title:String,defaultData:{type:Array,default:()=>[]},columns:{type:Array,default:()=>[]}},components:{Datepicker:f,Dropdown:y},data(){return{items:this.defaultData,params:{from:new Date,to:new Date},data:[],realtime:{},fetchReady:!1,colors:v,options:{chart:{type:"column"},time:{useUTC:!0},title:{text:this.title,style:{fontSize:"24px",fontWeight:"bold"}},tooltip:{pointFormat:"{series.name}: <b>{point.y} %</b><br/>",crosshairs:!0},legend:{enabled:!0},xAxis:{crosshair:!0},yAxis:{min:0,max:100,title:{text:"Score Conformance (%)"}},series:[]}}},mounted(){this.fetchData()},methods:{selected(s){this.items=s,this.fetchData()},async fetchData(){this.$refs.chart.chart.showLoading();let s=[],o=[],n=this;await axios.get(this.url,{params:this.params}).then(r=>{let t=r.data.data,l=n.items.length;t.forEach(i=>{let a=g(i.date,"YYYY-MM-DD");s.push(a.format("ll"));let d=i.count_record*l,p=0;n.items.forEach(b=>{p=p+parseInt(i[b.data])});let V=parseInt(p/d*100);o.push(V)})}),this.options.xAxis.categories=s,this.options.series=[{name:this.title,data:o}],this.$refs.chart.chart.hideLoading()},textFormat(s){let o=s.toLowerCase().split(" ");for(let n=0;n<o.length;n++)o[n]=o[n][0].toUpperCase()+o[n].substr(1);return o.join(" ")}}},Qe={class:"report"},Ge={class:"table-wrapper"},Xe={class:"toolbox"},Ze={class:"date-selected"},et={class:"chart"};function tt(s,o,n,r,t,l){const i=e.resolveComponent("dropdown"),a=e.resolveComponent("datepicker"),d=e.resolveComponent("highcharts");return e.openBlock(),e.createElementBlock("div",Qe,[e.createElementVNode("div",Ge,[e.createElementVNode("div",Xe,[e.createVNode(i,{options:n.columns,onChecked:l.selected,default:n.defaultData},null,8,["options","onChecked","default"]),e.createElementVNode("div",Ze,[e.createVNode(a,{class:"mr-2","enable-time-picker":!1,modelValue:t.params.from,"onUpdate:modelValue":o[0]||(o[0]=p=>t.params.from=p),name:"from",textInput:"",autoApply:"",closeOnAutoApply:!1,placeholder:"from"},null,8,["modelValue"]),e.createVNode(a,{class:"mr-2","enable-time-picker":!1,modelValue:t.params.to,"onUpdate:modelValue":o[1]||(o[1]=p=>t.params.to=p),name:"to",textInput:"",autoApply:"",closeOnAutoApply:!1,placeholder:"to"},null,8,["modelValue"]),e.createElementVNode("button",{class:"btn btn-primary",onClick:o[2]||(o[2]=(...p)=>l.fetchData&&l.fetchData(...p))},"Show")])]),e.createElementVNode("div",et,[e.createVNode(d,{ref:"chart",class:"hc",options:t.options},null,8,["options"])])])])}const ot=u(Je,[["render",tt]]);const st={components:{Datepicker:f},props:{url:String,export:String,title:String},data(){return{params:{date:new Date},device:{name:null,size_fe:null,size_non_fe:null,size_ss:null},date:null,verifications:[],productions:[]}},methods:{async fetchData(){let s=await E.get(this.url,{params:this.params}).then(o=>o.data.data);this.device=s.startup.device,this.date=g(s.startup.started_at).format("DD MMMM YYYY"),this.productions=s.productions,this.verifications=s.startup.verifications},fTime(s){return g(s).format("HH:mm:ss")},download(){let s=this.export.split("?");const o=new URLSearchParams(s[1]);o.append("date",this.params.date.toISOString()),window.open(s[0]+"?"+o.toString(),"_blank")}}},_=s=>(e.pushScopeId("data-v-8c19b233"),s=s(),e.popScopeId(),s),nt={class:"report"},lt={class:"toolbox"},at={class:"title"},rt={class:"date-selected"},it={class:"row"},ct={class:"column"},dt={class:"table bordered"},mt=_(()=>e.createElementVNode("td",{class:"bg-grey"},"Metal Detector",-1)),pt={colspan:"3",class:"text-center"},ht=_(()=>e.createElementVNode("tr",{class:"bg-grey"},[e.createElementVNode("td",null,"Test Piece"),e.createElementVNode("td",null,"Fe"),e.createElementVNode("td",null,"Non Fe"),e.createElementVNode("td",null,"SS")],-1)),ut=_(()=>e.createElementVNode("td",{class:"bg-grey"},"Ukuran",-1)),_t=_(()=>e.createElementVNode("div",{class:"column"},null,-1)),Vt=_(()=>e.createElementVNode("div",{class:"column"},null,-1)),Et={class:"row date"},Nt={class:"column"},ft={class:"row"},gt={class:"column column-60"},yt={class:"table bordered"},vt=_(()=>e.createElementVNode("thead",null,[e.createElementVNode("tr",{class:"bg-grey"},[e.createElementVNode("td",{rowspan:"2"},"Jam"),e.createElementVNode("td",{rowspan:"2"},"Keterangan"),e.createElementVNode("td",{colspan:"3"},"Verifikasi"),e.createElementVNode("td",{colspan:"2"},"Dibuat Oleh"),e.createElementVNode("td",{colspan:"2"},"Divalidasi Oleh"),e.createElementVNode("td",{rowspan:"2"},"Tindakan koreksi jika MD Error (input no. wor)")]),e.createElementVNode("tr",{class:"bg-grey"},[e.createElementVNode("td",null,"Fe"),e.createElementVNode("td",null,"Non Fe"),e.createElementVNode("td",null,"SS"),e.createElementVNode("td",null,"Nama Operator"),e.createElementVNode("td",null,"Paraf"),e.createElementVNode("td",null,"Nama Foreman"),e.createElementVNode("td",null,"Paraf")])],-1)),bt={class:"text-center"},xt={class:"text-center"},Dt={class:"text-center"},St=_(()=>e.createElementVNode("td",null,null,-1)),kt=_(()=>e.createElementVNode("td",null,null,-1)),wt=_(()=>e.createElementVNode("tr",null,[e.createElementVNode("td",null,"\xA0"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td")],-1)),$t={class:"row"},Ct={class:"column"},At={class:"table bordered"},Bt=_(()=>e.createElementVNode("thead",null,[e.createElementVNode("tr",{class:"bg-grey"},[e.createElementVNode("td",{rowspan:"3"},"No"),e.createElementVNode("td",{rowspan:"3"},"Jam"),e.createElementVNode("td",{rowspan:"3"},"Nama Produk"),e.createElementVNode("td",{rowspan:"3"},"BN"),e.createElementVNode("td",{rowspan:"3"},"Satuan Kemasan"),e.createElementVNode("td",{rowspan:"3"},"Verifikasi"),e.createElementVNode("td",{colspan:"9"},"Kondisi Sensitif Produk"),e.createElementVNode("td",{rowspan:"3"},"Jumlah Produk OK (pcs)"),e.createElementVNode("td",{rowspan:"3"},"Jumlah Produk Non OK (pcs)"),e.createElementVNode("td",{colspan:"2"},"Dibuat Oleh"),e.createElementVNode("td",{colspan:"2"},"Divalidasi Oleh"),e.createElementVNode("td",{rowspan:"3"},"Tindakan Koreksi untuk Produk Not OK")]),e.createElementVNode("tr",{class:"bg-grey"},[e.createElementVNode("td",{colspan:"3"},"Fe"),e.createElementVNode("td",{colspan:"3"},"Non Fe"),e.createElementVNode("td",{colspan:"3"},"SS"),e.createElementVNode("td",{rowspan:"2"},"Nama Operator"),e.createElementVNode("td",{rowspan:"2"},"Paraf"),e.createElementVNode("td",{rowspan:"2"},"Nama Foreman"),e.createElementVNode("td",{rowspan:"2"},"Paraf")]),e.createElementVNode("tr",{class:"bg-grey"},[e.createElementVNode("td",null,"Ujung Depan"),e.createElementVNode("td",null,"Tengah"),e.createElementVNode("td",null,"Ujung Belakang"),e.createElementVNode("td",null,"Ujung Depan"),e.createElementVNode("td",null,"Tengah"),e.createElementVNode("td",null,"Ujung Belakang"),e.createElementVNode("td",null,"Ujung Depan"),e.createElementVNode("td",null,"Tengah"),e.createElementVNode("td",null,"Ujung Belakang")])],-1)),Ft=_(()=>e.createElementVNode("td",null,null,-1)),Tt={class:"text-center"},It={class:"text-center"},Lt={class:"text-center"},Pt={class:"text-center"},Ot={class:"text-center"},Ut={class:"text-center"},qt={class:"text-center"},Mt={class:"text-center"},zt={class:"text-center"},jt=_(()=>e.createElementVNode("td",null,null,-1)),Yt=_(()=>e.createElementVNode("td",null,null,-1)),Rt=_(()=>e.createElementVNode("tr",null,[e.createElementVNode("td",null,"\xA0"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td")],-1));function Wt(s,o,n,r,t,l){const i=e.resolveComponent("datepicker");return e.openBlock(),e.createElementBlock("div",nt,[e.createElementVNode("div",lt,[e.createElementVNode("h2",at,e.toDisplayString(n.title),1),e.createElementVNode("div",rt,[e.createVNode(i,{"enable-time-picker":!1,class:"mr-2",modelValue:t.params.date,"onUpdate:modelValue":o[0]||(o[0]=a=>t.params.date=a),name:"date",textInput:"",autoApply:"",closeOnAutoApply:!1,placeholder:"date"},null,8,["modelValue"]),e.createElementVNode("button",{class:"btn btn-primary mr-2",onClick:o[1]||(o[1]=(...a)=>l.fetchData&&l.fetchData(...a))},"Show"),e.createElementVNode("button",{class:"btn btn-success",onClick:o[2]||(o[2]=(...a)=>l.download&&l.download(...a))},"Download")])]),e.createElementVNode("div",it,[e.createElementVNode("div",ct,[e.createElementVNode("table",dt,[e.createElementVNode("tbody",null,[e.createElementVNode("tr",null,[mt,e.createElementVNode("td",pt,e.toDisplayString(t.device.name),1)]),ht,e.createElementVNode("tr",null,[ut,e.createElementVNode("td",null,e.toDisplayString(t.device.size_fe),1),e.createElementVNode("td",null,e.toDisplayString(t.device.size_non_fe),1),e.createElementVNode("td",null,e.toDisplayString(t.device.size_ss),1)])])])]),_t,Vt]),e.createElementVNode("div",Et,[e.createElementVNode("div",Nt," Tanggal : "+e.toDisplayString(t.date),1)]),e.createElementVNode("div",ft,[e.createElementVNode("div",gt,[e.createElementVNode("table",yt,[vt,e.createElementVNode("tbody",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.verifications,a=>(e.openBlock(),e.createElementBlock("tr",{key:a.id},[e.createElementVNode("td",null,e.toDisplayString(a.started_at),1),e.createElementVNode("td",null,e.toDisplayString(a.type_text),1),e.createElementVNode("td",bt,e.toDisplayString(a.fe?"\u2714":""),1),e.createElementVNode("td",xt,e.toDisplayString(a.non_fe?"\u2714":""),1),e.createElementVNode("td",Dt,e.toDisplayString(a.ss?"\u2714":""),1),e.createElementVNode("td",null,e.toDisplayString(a.operator?a.operator.name:""),1),St,e.createElementVNode("td",null,e.toDisplayString(a.foreman?a.foreman.name:""),1),kt,e.createElementVNode("td",null,e.toDisplayString(a.wor_number),1)]))),128)),wt])])])]),e.createElementVNode("div",$t,[e.createElementVNode("div",Ct,[e.createElementVNode("table",At,[Bt,e.createElementVNode("tbody",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.productions,a=>(e.openBlock(),e.createElementBlock("tr",{key:a.id},[Ft,e.createElementVNode("td",null,e.toDisplayString(`${l.fTime(a.started_at)} - ${l.fTime(a.finished_at)}`),1),e.createElementVNode("td",null,e.toDisplayString(a.production.product.name),1),e.createElementVNode("td",null,e.toDisplayString(a.production.batch_no),1),e.createElementVNode("td",null,e.toDisplayString(a.production.product.unit),1),e.createElementVNode("td",null,e.toDisplayString(a.order_text),1),e.createElementVNode("td",Tt,e.toDisplayString(a.fe_front?"\u2714":""),1),e.createElementVNode("td",It,e.toDisplayString(a.fe_mid?"\u2714":""),1),e.createElementVNode("td",Lt,e.toDisplayString(a.fe_end?"\u2714":""),1),e.createElementVNode("td",Pt,e.toDisplayString(a.non_fe_front?"\u2714":""),1),e.createElementVNode("td",Ot,e.toDisplayString(a.non_fe_mid?"\u2714":""),1),e.createElementVNode("td",Ut,e.toDisplayString(a.non_fe_end?"\u2714":""),1),e.createElementVNode("td",qt,e.toDisplayString(a.ss_front?"\u2714":""),1),e.createElementVNode("td",Mt,e.toDisplayString(a.ss_mid?"\u2714":""),1),e.createElementVNode("td",zt,e.toDisplayString(a.ss_end?"\u2714":""),1),e.createElementVNode("td",null,e.toDisplayString(a.good_records_count),1),e.createElementVNode("td",null,e.toDisplayString(a.ng_records_count),1),e.createElementVNode("td",null,e.toDisplayString(a.operator?a.operator.name:""),1),jt,e.createElementVNode("td",null,e.toDisplayString(a.foreman?a.foreman.name:""),1),Yt,e.createElementVNode("td",null,e.toDisplayString(a.remark),1)]))),128)),Rt])])])])])}const Ht=u(st,[["render",Wt],["__scopeId","data-v-8c19b233"]]),Kt={props:{timesheets:Array},data(){return{colors:{run:"rgb(15, 153, 96)",idle:"rgb(217, 130, 43)",breakdown:"rgb(219, 55, 55)"},options:{chart:{type:"xrange",zoomType:"x",height:200},title:{text:"Timeline",align:"left"},time:{useUTC:!1},xAxis:{type:"datetime"},yAxis:{visible:!1},plotOptions:{xrange:{borderRadius:0}},tooltip:{enabled:!1},series:[{showInLegend:!1,borderColor:"none",pointWidth:40,dataLabels:{shadow:!1,align:"left",enabled:!0,verticalAlign:"middle"},data:[]}]}}},watch:{timesheets:function(s,o){let n=this;this.options.series[0].data=[],s.forEach(function(r){n.options.series[0].data.push({x:Date.parse(r.started_at),x2:Date.parse(r.ended_at),y:0,color:n.colors[r.status],dataLabels:[{format:r.status}]})})}}};function Jt(s,o,n,r,t,l){const i=e.resolveComponent("highcharts");return e.openBlock(),e.createElementBlock("div",null,[e.createVNode(i,{ref:"chart",options:t.options},null,8,["options"])])}const S=u(Kt,[["render",Jt]]);const Qt={components:{VeProgress:w.exports.VeProgress,Datepicker:f,Timesheets:S},props:{title:String,isSupervisor:Boolean,settingShowed:Boolean,url:String,saveUrl:String},data(){return{params:{date:new Date},oee:{oee:0,availability:0,performance:0,quality:0,timesheets:[]}}},created(){this.fetchData()},mounted(){let s=this;setInterval(async function(){s.fetchData()},1e3*5)},methods:{async fetchData(){this.params.date=g(this.params.date).format("YYYY-MM-DD");let s=await E.get(this.url,{params:this.params}).then(o=>o.data.data);s&&(this.oee=s)},async save(){this.variable.date=this.params.date,await E.post(this.saveUrl,this.variable),this.fetchData()}}},c=s=>(e.pushScopeId("data-v-59d127c3"),s=s(),e.popScopeId(),s),Gt={class:"toolbox"},Xt={class:"title"},Zt={class:"date-selected"},eo={class:"row"},to={class:"column column-8"},oo={class:"row"},so={class:"column column-12"},no={class:"card"},lo=c(()=>e.createElementVNode("div",{class:"card-title"}," OEE Score ",-1)),ao={class:"card-body"},ro=c(()=>e.createElementVNode("span",null,"%",-1)),io={class:"row"},co={class:"column column-4"},mo={class:"card"},po=c(()=>e.createElementVNode("div",{class:"card-title"}," Availability ",-1)),ho={class:"card-body"},uo=c(()=>e.createElementVNode("span",null,"%",-1)),_o={class:"column column-4"},Vo={class:"card"},Eo=c(()=>e.createElementVNode("div",{class:"card-title"}," Performance ",-1)),No={class:"card-body"},fo=c(()=>e.createElementVNode("span",null,"%",-1)),go={class:"column column-4"},yo={class:"card"},vo=c(()=>e.createElementVNode("div",{class:"card-title"}," Quality ",-1)),bo={class:"card-body"},xo=c(()=>e.createElementVNode("span",null,"%",-1)),Do={key:0,class:"column column-4"},So={key:0,class:"table"},ko=c(()=>e.createElementVNode("thead",null,[e.createElementVNode("tr",null,[e.createElementVNode("th",null,"AVAILABILITY"),e.createElementVNode("th"),e.createElementVNode("th"),e.createElementVNode("th",{class:"text-right"},"Time (hour)")])],-1)),wo=c(()=>e.createElementVNode("td",null,"Total Available Time",-1)),$o=c(()=>e.createElementVNode("td",null,null,-1)),Co=c(()=>e.createElementVNode("td",null,null,-1)),Ao={class:"text-right"},Bo=c(()=>e.createElementVNode("td",null,"Current Running Time ",-1)),Fo=c(()=>e.createElementVNode("td",null,null,-1)),To={class:"text-right"},Io=c(()=>e.createElementVNode("td",null,"Downtime Loss",-1)),Lo=c(()=>e.createElementVNode("td",null,"(sum by alarm sensor)",-1)),Po=c(()=>e.createElementVNode("td",null,null,-1)),Oo={class:"text-right"},Uo=c(()=>e.createElementVNode("td",null,"Idle Time",-1)),qo=c(()=>e.createElementVNode("td",null,null,-1)),Mo=c(()=>e.createElementVNode("td",null,null,-1)),zo={class:"text-right"},jo=c(()=>e.createElementVNode("td",null,"Effective operating time",-1)),Yo=c(()=>e.createElementVNode("td",null,null,-1)),Ro=c(()=>e.createElementVNode("td",null,null,-1)),Wo={class:"text-right"},Ho=c(()=>e.createElementVNode("tr",{class:"title"},[e.createElementVNode("th",{colspan:"3"},"PERFORMANCE"),e.createElementVNode("th",{class:"text-right"})],-1)),Ko=c(()=>e.createElementVNode("td",null,"Speed LME Mill Performance",-1)),Jo=c(()=>e.createElementVNode("td",null,"(%)",-1)),Qo=c(()=>e.createElementVNode("td",null,null,-1)),Go={class:"text-right"},Xo=c(()=>e.createElementVNode("td",null,"Speed LME Mill SV",-1)),Zo=c(()=>e.createElementVNode("td",null,"(rpm)",-1)),es=c(()=>e.createElementVNode("td",null,null,-1)),ts={class:"text-right"},os=c(()=>e.createElementVNode("td",null,"Speed LME Mill PV",-1)),ss=c(()=>e.createElementVNode("td",null,"(rpm)",-1)),ns=c(()=>e.createElementVNode("td",null,null,-1)),ls={class:"text-right"},as=c(()=>e.createElementVNode("td",null,"Speed Feed Pump Performance",-1)),rs=c(()=>e.createElementVNode("td",null,"(%)",-1)),is=c(()=>e.createElementVNode("td",null,null,-1)),cs={class:"text-right"},ds=c(()=>e.createElementVNode("td",null,"Speed Feed Pump SV",-1)),ms=c(()=>e.createElementVNode("td",null,"(rpm)",-1)),ps=c(()=>e.createElementVNode("td",null,null,-1)),hs={class:"text-right"},us=c(()=>e.createElementVNode("td",null,"Speed Feed Pump PV",-1)),_s=c(()=>e.createElementVNode("td",null,"(rpm)",-1)),Vs=c(()=>e.createElementVNode("td",null,null,-1)),Es={class:"text-right"},Ns=c(()=>e.createElementVNode("tr",{class:"title"},[e.createElementVNode("th",{colspan:"3"},"QUALITY"),e.createElementVNode("th",{class:"text-right"},"Units")],-1)),fs=c(()=>e.createElementVNode("td",null,"Total Production",-1)),gs=c(()=>e.createElementVNode("td",null,null,-1)),ys=c(()=>e.createElementVNode("td",null,null,-1)),vs={class:"text-right"},bs=c(()=>e.createElementVNode("td",null,"Good Production",-1)),xs=c(()=>e.createElementVNode("td",null,null,-1)),Ds=c(()=>e.createElementVNode("td",null,null,-1)),Ss={class:"text-right"},ks=c(()=>e.createElementVNode("td",null,"Production Reject",-1)),ws=c(()=>e.createElementVNode("td",null,null,-1)),$s=c(()=>e.createElementVNode("td",null,null,-1)),Cs={class:"text-right"},As=c(()=>e.createElementVNode("tr",{class:"title"},[e.createElementVNode("th",{colspan:"3"},"OEE Factors"),e.createElementVNode("th",{class:"text-right"},"Factor %")],-1)),Bs=c(()=>e.createElementVNode("td",null,"Availability",-1)),Fs=c(()=>e.createElementVNode("td",null,null,-1)),Ts=c(()=>e.createElementVNode("td",null,null,-1)),Is={class:"text-right"},Ls=c(()=>e.createElementVNode("td",null,"Performance",-1)),Ps=c(()=>e.createElementVNode("td",null,null,-1)),Os=c(()=>e.createElementVNode("td",null,null,-1)),Us={class:"text-right"},qs=c(()=>e.createElementVNode("td",null,"Quality",-1)),Ms=c(()=>e.createElementVNode("td",null,null,-1)),zs=c(()=>e.createElementVNode("td",null,null,-1)),js={class:"text-right"},Ys=c(()=>e.createElementVNode("th",null,"OEE",-1)),Rs=c(()=>e.createElementVNode("th",null,null,-1)),Ws=c(()=>e.createElementVNode("th",null,null,-1)),Hs={class:"text-right"},Ks={class:"row"},Js={class:"column column-12"};function Qs(s,o,n,r,t,l){const i=e.resolveComponent("datepicker"),a=e.resolveComponent("ve-progress"),d=e.resolveComponent("timesheets");return e.openBlock(),e.createElementBlock("div",null,[e.createElementVNode("div",Gt,[e.createElementVNode("h2",Xt,e.toDisplayString(n.title),1),e.createElementVNode("div",Zt,[e.createVNode(i,{"enable-time-picker":!1,utc:"",class:"mr-2",modelValue:t.params.date,"onUpdate:modelValue":o[0]||(o[0]=p=>t.params.date=p),name:"date",textInput:"",autoApply:"",closeOnAutoApply:!1,placeholder:"date"},null,8,["modelValue"]),e.createElementVNode("button",{class:"btn btn-primary mr-2",onClick:o[1]||(o[1]=(...p)=>l.fetchData&&l.fetchData(...p))},"Show")])]),e.createElementVNode("div",eo,[e.createElementVNode("div",to,[e.createElementVNode("div",oo,[e.createElementVNode("div",so,[e.createElementVNode("div",no,[lo,e.createElementVNode("div",ao,[e.createVNode(a,{progress:parseFloat(t.oee.oee.toFixed(2))*100,thickness:30,size:250,color:"#1aadce","empty-thickness":"10%","font-size":"40px"},{legend:e.withCtx(()=>[ro]),_:1},8,["progress"])])])])]),e.createElementVNode("div",io,[e.createElementVNode("div",co,[e.createElementVNode("div",mo,[po,e.createElementVNode("div",ho,[e.createVNode(a,{progress:parseFloat((t.oee.availability*100).toFixed(2)),color:"#e4d354",thickness:20,size:150,"empty-thickness":"10%","font-size":"22px"},{legend:e.withCtx(()=>[uo]),_:1},8,["progress"])])])]),e.createElementVNode("div",_o,[e.createElementVNode("div",Vo,[Eo,e.createElementVNode("div",No,[e.createVNode(a,{progress:parseFloat((t.oee.performance*100).toFixed(2)),color:"#8085e9",thickness:20,size:150,"empty-thickness":"10%","font-size":"22px"},{legend:e.withCtx(()=>[fo]),_:1},8,["progress"])])])]),e.createElementVNode("div",go,[e.createElementVNode("div",yo,[vo,e.createElementVNode("div",bo,[e.createVNode(a,{progress:parseFloat((t.oee.quality*100).toFixed(2)),color:"#f45b5b",thickness:20,size:150,"empty-thickness":"10%","font-size":"22px"},{legend:e.withCtx(()=>[xo]),_:1},8,["progress"])])])])])]),n.settingShowed?(e.openBlock(),e.createElementBlock("div",Do,[t.oee?(e.openBlock(),e.createElementBlock("table",So,[ko,e.createElementVNode("tbody",null,[e.createElementVNode("tr",null,[wo,$o,Co,e.createElementVNode("td",Ao,e.toDisplayString(t.oee.avail_duration),1)]),e.createElementVNode("tr",null,[Bo,e.createElementVNode("td",null,"( start from "+e.toDisplayString(t.oee.started_at)+" )",1),Fo,e.createElementVNode("td",To,e.toDisplayString(t.oee.running),1)]),e.createElementVNode("tr",null,[Io,Lo,Po,e.createElementVNode("td",Oo,e.toDisplayString(t.oee.down_duration),1)]),e.createElementVNode("tr",null,[Uo,qo,Mo,e.createElementVNode("td",zo,e.toDisplayString(t.oee.stop_duration),1)]),e.createElementVNode("tr",null,[jo,Yo,Ro,e.createElementVNode("td",Wo,e.toDisplayString(t.oee.run_duration),1)]),Ho,e.createElementVNode("tr",null,[Ko,Jo,Qo,e.createElementVNode("td",Go,e.toDisplayString((t.oee.ppm*100).toFixed(2)),1)]),e.createElementVNode("tr",null,[Xo,Zo,es,e.createElementVNode("td",ts,e.toDisplayString(t.oee.ppm_sv?t.oee.ppm_sv.toFixed(2):0),1)]),e.createElementVNode("tr",null,[os,ss,ns,e.createElementVNode("td",ls,e.toDisplayString(t.oee.ppm_pv?t.oee.ppm_pv.toFixed(2):0),1)]),e.createElementVNode("tr",null,[as,rs,is,e.createElementVNode("td",cs,e.toDisplayString((t.oee.ppm2*100).toFixed(2)),1)]),e.createElementVNode("tr",null,[ds,ms,ps,e.createElementVNode("td",hs,e.toDisplayString(t.oee.ppm2_sv?t.oee.ppm2_sv.toFixed(2):0),1)]),e.createElementVNode("tr",null,[us,_s,Vs,e.createElementVNode("td",Es,e.toDisplayString(t.oee.ppm2_pv?t.oee.ppm2_pv.toFixed(2):0),1)]),Ns,e.createElementVNode("tr",null,[fs,gs,ys,e.createElementVNode("td",vs,e.toDisplayString(t.oee.reject_qty+t.oee.output_qty),1)]),e.createElementVNode("tr",null,[bs,xs,Ds,e.createElementVNode("td",Ss,e.toDisplayString(t.oee.output_qty),1)]),e.createElementVNode("tr",null,[ks,ws,$s,e.createElementVNode("td",Cs,e.toDisplayString(t.oee.reject_qty),1)]),As,e.createElementVNode("tr",null,[Bs,Fs,Ts,e.createElementVNode("td",Is,e.toDisplayString((t.oee.availability*100).toFixed(2)),1)]),e.createElementVNode("tr",null,[Ls,Ps,Os,e.createElementVNode("td",Us,e.toDisplayString((t.oee.performance*100).toFixed(2)),1)]),e.createElementVNode("tr",null,[qs,Ms,zs,e.createElementVNode("td",js,e.toDisplayString((t.oee.quality*100).toFixed(2)),1)])]),e.createElementVNode("tfoot",null,[e.createElementVNode("tr",null,[Ys,Rs,Ws,e.createElementVNode("th",Hs,e.toDisplayString((t.oee.oee*100).toFixed(2)),1)])])])):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0)]),e.createElementVNode("div",Ks,[e.createElementVNode("div",Js,[e.createVNode(d,{timesheets:t.oee.timesheets},null,8,["timesheets"])])])])}const Gs=u(Qt,[["render",Qs],["__scopeId","data-v-59d127c3"]]);const Xs={components:{VeProgress:w.exports.VeProgress,Datepicker:f,Timesheets:S},props:{title:String,isSupervisor:Boolean,settingShowed:Boolean,url:String,saveUrl:String},data(){return{params:{date:new Date,shift_id:1},oee:{oee:0,availability:0,performance:0,quality:0,timesheets:[]}}},created(){this.fetchData()},mounted(){let s=this;setInterval(async function(){s.fetchData()},1e3*5)},methods:{async fetchData(){this.params.date=g(this.params.date).format("YYYY-MM-DD");let s=await E.get(this.url,{params:this.params}).then(o=>o.data);s&&(this.oee=s.data,this.params.shift_id=s.meta.current_shift.id?s.meta.current_shift.id:1)},async save(){this.variable.date=this.params.date,await E.post(this.saveUrl,this.variable),this.fetchData()}}},m=s=>(e.pushScopeId("data-v-3984a9c4"),s=s(),e.popScopeId(),s),Zs={class:"toolbox"},en={class:"title"},tn={class:"date-selected"},on=m(()=>e.createElementVNode("option",{value:"1"},"Shift 1",-1)),sn=m(()=>e.createElementVNode("option",{value:"2"},"Shift 2",-1)),nn=m(()=>e.createElementVNode("option",{value:"3"},"Shift 3",-1)),ln=[on,sn,nn],an={class:"row"},rn={class:"column column-8"},cn={class:"row"},dn={class:"column column-12"},mn={class:"card"},pn=m(()=>e.createElementVNode("div",{class:"card-title"}," OEE Score ",-1)),hn={class:"card-body"},un=m(()=>e.createElementVNode("span",null,"%",-1)),_n={class:"row"},Vn={class:"column column-4"},En={class:"card"},Nn=m(()=>e.createElementVNode("div",{class:"card-title"}," Availability ",-1)),fn={class:"card-body"},gn=m(()=>e.createElementVNode("span",null,"%",-1)),yn={class:"column column-4"},vn={class:"card"},bn=m(()=>e.createElementVNode("div",{class:"card-title"}," Performance ",-1)),xn={class:"card-body"},Dn=m(()=>e.createElementVNode("span",null,"%",-1)),Sn={class:"column column-4"},kn={class:"card"},wn=m(()=>e.createElementVNode("div",{class:"card-title"}," Quality ",-1)),$n={class:"card-body"},Cn=m(()=>e.createElementVNode("span",null,"%",-1)),An={key:0,class:"column column-4"},Bn={class:"table"},Fn=m(()=>e.createElementVNode("thead",null,[e.createElementVNode("tr",null,[e.createElementVNode("th",null,"AVAILABILITY"),e.createElementVNode("th"),e.createElementVNode("th"),e.createElementVNode("th",{class:"text-right"},"Time (hour)")])],-1)),Tn=m(()=>e.createElementVNode("td",null,"Total Available Time",-1)),In=m(()=>e.createElementVNode("td",null,null,-1)),Ln=m(()=>e.createElementVNode("td",null,null,-1)),Pn={class:"text-right"},On=m(()=>e.createElementVNode("td",null,"Current Running Time ",-1)),Un=m(()=>e.createElementVNode("td",null,null,-1)),qn={class:"text-right"},Mn=m(()=>e.createElementVNode("td",null,"Downtime Loss",-1)),zn=m(()=>e.createElementVNode("td",null,"(sum by alarm sensor)",-1)),jn=m(()=>e.createElementVNode("td",null,null,-1)),Yn={class:"text-right"},Rn=m(()=>e.createElementVNode("td",null,"Idle Time",-1)),Wn=m(()=>e.createElementVNode("td",null,null,-1)),Hn=m(()=>e.createElementVNode("td",null,null,-1)),Kn={class:"text-right"},Jn=m(()=>e.createElementVNode("td",null,"Effective operating time",-1)),Qn=m(()=>e.createElementVNode("td",null,null,-1)),Gn=m(()=>e.createElementVNode("td",null,null,-1)),Xn={class:"text-right"},Zn=m(()=>e.createElementVNode("tr",{class:"title"},[e.createElementVNode("th",{colspan:"3"},"PERFORMANCE"),e.createElementVNode("th",{class:"text-right"},"Seconds")],-1)),el=m(()=>e.createElementVNode("td",null,"Ideal Cycle Time",-1)),tl=m(()=>e.createElementVNode("td",null,null,-1)),ol=m(()=>e.createElementVNode("td",null,null,-1)),sl={class:"text-right"},nl=m(()=>e.createElementVNode("td",null,"Actual Cycle Time",-1)),ll=m(()=>e.createElementVNode("td",null,null,-1)),al=m(()=>e.createElementVNode("td",null,null,-1)),rl={class:"text-right"},il=m(()=>e.createElementVNode("tr",{class:"title"},[e.createElementVNode("th",{colspan:"3"},"QUALITY"),e.createElementVNode("th",{class:"text-right"},"Units")],-1)),cl=m(()=>e.createElementVNode("td",null,"Total Production",-1)),dl=m(()=>e.createElementVNode("td",null,null,-1)),ml=m(()=>e.createElementVNode("td",null,null,-1)),pl={class:"text-right"},hl=m(()=>e.createElementVNode("td",null,"Good Production",-1)),ul=m(()=>e.createElementVNode("td",null,null,-1)),_l=m(()=>e.createElementVNode("td",null,null,-1)),Vl={class:"text-right"},El=m(()=>e.createElementVNode("td",null,"Production Reject",-1)),Nl=m(()=>e.createElementVNode("td",null,null,-1)),fl=m(()=>e.createElementVNode("td",null,null,-1)),gl={class:"text-right"},yl=m(()=>e.createElementVNode("tr",{class:"title"},[e.createElementVNode("th",{colspan:"3"},"OEE Factors"),e.createElementVNode("th",{class:"text-right"},"Factor %")],-1)),vl=m(()=>e.createElementVNode("td",null,"Availability",-1)),bl=m(()=>e.createElementVNode("td",null,null,-1)),xl=m(()=>e.createElementVNode("td",null,null,-1)),Dl={class:"text-right"},Sl=m(()=>e.createElementVNode("td",null,"Performance",-1)),kl=m(()=>e.createElementVNode("td",null,null,-1)),wl=m(()=>e.createElementVNode("td",null,null,-1)),$l={class:"text-right"},Cl=m(()=>e.createElementVNode("td",null,"Quality",-1)),Al=m(()=>e.createElementVNode("td",null,null,-1)),Bl=m(()=>e.createElementVNode("td",null,null,-1)),Fl={class:"text-right"},Tl=m(()=>e.createElementVNode("th",null,"OEE",-1)),Il=m(()=>e.createElementVNode("th",null,null,-1)),Ll=m(()=>e.createElementVNode("th",null,null,-1)),Pl={class:"text-right"},Ol={class:"row"},Ul={class:"column column-12"};function ql(s,o,n,r,t,l){const i=e.resolveComponent("datepicker"),a=e.resolveComponent("ve-progress"),d=e.resolveComponent("timesheets");return e.openBlock(),e.createElementBlock("div",null,[e.createElementVNode("div",Zs,[e.createElementVNode("h2",en,e.toDisplayString(n.title),1),e.createElementVNode("div",tn,[e.createVNode(i,{"enable-time-picker":!1,utc:"",class:"mr-2",modelValue:t.params.date,"onUpdate:modelValue":o[0]||(o[0]=p=>t.params.date=p),name:"date",textInput:"",autoApply:"",closeOnAutoApply:!1,placeholder:"date"},null,8,["modelValue"]),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":o[1]||(o[1]=p=>t.params.shift_id=p),name:"shift",id:"#",class:"form-control wd-120 mr-2"},ln,512),[[e.vModelSelect,t.params.shift_id]]),e.createElementVNode("button",{class:"btn btn-primary mr-2",onClick:o[2]||(o[2]=(...p)=>l.fetchData&&l.fetchData(...p))},"Show")])]),e.createElementVNode("div",an,[e.createElementVNode("div",rn,[e.createElementVNode("div",cn,[e.createElementVNode("div",dn,[e.createElementVNode("div",mn,[pn,e.createElementVNode("div",hn,[e.createVNode(a,{progress:parseFloat(t.oee.oee*100).toFixed(2),thickness:30,size:250,color:"#1aadce","empty-thickness":"10%","font-size":"40px"},{legend:e.withCtx(()=>[un]),_:1},8,["progress"])])])])]),e.createElementVNode("div",_n,[e.createElementVNode("div",Vn,[e.createElementVNode("div",En,[Nn,e.createElementVNode("div",fn,[e.createVNode(a,{progress:parseFloat((t.oee.availability*100).toFixed(2)),color:"#e4d354",thickness:20,size:150,"empty-thickness":"10%","font-size":"22px"},{legend:e.withCtx(()=>[gn]),_:1},8,["progress"])])])]),e.createElementVNode("div",yn,[e.createElementVNode("div",vn,[bn,e.createElementVNode("div",xn,[e.createVNode(a,{progress:parseFloat((t.oee.performance*100).toFixed(2)),color:"#8085e9",thickness:20,size:150,"empty-thickness":"10%","font-size":"22px"},{legend:e.withCtx(()=>[Dn]),_:1},8,["progress"])])])]),e.createElementVNode("div",Sn,[e.createElementVNode("div",kn,[wn,e.createElementVNode("div",$n,[e.createVNode(a,{progress:parseFloat((t.oee.quality*100).toFixed(2)),color:"#f45b5b",thickness:20,size:150,"empty-thickness":"10%","font-size":"22px"},{legend:e.withCtx(()=>[Cn]),_:1},8,["progress"])])])])])]),n.settingShowed?(e.openBlock(),e.createElementBlock("div",An,[e.createElementVNode("table",Bn,[Fn,e.createElementVNode("tbody",null,[e.createElementVNode("tr",null,[Tn,In,Ln,e.createElementVNode("td",Pn,e.toDisplayString(t.oee.avail_duration),1)]),e.createElementVNode("tr",null,[On,e.createElementVNode("td",null,"( start from "+e.toDisplayString(t.oee.started_at)+" )",1),Un,e.createElementVNode("td",qn,e.toDisplayString(t.oee.running),1)]),e.createElementVNode("tr",null,[Mn,zn,jn,e.createElementVNode("td",Yn,e.toDisplayString(t.oee.down_duration),1)]),e.createElementVNode("tr",null,[Rn,Wn,Hn,e.createElementVNode("td",Kn,e.toDisplayString(t.oee.stop_duration),1)]),e.createElementVNode("tr",null,[Jn,Qn,Gn,e.createElementVNode("td",Xn,e.toDisplayString(t.oee.run_duration),1)]),Zn,e.createElementVNode("tr",null,[el,tl,ol,e.createElementVNode("td",sl,e.toDisplayString(t.oee.ppm),1)]),e.createElementVNode("tr",null,[nl,ll,al,e.createElementVNode("td",rl,e.toDisplayString(t.oee.ppm2),1)]),il,e.createElementVNode("tr",null,[cl,dl,ml,e.createElementVNode("td",pl,e.toDisplayString(t.oee.reject_qty+t.oee.output_qty),1)]),e.createElementVNode("tr",null,[hl,ul,_l,e.createElementVNode("td",Vl,e.toDisplayString(t.oee.output_qty),1)]),e.createElementVNode("tr",null,[El,Nl,fl,e.createElementVNode("td",gl,e.toDisplayString(t.oee.reject_qty),1)]),yl,e.createElementVNode("tr",null,[vl,bl,xl,e.createElementVNode("td",Dl,e.toDisplayString((t.oee.availability*100).toFixed(2)),1)]),e.createElementVNode("tr",null,[Sl,kl,wl,e.createElementVNode("td",$l,e.toDisplayString((t.oee.performance*100).toFixed(2)),1)]),e.createElementVNode("tr",null,[Cl,Al,Bl,e.createElementVNode("td",Fl,e.toDisplayString((t.oee.quality*100).toFixed(2)),1)])]),e.createElementVNode("tfoot",null,[e.createElementVNode("tr",null,[Tl,Il,Ll,e.createElementVNode("th",Pl,e.toDisplayString((t.oee.oee*100).toFixed(2)),1)])])])])):e.createCommentVNode("",!0)]),e.createElementVNode("div",Ol,[e.createElementVNode("div",Ul,[e.createVNode(d,{timesheets:t.oee.timesheets},null,8,["timesheets"])])])])}const Ml=u(Xs,[["render",ql],["__scopeId","data-v-3984a9c4"]]),zl={components:{Datepicker:f},props:{url:String,title:String},data(){return{params:{date:{month:new Date().getMonth(),year:new Date().getFullYear()}},options:{chart:{type:"bar"},title:{text:this.title,align:"left"},xAxis:{categories:[],title:{text:null},gridLineWidth:1,lineWidth:0},yAxis:{min:0,title:{text:"Duration (hours)",align:"high"},labels:{overflow:"justify"},gridLineWidth:0},tooltip:{valueSuffix:" Hours"},series:[{name:"High Losses",data:[]}]}}},mounted(){this.fetchData()},methods:{async fetchData(){this.options.xAxis.categories=[],this.options.series[0].data=[];let s=await E.get(this.url,{params:this.params.date}).then(o=>o.data);s.error||s.data.forEach(o=>{this.options.xAxis.categories.push(o.message),this.options.series[0].data.push(parseFloat(o.seconds/(60*60)))})}}},jl={class:"report"},Yl={class:"table-wrapper"},Rl={class:"toolbox"},Wl={class:"date-selected"},Hl={class:"chart"};function Kl(s,o,n,r,t,l){const i=e.resolveComponent("datepicker"),a=e.resolveComponent("highcharts");return e.openBlock(),e.createElementBlock("div",jl,[e.createElementVNode("div",Yl,[e.createElementVNode("div",Rl,[e.createElementVNode("div",Wl,[e.createVNode(i,{"month-picker":"",class:"mr-2",modelValue:t.params.date,"onUpdate:modelValue":o[0]||(o[0]=d=>t.params.date=d),name:"date",autoApply:"",placeholder:"date"},null,8,["modelValue"]),e.createElementVNode("button",{class:"btn btn-primary",onClick:o[1]||(o[1]=(...d)=>l.fetchData&&l.fetchData(...d))},"Show")])]),e.createElementVNode("div",Hl,[e.createVNode(a,{ref:"chart",class:"hc",options:t.options},null,8,["options"])])])])}const Jl=u(zl,[["render",Kl]]),Ql={components:{Datepicker:f},props:{url:String,title:String},data(){return{params:{from:new Date,to:new Date},options:{chart:{type:"line"},title:{text:this.title},xAxis:{categories:[],crosshair:!0},yAxis:{min:0,title:{text:"Score (%)"}},tooltip:{headerFormat:'<span style="font-size:10px">{point.key}</span><table>',pointFormat:'<tr><td style="color:{series.color};padding:0">{series.name}: </td><td style="padding:0"><b>{point.y:.1f} %</b></td></tr>',footerFormat:"</table>",shared:!0,useHTML:!0},plotOptions:{column:{pointPadding:.2,borderWidth:0}},series:[]}}},methods:{async fetchData(){let s=await E.get(this.url,{params:this.params}).then(n=>n.data);["Availability","Performance","Quality","OEE"].forEach((n,r)=>{this.options.series[r]={name:n,data:[]}}),this.options.xAxis.categories=[],s.data.forEach(n=>{this.options.xAxis.categories.push(n.production_date),this.options.series[0].data.push(n.availability),this.options.series[1].data.push(n.performance),this.options.series[2].data.push(n.quality),this.options.series[3].data.push(n.oee)})}}},Gl={class:"report"},Xl={class:"table-wrapper"},Zl={class:"toolbox"},ea={class:"date-selected"},ta={class:"chart"};function oa(s,o,n,r,t,l){const i=e.resolveComponent("datepicker"),a=e.resolveComponent("highcharts");return e.openBlock(),e.createElementBlock("div",Gl,[e.createElementVNode("div",Xl,[e.createElementVNode("div",Zl,[e.createElementVNode("div",ea,[e.createVNode(i,{class:"mr-2",type:"datetime",modelValue:t.params.from,"onUpdate:modelValue":o[0]||(o[0]=d=>t.params.from=d),name:"from",textInput:"","enable-time-picker":!1,autoApply:"",closeOnAutoApply:!1,placeholder:"from"},null,8,["modelValue"]),e.createVNode(i,{class:"mr-2",type:"datetime",modelValue:t.params.to,"onUpdate:modelValue":o[1]||(o[1]=d=>t.params.to=d),name:"to",textInput:"","enable-time-picker":!1,autoApply:"",closeOnAutoApply:!1,placeholder:"to"},null,8,["modelValue"]),e.createElementVNode("button",{class:"btn btn-primary",onClick:o[2]||(o[2]=(...d)=>l.fetchData&&l.fetchData(...d))},"Show")])]),e.createElementVNode("div",ta,[e.createVNode(a,{ref:"chart",class:"hc",options:t.options},null,8,["options"])])])])}const sa=u(Ql,[["render",oa]]);const na={props:{title:String,isSupervisor:Boolean,settingShowed:Boolean,url:String,saveUrl:String},data(){return{variable:{number_of_shift:3,hours_per_shift:8,planned_shutdown_shift:1,downtime_loss:0,ideal_cycle_time_seconds:30}}},mounted(){this.fetchData()},methods:{async fetchData(){let s=await E.get(this.url,{params:this.params}).then(o=>o.data);s.data?this.variable=s.data:this.variable={number_of_shift:3,hours_per_shift:8,planned_shutdown_shift:1,downtime_loss:0,ideal_cycle_time_seconds:30}},async save(){await E.post(this.saveUrl,this.variable),this.fetchData()}},computed:{availability(){return this.operating_time/this.total_available_time*100},performance(){return this.ideal_cycle_time*this.variable.total_production/this.operating_time*100},quality(){return this.variable.good_production/this.variable.total_production*100},oee(){return this.availability*this.performance*this.quality/1e4},total_available_time(){return this.variable.number_of_shift*this.variable.hours_per_shift},planned_shutdown(){return this.variable.number_of_shift*this.variable.planned_shutdown_shift},scheduled_operating_time(){return this.total_available_time-this.planned_shutdown},ideal_cycle_time(){return this.variable.ideal_cycle_time_seconds/3600},operating_time(){return this.total_available_time-this.planned_shutdown-this.variable.downtime_loss},effective_operating_time(){return this.variable.total_production*this.ideal_cycle_time},speed_loss(){return this.operating_time-this.effective_operating_time}}},N=s=>(e.pushScopeId("data-v-3392c553"),s=s(),e.popScopeId(),s),la={class:"toolbox"},aa={class:"title"},ra={class:"row"},ia={key:0,class:"column column-4"},ca={class:"table"},da=N(()=>e.createElementVNode("thead",null,[e.createElementVNode("tr",null,[e.createElementVNode("th",null,"Factors"),e.createElementVNode("th",null,"Number Of Shifts"),e.createElementVNode("th",null,"Hours per Shift"),e.createElementVNode("th",{class:"text-right"},"Time (hour)")])],-1)),ma=N(()=>e.createElementVNode("td",null,"Total Available Time",-1)),pa=["readonly"],ha=["readonly"],ua={class:"text-right"},_a=N(()=>e.createElementVNode("td",null,"Planned Shutdown",-1)),Va=["readonly"],Ea=["readonly"],Na={class:"text-right"},fa=N(()=>e.createElementVNode("td",null,"Scheduled Operating Time",-1)),ga=N(()=>e.createElementVNode("td",null,null,-1)),ya=N(()=>e.createElementVNode("td",null,null,-1)),va={class:"text-right"},ba=N(()=>e.createElementVNode("td",null,"Downtime Loss",-1)),xa=N(()=>e.createElementVNode("td",null,null,-1)),Da=N(()=>e.createElementVNode("td",null,null,-1)),Sa={class:"text-right"},ka=N(()=>e.createElementVNode("td",null,"Ideal Cycle Time",-1)),wa=N(()=>e.createElementVNode("td",null,"Cycle time in Sec",-1)),$a=["readonly"],Ca={class:"text-right"};function Aa(s,o,n,r,t,l){return e.openBlock(),e.createElementBlock("div",null,[e.createElementVNode("div",la,[e.createElementVNode("h2",aa,e.toDisplayString(n.title),1)]),e.createElementVNode("div",ra,[n.settingShowed?(e.openBlock(),e.createElementBlock("div",ia,[e.createElementVNode("table",ca,[da,e.createElementVNode("tbody",null,[e.createElementVNode("tr",null,[ma,e.createElementVNode("td",null,[e.withDirectives(e.createElementVNode("input",{readonly:!n.isSupervisor,type:"number",class:"form-input","onUpdate:modelValue":o[0]||(o[0]=i=>t.variable.number_of_shift=i),placeholder:"Shifts"},null,8,pa),[[e.vModelText,t.variable.number_of_shift]])]),e.createElementVNode("td",null,[e.withDirectives(e.createElementVNode("input",{readonly:!n.isSupervisor,type:"number",class:"form-input","onUpdate:modelValue":o[1]||(o[1]=i=>t.variable.hours_per_shift=i),placeholder:"Hours/Shift"},null,8,ha),[[e.vModelText,t.variable.hours_per_shift]])]),e.createElementVNode("td",ua,e.toDisplayString(l.total_available_time),1)]),e.createElementVNode("tr",null,[_a,e.createElementVNode("td",null,[e.withDirectives(e.createElementVNode("input",{readonly:!n.isSupervisor,type:"number",class:"form-input","onUpdate:modelValue":o[2]||(o[2]=i=>t.variable.number_of_shift=i),placeholder:"Shifts"},null,8,Va),[[e.vModelText,t.variable.number_of_shift]])]),e.createElementVNode("td",null,[e.withDirectives(e.createElementVNode("input",{readonly:!n.isSupervisor,type:"number",class:"form-input","onUpdate:modelValue":o[3]||(o[3]=i=>t.variable.planned_shutdown_shift=i),placeholder:"Hours/Shift"},null,8,Ea),[[e.vModelText,t.variable.planned_shutdown_shift]])]),e.createElementVNode("td",Na,e.toDisplayString(l.planned_shutdown),1)]),e.createElementVNode("tr",null,[fa,ga,ya,e.createElementVNode("td",va,e.toDisplayString(l.scheduled_operating_time),1)]),e.createElementVNode("tr",null,[ba,xa,Da,e.createElementVNode("td",Sa,e.toDisplayString(t.variable.downtime_loss),1)]),e.createElementVNode("tr",null,[ka,wa,e.createElementVNode("td",null,[e.withDirectives(e.createElementVNode("input",{readonly:!n.isSupervisor,type:"number",class:"form-input","onUpdate:modelValue":o[4]||(o[4]=i=>t.variable.ideal_cycle_time_seconds=i)},null,8,$a),[[e.vModelText,t.variable.ideal_cycle_time_seconds]])]),e.createElementVNode("td",Ca,e.toDisplayString(l.ideal_cycle_time.toFixed(3)),1)])])]),n.isSupervisor?(e.openBlock(),e.createElementBlock("button",{key:0,class:"btn btn-primary btn-right",onClick:o[5]||(o[5]=(...i)=>l.save&&l.save(...i))},"Save Setting")):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0)])])}const Ba=u(na,[["render",Aa],["__scopeId","data-v-3392c553"]]),Fa={components:{Datepicker:f},props:{url:String,title:String},data(){return{colors:{run:"rgb(15, 153, 96)",idle:"rgb(217, 130, 43)",breakdown:"rgb(219, 55, 55)"},params:{from:new Date,to:new Date},options:{chart:{type:"line"},title:{text:this.title},xAxis:{categories:[],crosshair:!0},yAxis:{min:0,title:{text:"Times (in minutes)"}},tooltip:{headerFormat:'<span style="font-size:10px">{point.key}</span><table>',pointFormat:'<tr><td style="color:{series.color};padding:0">{series.name}: </td><td style="padding:0"><b>{point.y:.0f} minutes</b></td></tr>',footerFormat:"</table>",shared:!0,useHTML:!0},plotOptions:{column:{pointPadding:.2,borderWidth:0}},series:[]}}},methods:{async fetchData(){let s=this,o=await E.get(this.url,{params:this.params}).then(r=>r.data);["idle","run","breakdown"].forEach((r,t)=>{this.options.series[t]={name:r,color:s.colors[r],data:[]}}),this.options.xAxis.categories=[],o.data.forEach(r=>{this.options.xAxis.categories.push(r.production_date),this.options.series[0].data.push(r.idle/60),this.options.series[1].data.push(r.run/60),this.options.series[2].data.push(r.breakdown/60)})}}},Ta={class:"report"},Ia={class:"table-wrapper"},La={class:"toolbox"},Pa={class:"date-selected"},Oa={class:"chart"};function Ua(s,o,n,r,t,l){const i=e.resolveComponent("datepicker"),a=e.resolveComponent("highcharts");return e.openBlock(),e.createElementBlock("div",Ta,[e.createElementVNode("div",Ia,[e.createElementVNode("div",La,[e.createElementVNode("div",Pa,[e.createVNode(i,{class:"mr-2",type:"datetime",modelValue:t.params.from,"onUpdate:modelValue":o[0]||(o[0]=d=>t.params.from=d),name:"from",textInput:"","enable-time-picker":!1,autoApply:"",closeOnAutoApply:!1,placeholder:"from"},null,8,["modelValue"]),e.createVNode(i,{class:"mr-2",type:"datetime",modelValue:t.params.to,"onUpdate:modelValue":o[1]||(o[1]=d=>t.params.to=d),name:"to",textInput:"","enable-time-picker":!1,autoApply:"",closeOnAutoApply:!1,placeholder:"to"},null,8,["modelValue"]),e.createElementVNode("button",{class:"btn btn-primary",onClick:o[2]||(o[2]=(...d)=>l.fetchData&&l.fetchData(...d))},"Show")])]),e.createElementVNode("div",Oa,[e.createVNode(a,{ref:"chart",class:"hc",options:t.options},null,8,["options"])])])])}const qa=u(Fa,[["render",Ua]]);A(D);B(D);const h=F({mounted(){},data(){return{active:null}}});D.setOptions({time:{timezone:"Asia/Jakarta"}});h.use(T);Object.defineProperty(String.prototype,"capitalize",{value:function(){let s=this.split(" ");for(let o=0;o<s.length;o++){const n=typeof(s==null?void 0:s[o][0])=="string"?s[o][0].toUpperCase():"";s[o]=n+s[o].substr(1)}return s.join(" ")},enumerable:!1});h.config.globalProperties.$filters={textFormat(s){return s.toLowerCase().capitalize()}};h.component("trend-view",se);h.component("trend-live",de);h.component("log-table",ye);h.component("v-table",Ce);h.component("v-mqtt",Fe);h.component("pie",qe);h.component("pwr-trend",Ke);h.component("score-bar",ot);h.component("md-report",Ht);h.component("oee-score-lme",Gs);h.component("oee-score-leepack",Ml);h.component("bar-chart",Jl);h.component("oee-history",sa);h.component("oee-setting",Ba);h.component("timesheets",S);h.component("timesheet-history",qa);h.mount("#app");
