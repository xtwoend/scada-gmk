import{a as y,v as D,b as e,c as _,m as E,D as v,C as k,h as N,s as w,d as b,e as x,H as S}from"./vendor.3bd57d60.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function s(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerpolicy&&(l.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?l.credentials="include":o.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(o){if(o.ep)return;o.ep=!0;const l=s(o);fetch(o.href,l)}})();window.axios=y;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";const h=(n,t)=>{const s=n.__vccOpts||n;for(const[r,o]of t)s[r]=o;return s},C={props:{options:Array,type:{type:String,default:"select"},default:{type:Array,default:()=>[]}},data(){return{show:!1,selected:this.default}},methods:{showDropdown(){this.show=!this.show},hide(){this.show=!1},groupBy(n,t){return n.reduce((s,r,o)=>{var l;return(s[l=t(r,o,n)]||(s[l]=[])).push(r),s},{})}},computed:{groups(){return this.options[0].hasOwnProperty("group")?this.groupBy(this.options,n=>n.group):this.options}},watch:{selected(n){this.$emit("checked",n)}},directives:{clickOutside:D.directive}},A={class:"dd"},B={id:"list1",class:"dropdown-check-list",tabindex:"100"},L=e.createStaticVNode('<svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-adjustments-horizontal" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M14 6m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"></path><path d="M4 6l8 0"></path><path d="M16 6l4 0"></path><path d="M8 12m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"></path><path d="M4 12l2 0"></path><path d="M10 12l10 0"></path><path d="M17 18m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"></path><path d="M4 18l11 0"></path><path d="M19 18l1 0"></path></svg>',1),O=[L],I={key:2,class:"items"},q={key:0},P=["id","value"],T=["for"],$={key:1},F=["id","value"],U=["for"];function M(n,t,s,r,o,l){const c=e.resolveDirective("click-outside");return e.withDirectives((e.openBlock(),e.createElementBlock("div",A,[e.createElementVNode("div",B,[s.type=="select"?(e.openBlock(),e.createElementBlock("span",{key:0,class:"anchor form-control",onClick:t[0]||(t[0]=(...a)=>l.showDropdown&&l.showDropdown(...a))}," Select Parameter ")):e.createCommentVNode("",!0),s.type=="icon"?(e.openBlock(),e.createElementBlock("span",{key:1,class:"icon",onClick:t[1]||(t[1]=(...a)=>l.showDropdown&&l.showDropdown(...a))},O)):e.createCommentVNode("",!0),o.show?(e.openBlock(),e.createElementBlock("ul",I,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.groups,(a,i)=>(e.openBlock(),e.createElementBlock("li",{key:i},[Array.isArray(a)?(e.openBlock(),e.createElementBlock("div",q,[e.createElementVNode("span",null,e.toDisplayString(i),1),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a,(d,p)=>(e.openBlock(),e.createElementBlock("div",{key:p},[e.withDirectives(e.createElementVNode("input",{type:"checkbox",id:p,value:d,"onUpdate:modelValue":t[2]||(t[2]=g=>o.selected=g)},null,8,P),[[e.vModelCheckbox,o.selected]]),e.createElementVNode("label",{for:p},e.toDisplayString(n.$filters.textFormat(d.text)),9,T)]))),128))])):e.createCommentVNode("",!0),Array.isArray(a)?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",$,[e.withDirectives(e.createElementVNode("input",{type:"checkbox",id:i,value:a,"onUpdate:modelValue":t[3]||(t[3]=d=>o.selected=d)},null,8,F),[[e.vModelCheckbox,o.selected]]),e.createElementVNode("label",{for:i},e.toDisplayString(n.$filters.textFormat(a.text)),9,U)]))]))),128))])):e.createCommentVNode("",!0)])])),[[c,l.hide]])}const f=h(C,[["render",M]]);const V=["#2f7ed8","#8bbc21","#910000","#1aadce","#492970","#f28f43","#77a1e5","#c42525","#a6c96a","#7cb5ec","#434348","#90ed7d","#f7a35c","#8085e9","#f15c80","#e4d354","#2b908f","#f45b5b","#91e8e1","#0d233a"];const z={props:{url:String,title:String,defaultData:{type:Array,default:()=>[]},columns:{type:Array,default:()=>[]}},components:{Datepicker:_,Dropdown:f},data(){return{items:this.defaultData,params:{from:new Date,to:new Date,interval:3600,limit:1e3,select:[]},data:[],realtime:{},fetchReady:!1,colors:V,options:{chart:{type:"line",zoomType:"x",height:600},time:{useUTC:!1},title:{text:this.title,style:{fontSize:"24px",fontWeight:"bold"}},xAxis:{type:"datetime",title:{text:""}},yAxis:[],tooltip:{pointFormat:"{series.name}: <b>{point.y:.2f}</b><br/>",crosshairs:!0,shared:!0},legend:{enabled:!0},series:[]}}},mounted(){this.fetchData()},methods:{interval(n){this.params.interval=n,this.fetchData()},selected(n){this.items=n,this.fetchData()},async fetchData(){this.$refs.chart.chart.showLoading();let n=[],t=[],s=[];this.items.forEach((r,o)=>{let l=this.colors[o];t[o]={title:{text:this.textFormat(r.text),style:{color:l,fontSize:"16px"}},lineColor:l,labels:{style:{color:l},align:"left",x:14},lineWidth:1,opposite:!0},r.range&&(t[o].min=r.range[0],t[o].max=r.range[1]);let c=null;!!r.data.match(/\./g)&&(c=parseInt(r.data.split(".")[1])),n[o]={id:r.data,row:r.data.split(".")[0],colIndex:c,yAxis:o,type:r.type?r.type:"spline",name:this.textFormat(r.text),color:l,lineWidth:1,data:[]},s[o]=r.data}),this.options.series=n,this.options.yAxis=t,this.params.select=s,await axios.get(this.url,{params:this.params}).then(r=>{r.data.data.forEach(l=>{let c=l.unix_time;this.options.series.forEach((a,i)=>{let d=l[a.row];a.colIndex!==null?this.options.series[i].data.push([c,d[a.colIndex]]):this.options.series[i].data.push([c,d])})})}),this.$refs.chart.chart.hideLoading()},textFormat(n){let t=n.trim().toLowerCase().split(" ");for(let s=0;s<t.length;s++)t[s]=t[s][0].toUpperCase()+t[s].substr(1);return t.join(" ")}}},j={class:"report"},W={class:"table-wrapper"},R={class:"toolbox"},K={class:"date-selected"},J=e.createStaticVNode('<option value="10">10s</option><option value="60">1m</option><option value="900">15m</option><option value="1800">30m</option><option value="3600">1h</option><option value="7200">2h</option><option value="10800">3h</option><option value="18000">5h</option><option value="36000">10h</option><option value="86400">24h</option>',10),Y=[J],H={class:"chart"};function X(n,t,s,r,o,l){const c=e.resolveComponent("dropdown"),a=e.resolveComponent("datepicker"),i=e.resolveComponent("highcharts");return e.openBlock(),e.createElementBlock("div",j,[e.createElementVNode("div",W,[e.createElementVNode("div",R,[e.createVNode(c,{options:s.columns,onChecked:l.selected,default:s.defaultData},null,8,["options","onChecked","default"]),e.createElementVNode("div",K,[e.createVNode(a,{class:"mr-2",type:"datetime",modelValue:o.params.from,"onUpdate:modelValue":t[0]||(t[0]=d=>o.params.from=d),name:"from",textInput:"",autoApply:"",closeOnAutoApply:!1,placeholder:"from"},null,8,["modelValue"]),e.createVNode(a,{class:"mr-2",type:"datetime",modelValue:o.params.to,"onUpdate:modelValue":t[1]||(t[1]=d=>o.params.to=d),name:"to",textInput:"",autoApply:"",closeOnAutoApply:!1,placeholder:"to"},null,8,["modelValue"]),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":t[2]||(t[2]=d=>o.params.interval=d),class:"form-control wd-80 mr-2"},Y,512),[[e.vModelSelect,o.params.interval]]),e.createElementVNode("button",{class:"btn btn-primary",onClick:t[3]||(t[3]=(...d)=>l.fetchData&&l.fetchData(...d))},"Show")])]),e.createElementVNode("div",H,[e.createVNode(i,{ref:"chart",class:"hc","constructor-type":"stockChart",options:o.options},null,8,["options"])])])])}const Q=h(z,[["render",X]]),G={props:{url:String,title:String,mqtt:{type:Object,default(n){return{url:null,username:null,password:null,topic:null,timefield:"_terminalTime"}}},defaultData:{type:Array,default:()=>[]},columns:{type:Array,default:()=>[]}},components:{Dropdown:f},data(){return{items:this.defaultData,mqttConnection:null,colors:V,params:{last:30},options:{chart:{type:"line",zoomType:"x",height:600},time:{useUTC:!1},title:{text:this.title,style:{fontSize:"24px",fontWeight:"bold"}},xAxis:{type:"datetime",title:{text:""}},yAxis:[],tooltip:{pointFormat:"{series.name}: <b>{point.y:.2f}</b><br/>",crosshairs:!0,shared:!0},legend:{enabled:!0},series:[]}}},created(){this.mqttConnection=E.exports.connect(this.mqtt.url,{username:this.mqtt.username,password:this.mqtt.password})},mounted(){this.fetchData(),this.listen()},methods:{listen(){if(this.mqttConnection){let n=this;this.mqttConnection.on("connect",function(){n.mqttConnection.subscribe(n.mqtt.topic,function(t){t||console.log("connected")})}),this.mqttConnection.on("message",this.received)}},received(n,t){let s=JSON.parse(t.toString()),r=this.mqtt.timefield?this.mqtt.timefield:"_terminalTime",o=Date.parse(s[r]);this.options.series.forEach((l,c)=>{this.options.series[c].data.shift();let a=s[l.row];if(l.colIndex!==null){let i=a[l.colIndex];typeof i=="boolean"&&(i=i?1:0),this.options.series[c].data.push([o,i])}else this.options.series[c].data.push([o,parseFloat(a)])})},selected(n){this.items=n,this.fetchData()},async fetchData(){this.$refs.chart.chart.showLoading();let n=[],t=[];this.mqttI&&this.mqttI.end(),this.items.forEach((s,r)=>{let o=this.colors[r];t[r]={title:{text:this.textFormat(s.text),style:{color:o,fontSize:"14px"}},lineColor:o,labels:{style:{color:o},align:"left",x:14},lineWidth:2,opposite:!0},s.range&&(t[r].min=s.range[0],t[r].max=s.range[1]);let l=null;!!s.data.match(/\./g)&&(l=parseInt(s.data.split(".")[1])),n[r]={id:s.data,row:s.data.split(".")[0],colIndex:l,yAxis:r,type:s.type?s.type:"spline",name:this.textFormat(s.text),color:o,lineWidth:1,data:[]}}),this.options.series=n,this.options.yAxis=t,await axios.get(this.url,{params:this.params}).then(s=>{s.data.data.forEach(o=>{let l=Date.parse(o.terminal_time),c=JSON.parse(o.data);this.options.series.forEach((a,i)=>{let d=c[a.row];if(a.colIndex!==null){let p=d[a.colIndex];typeof p=="boolean"&&(p=p?1:0),this.options.series[i].data.push([l,p])}else this.options.series[i].data.push([l,parseFloat(d)])})})}),this.$refs.chart.chart.hideLoading()},textFormat(n){let t=n.trim().toLowerCase().split(" ");for(let s=0;s<t.length;s++)t[s]=t[s][0].toUpperCase()+t[s].substr(1);return t.join(" ")}}},Z={class:"report"},ee={class:"table-wrapper"},te={class:"toolbox"},oe={class:"chart"};function ne(n,t,s,r,o,l){const c=e.resolveComponent("dropdown"),a=e.resolveComponent("highcharts");return e.openBlock(),e.createElementBlock("div",Z,[e.createElementVNode("div",ee,[e.createElementVNode("div",te,[e.createVNode(c,{options:s.columns,onChecked:l.selected,default:s.defaultData},null,8,["options","onChecked","default"])]),e.createElementVNode("div",oe,[e.createVNode(a,{ref:"chart","constructor-type":"stockChart",class:"hc",options:o.options},null,8,["options"])])])])}const se=h(G,[["render",ne]]);const ae={props:{url:String,export:String,headers:Array,title:String,useInterval:{type:Boolean,default:!1}},components:{Vue3EasyDataTable:v,Datepicker:_},data(){return{options:{page:1,rowsPerPage:25},params:{from:new Date,to:new Date,interval:60},dataLength:0,isLoading:!1,items:[]}},mounted(){this.fetchData()},watch:{options:{handler(n){this.fetchData()},deep:!0}},methods:{async fetchData(){let n=Object.assign(this.params,this.options);this.isLoading=!0,this.items=[];let t=await axios.get(this.url,{params:n}).then(s=>s.data);this.items=t.data,this.dataLength=t.meta.total,this.options.page=t.meta.current_page,this.options.rowsPerPage=t.meta.per_page,this.isLoading=!1},download(){let n=this.export.split("?");const t=new URLSearchParams(n[1]);t.append("interval",this.params.interval),t.append("from",this.params.from.toISOString()),t.append("to",this.params.to.toISOString()),window.open(n[0]+"?"+t.toString(),"_blank")}}},le={class:"report"},re={class:"table-wrapper"},ie={class:"toolbox"},ce={class:"title"},de={class:"date-selected"},me=e.createStaticVNode('<option value="10">10s</option><option value="60">1m</option><option value="900">15m</option><option value="1800">30m</option><option value="3600">1h</option><option value="7200">2h</option><option value="10800">3h</option><option value="18000">5h</option><option value="36000">10h</option><option value="86400">24h</option>',10),pe=[me],ue={class:"table-content"};function he(n,t,s,r,o,l){const c=e.resolveComponent("datepicker"),a=e.resolveComponent("Vue3EasyDataTable");return e.openBlock(),e.createElementBlock("div",le,[e.createElementVNode("div",re,[e.createElementVNode("div",ie,[e.createElementVNode("h2",ce,e.toDisplayString(s.title),1),e.createElementVNode("div",de,[e.createVNode(c,{class:"mr-2",modelValue:o.params.from,"onUpdate:modelValue":t[0]||(t[0]=i=>o.params.from=i),name:"from",textInput:"",autoApply:"",closeOnAutoApply:!1,placeholder:"from"},null,8,["modelValue"]),e.createVNode(c,{class:"mr-2",modelValue:o.params.to,"onUpdate:modelValue":t[1]||(t[1]=i=>o.params.to=i),name:"to",textInput:"",autoApply:"",closeOnAutoApply:!1,placeholder:"to"},null,8,["modelValue"]),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":t[2]||(t[2]=i=>o.params.interval=i),class:"form-control wd-80 mr-2"},pe,512),[[e.vModelSelect,o.params.interval],[e.vShow,s.useInterval]]),e.createElementVNode("button",{class:"btn btn-primary mr-2",onClick:t[3]||(t[3]=(...i)=>l.fetchData&&l.fetchData(...i))},"Show"),e.createElementVNode("button",{class:"btn btn-success",onClick:t[4]||(t[4]=(...i)=>l.download&&l.download(...i))},"Download")])]),e.createElementVNode("div",ue,[e.createVNode(a,{"show-index":"","buttons-pagination":"","table-class-name":"customize-table","server-options":o.options,"onUpdate:server-options":t[5]||(t[5]=i=>o.options=i),"server-items-length":o.dataLength,loading:o.isLoading,headers:s.headers,items:o.items,ref:"vtable"},e.createSlots({_:2},[e.renderList(n.$slots,(i,d)=>({name:d,fn:e.withCtx(p=>[e.renderSlot(n.$slots,d,e.normalizeProps(e.guardReactiveProps(p||{})))])}))]),1032,["server-options","server-items-length","loading","headers","items"])])])])}const _e=h(ae,[["render",he]]);const fe={props:{url:String,headers:Array,title:String},components:{Vue3EasyDataTable:v},data(){return{options:{page:1,rowsPerPage:25},dataLength:0,isLoading:!1,items:[]}},mounted(){this.fetchData()},watch:{options:{handler(n){this.fetchData()},deep:!0}},methods:{async fetchData(){this.isLoading=!0,this.items=[];let n=await axios.get(this.url,{params:this.options}).then(t=>t.data);this.items=n.data,this.dataLength=n.meta.total,this.options.page=n.meta.current_page,this.options.rowsPerPage=n.meta.per_page,this.isLoading=!1}}},Ve={class:"report"},ge={class:"table-wrapper"},Ne={class:"toolbox"},Ee={class:"title"},ye=e.createElementVNode("div",{class:"date-selected"},null,-1),ve={class:"table-content"};function be(n,t,s,r,o,l){const c=e.resolveComponent("Vue3EasyDataTable");return e.openBlock(),e.createElementBlock("div",Ve,[e.createElementVNode("div",ge,[e.createElementVNode("div",Ne,[e.createElementVNode("h2",Ee,e.toDisplayString(s.title),1),ye]),e.createElementVNode("div",ve,[e.createVNode(c,{"show-index":"","buttons-pagination":"","table-class-name":"customize-table","server-options":o.options,"onUpdate:server-options":t[0]||(t[0]=a=>o.options=a),"server-items-length":o.dataLength,loading:o.isLoading,headers:s.headers,items:o.items,ref:"vtable"},e.createSlots({_:2},[e.renderList(n.$slots,(a,i)=>({name:i,fn:e.withCtx(d=>[e.renderSlot(n.$slots,i,e.normalizeProps(e.guardReactiveProps(d||{})))])}))]),1032,["server-options","server-items-length","loading","headers","items"])])])])}const De=h(fe,[["render",be]]),ke={props:{topic:String},data(){return{message:null,options:{}}},created(){this.listen()},methods:{listen(){let n=E.exports.connect("ws://192.168.170.87:9001",this.options),t=this;n.on("connect",function(){n.subscribe(t.topic,function(s){s||(console.log("connected"),n.publish(t.topic,"Hello mqtt"))})}),n.on("message",function(s,r){console.log("topic",s),console.log(r.toString()),t.message=r})}}};function we(n,t,s,r,o,l){return e.openBlock(),e.createElementBlock("div",null,e.toDisplayString(o.message),1)}const xe=h(ke,[["render",we]]);const Se={props:{title:String,station:String,defaultData:{type:Array,default:()=>[]},columns:{type:Array,default:()=>[]},mqtt:{type:Object,default(){return{url:null,username:null,password:null,topic:null}}}},components:{CircleProgress:k,Dropdown:f},data(){return{items:this.defaultData,mqttConnection:null,score:0,total:0}},created(){this.mqttConnection=E.exports.connect(this.mqtt.url,{username:this.mqtt.username,password:this.mqtt.password})},mounted(){this.listen()},methods:{selected(n){this.items=n},listen(){if(this.mqttConnection){let n=this;this.mqttConnection.on("connect",function(){n.mqttConnection.subscribe(n.mqtt.topic,function(t){t||console.log("connected")})}),this.mqttConnection.on("message",this.received)}},received(n,t){let s=JSON.parse(t.toString());if(s.group==this.station){let r=this.items.length;this.total=s.data.count_record*r;let o=s.data,l=0;this.items.forEach(c=>{l=l+parseInt(o[c.data])}),this.score=parseInt(l/this.total*100)}}}},Ce={class:"card"},Ae={class:"card-title"},Be={class:"card-body"},Le={class:"total"};function Oe(n,t,s,r,o,l){const c=e.resolveComponent("dropdown"),a=e.resolveComponent("circle-progress");return e.openBlock(),e.createElementBlock("div",Ce,[e.createElementVNode("div",Ae,[e.createVNode(c,{type:"icon",class:"opsi",options:s.columns,onChecked:l.selected,default:s.defaultData},null,8,["options","onChecked","default"]),e.createTextVNode(" "+e.toDisplayString(s.title),1)]),e.createElementVNode("div",Be,[e.createVNode(a,{percent:o.score,"show-percent":""},null,8,["percent"]),e.createElementVNode("div",Le,[e.createTextVNode("Total Record "),e.createElementVNode("b",null,e.toDisplayString(o.total.toLocaleString()),1)])])])}const Ie=h(Se,[["render",Oe]]),qe={props:{url:String,title:String,defaultData:{type:Array,default:()=>[]},columns:{type:Array,default:()=>[]}},components:{Datepicker:_,Dropdown:f},data(){return{items:this.defaultData,params:{from:new Date,to:new Date},data:[],realtime:{},fetchReady:!1,colors:V,options:{chart:{type:"line",zoomType:"x",height:600},time:{useUTC:!0},title:{text:this.title,style:{fontSize:"24px",fontWeight:"bold"}},xAxis:{type:"datetime",title:{text:""}},yAxis:[],tooltip:{pointFormat:"{series.name}: <b>{point.y:.2f} KWh</b><br/>",crosshairs:!0,shared:!0},legend:{enabled:!0},series:[]}}},mounted(){this.fetchData()},methods:{selected(n){this.items=n,this.fetchData()},async fetchData(){this.$refs.chart.chart.showLoading();let n=[],t=[],s=[];this.items.forEach((r,o)=>{let l=this.colors[o];t[o]={title:{text:this.textFormat(r.text),style:{color:l,fontSize:"16px"}},lineColor:l,labels:{style:{color:l},align:"left",x:14},lineWidth:1,opposite:!0},r.range&&(t[o].min=r.range[0],t[o].max=r.range[1]),n[o]={id:r.data,yAxis:o,type:r.type?r.type:"spline",name:this.textFormat(r.text),color:l,lineWidth:1,data:[]},s[o]=r.data}),this.options.series=n,this.options.yAxis=t,this.params.select=s,await axios.get(this.url,{params:this.params}).then(r=>{let o=r.data.data;for(const[l,c]of Object.entries(o)){let a=this.options.series.findIndex(i=>i.id==l);a>=0&&c.forEach(i=>{this.options.series[a].data.push([i.time*1e3,i.total/1e3])})}}),this.$refs.chart.chart.hideLoading()},textFormat(n){let t=n.toLowerCase().split(" ");for(let s=0;s<t.length;s++)t[s]=t[s][0].toUpperCase()+t[s].substr(1);return t.join(" ")}}},Pe={class:"report"},Te={class:"table-wrapper"},$e={class:"toolbox"},Fe={class:"date-selected"},Ue={class:"chart"};function Me(n,t,s,r,o,l){const c=e.resolveComponent("dropdown"),a=e.resolveComponent("datepicker"),i=e.resolveComponent("highcharts");return e.openBlock(),e.createElementBlock("div",Pe,[e.createElementVNode("div",Te,[e.createElementVNode("div",$e,[e.createVNode(c,{options:s.columns,onChecked:l.selected,default:s.defaultData},null,8,["options","onChecked","default"]),e.createElementVNode("div",Fe,[e.createVNode(a,{class:"mr-2","enable-time-picker":!1,modelValue:o.params.from,"onUpdate:modelValue":t[0]||(t[0]=d=>o.params.from=d),name:"from",textInput:"",autoApply:"",closeOnAutoApply:!1,placeholder:"from"},null,8,["modelValue"]),e.createVNode(a,{class:"mr-2","enable-time-picker":!1,modelValue:o.params.to,"onUpdate:modelValue":t[1]||(t[1]=d=>o.params.to=d),name:"to",textInput:"",autoApply:"",closeOnAutoApply:!1,placeholder:"to"},null,8,["modelValue"]),e.createElementVNode("button",{class:"btn btn-primary",onClick:t[2]||(t[2]=(...d)=>l.fetchData&&l.fetchData(...d))},"Show")])]),e.createElementVNode("div",Ue,[e.createVNode(i,{ref:"chart",class:"hc",options:o.options},null,8,["options"])])])])}const ze=h(qe,[["render",Me]]),je={props:{url:String,title:String,defaultData:{type:Array,default:()=>[]},columns:{type:Array,default:()=>[]}},components:{Datepicker:_,Dropdown:f},data(){return{items:this.defaultData,params:{from:new Date,to:new Date},data:[],realtime:{},fetchReady:!1,colors:V,options:{chart:{type:"column"},time:{useUTC:!0},title:{text:this.title,style:{fontSize:"24px",fontWeight:"bold"}},tooltip:{pointFormat:"{series.name}: <b>{point.y} %</b><br/>",crosshairs:!0},legend:{enabled:!0},xAxis:{crosshair:!0},yAxis:{min:0,max:100,title:{text:"Score Conformance (%)"}},series:[]}}},mounted(){this.fetchData()},methods:{selected(n){this.items=n,this.fetchData()},async fetchData(){this.$refs.chart.chart.showLoading();let n=[],t=[],s=this;await axios.get(this.url,{params:this.params}).then(r=>{let o=r.data.data,l=s.items.length;o.forEach(c=>{let a=N(c.date,"YYYY-MM-DD");n.push(a.format("ll"));let i=c.count_record*l,d=0;s.items.forEach(g=>{d=d+parseInt(c[g.data])});let p=parseInt(d/i*100);t.push(p)})}),this.options.xAxis.categories=n,this.options.series=[{name:this.title,data:t}],this.$refs.chart.chart.hideLoading()},textFormat(n){let t=n.toLowerCase().split(" ");for(let s=0;s<t.length;s++)t[s]=t[s][0].toUpperCase()+t[s].substr(1);return t.join(" ")}}},We={class:"report"},Re={class:"table-wrapper"},Ke={class:"toolbox"},Je={class:"date-selected"},Ye={class:"chart"};function He(n,t,s,r,o,l){const c=e.resolveComponent("dropdown"),a=e.resolveComponent("datepicker"),i=e.resolveComponent("highcharts");return e.openBlock(),e.createElementBlock("div",We,[e.createElementVNode("div",Re,[e.createElementVNode("div",Ke,[e.createVNode(c,{options:s.columns,onChecked:l.selected,default:s.defaultData},null,8,["options","onChecked","default"]),e.createElementVNode("div",Je,[e.createVNode(a,{class:"mr-2","enable-time-picker":!1,modelValue:o.params.from,"onUpdate:modelValue":t[0]||(t[0]=d=>o.params.from=d),name:"from",textInput:"",autoApply:"",closeOnAutoApply:!1,placeholder:"from"},null,8,["modelValue"]),e.createVNode(a,{class:"mr-2","enable-time-picker":!1,modelValue:o.params.to,"onUpdate:modelValue":t[1]||(t[1]=d=>o.params.to=d),name:"to",textInput:"",autoApply:"",closeOnAutoApply:!1,placeholder:"to"},null,8,["modelValue"]),e.createElementVNode("button",{class:"btn btn-primary",onClick:t[2]||(t[2]=(...d)=>l.fetchData&&l.fetchData(...d))},"Show")])]),e.createElementVNode("div",Ye,[e.createVNode(i,{ref:"chart",class:"hc",options:o.options},null,8,["options"])])])])}const Xe=h(je,[["render",He]]);const Qe={components:{Datepicker:_},props:{url:String,title:String},data(){return{params:{date:new Date},device:{name:null,size_fe:null,size_non_fe:null,size_ss:null},date:null,verifications:[],productions:[]}},methods:{async fetchData(){let n=await y.get(this.url,{params:this.params}).then(t=>t.data.data);this.device=n.startup.device,this.date=N(n.startup.started_at).format("DD MMMM YYYY"),this.productions=n.productions,this.verifications=n.startup.verifications},fTime(n){return N(n).format("HH:mm:ss")}}},m=n=>(e.pushScopeId("data-v-1664c35e"),n=n(),e.popScopeId(),n),Ge={class:"report"},Ze={class:"toolbox"},et={class:"title"},tt={class:"date-selected"},ot={class:"row"},nt={class:"column"},st={class:"table bordered"},at=m(()=>e.createElementVNode("td",{class:"bg-grey"},"Metal Detector",-1)),lt={colspan:"3",class:"text-center"},rt=m(()=>e.createElementVNode("tr",{class:"bg-grey"},[e.createElementVNode("td",null,"Test Piece"),e.createElementVNode("td",null,"Fe"),e.createElementVNode("td",null,"Non Fe"),e.createElementVNode("td",null,"SS")],-1)),it=m(()=>e.createElementVNode("td",{class:"bg-grey"},"Ukuran",-1)),ct=m(()=>e.createElementVNode("div",{class:"column"},null,-1)),dt=m(()=>e.createElementVNode("div",{class:"column"},null,-1)),mt={class:"row date"},pt={class:"column"},ut={class:"row"},ht={class:"column column-60"},_t={class:"table bordered"},ft=m(()=>e.createElementVNode("thead",null,[e.createElementVNode("tr",{class:"bg-grey"},[e.createElementVNode("td",{rowspan:"2"},"Jam"),e.createElementVNode("td",{rowspan:"2"},"Keterangan"),e.createElementVNode("td",{colspan:"3"},"Verifikasi"),e.createElementVNode("td",{colspan:"2"},"Dibuat Oleh"),e.createElementVNode("td",{colspan:"2"},"Divalidasi Oleh"),e.createElementVNode("td",{rowspan:"2"},"Tindakan koreksi jika MD Error (input no. wor)")]),e.createElementVNode("tr",{class:"bg-grey"},[e.createElementVNode("td",null,"Fe"),e.createElementVNode("td",null,"Non Fe"),e.createElementVNode("td",null,"SS"),e.createElementVNode("td",null,"Nama Operator"),e.createElementVNode("td",null,"Paraf"),e.createElementVNode("td",null,"Nama Foreman"),e.createElementVNode("td",null,"Paraf")])],-1)),Vt={class:"text-center"},gt={class:"text-center"},Nt={class:"text-center"},Et=m(()=>e.createElementVNode("td",null,null,-1)),yt=m(()=>e.createElementVNode("td",null,null,-1)),vt=m(()=>e.createElementVNode("tr",null,[e.createElementVNode("td",null,"\xA0"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td")],-1)),bt={class:"row"},Dt={class:"column"},kt={class:"table bordered"},wt=m(()=>e.createElementVNode("thead",null,[e.createElementVNode("tr",{class:"bg-grey"},[e.createElementVNode("td",{rowspan:"3"},"No"),e.createElementVNode("td",{rowspan:"3"},"Jam"),e.createElementVNode("td",{rowspan:"3"},"Nama Produk"),e.createElementVNode("td",{rowspan:"3"},"BN"),e.createElementVNode("td",{rowspan:"3"},"Satuan Kemasan"),e.createElementVNode("td",{rowspan:"3"},"Verifikasi"),e.createElementVNode("td",{colspan:"9"},"Kondisi Sensitif Produk"),e.createElementVNode("td",{rowspan:"3"},"Jumlah Produk OK (pcs)"),e.createElementVNode("td",{rowspan:"3"},"Jumlah Produk Non OK (pcs)"),e.createElementVNode("td",{colspan:"2"},"Dibuat Oleh"),e.createElementVNode("td",{colspan:"2"},"Divalidasi Oleh"),e.createElementVNode("td",{rowspan:"3"},"Tindakan Koreksi untuk Produk Not OK")]),e.createElementVNode("tr",{class:"bg-grey"},[e.createElementVNode("td",{colspan:"3"},"Fe"),e.createElementVNode("td",{colspan:"3"},"Non Fe"),e.createElementVNode("td",{colspan:"3"},"SS"),e.createElementVNode("td",{rowspan:"2"},"Nama Operator"),e.createElementVNode("td",{rowspan:"2"},"Paraf"),e.createElementVNode("td",{rowspan:"2"},"Nama Foreman"),e.createElementVNode("td",{rowspan:"2"},"Paraf")]),e.createElementVNode("tr",{class:"bg-grey"},[e.createElementVNode("td",null,"Ujung Depan"),e.createElementVNode("td",null,"Tengah"),e.createElementVNode("td",null,"Ujung Belakang"),e.createElementVNode("td",null,"Ujung Depan"),e.createElementVNode("td",null,"Tengah"),e.createElementVNode("td",null,"Ujung Belakang"),e.createElementVNode("td",null,"Ujung Depan"),e.createElementVNode("td",null,"Tengah"),e.createElementVNode("td",null,"Ujung Belakang")])],-1)),xt=m(()=>e.createElementVNode("td",null,null,-1)),St={class:"text-center"},Ct={class:"text-center"},At={class:"text-center"},Bt={class:"text-center"},Lt={class:"text-center"},Ot={class:"text-center"},It={class:"text-center"},qt={class:"text-center"},Pt={class:"text-center"},Tt=m(()=>e.createElementVNode("td",null,null,-1)),$t=m(()=>e.createElementVNode("td",null,null,-1)),Ft=m(()=>e.createElementVNode("tr",null,[e.createElementVNode("td",null,"\xA0"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td")],-1));function Ut(n,t,s,r,o,l){const c=e.resolveComponent("datepicker");return e.openBlock(),e.createElementBlock("div",Ge,[e.createElementVNode("div",Ze,[e.createElementVNode("h2",et,e.toDisplayString(s.title),1),e.createElementVNode("div",tt,[e.createVNode(c,{"enable-time-picker":!1,class:"mr-2",modelValue:o.params.date,"onUpdate:modelValue":t[0]||(t[0]=a=>o.params.date=a),name:"date",textInput:"",autoApply:"",closeOnAutoApply:!1,placeholder:"date"},null,8,["modelValue"]),e.createElementVNode("button",{class:"btn btn-primary mr-2",onClick:t[1]||(t[1]=(...a)=>l.fetchData&&l.fetchData(...a))},"Show"),e.createElementVNode("button",{class:"btn btn-success",onClick:t[2]||(t[2]=(...a)=>n.download&&n.download(...a))},"Download")])]),e.createElementVNode("div",ot,[e.createElementVNode("div",nt,[e.createElementVNode("table",st,[e.createElementVNode("tbody",null,[e.createElementVNode("tr",null,[at,e.createElementVNode("td",lt,e.toDisplayString(o.device.name),1)]),rt,e.createElementVNode("tr",null,[it,e.createElementVNode("td",null,e.toDisplayString(o.device.size_fe),1),e.createElementVNode("td",null,e.toDisplayString(o.device.size_non_fe),1),e.createElementVNode("td",null,e.toDisplayString(o.device.size_ss),1)])])])]),ct,dt]),e.createElementVNode("div",mt,[e.createElementVNode("div",pt," Tanggal : "+e.toDisplayString(o.date),1)]),e.createElementVNode("div",ut,[e.createElementVNode("div",ht,[e.createElementVNode("table",_t,[ft,e.createElementVNode("tbody",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.verifications,a=>(e.openBlock(),e.createElementBlock("tr",{key:a.id},[e.createElementVNode("td",null,e.toDisplayString(a.started_at),1),e.createElementVNode("td",null,e.toDisplayString(a.type_text),1),e.createElementVNode("td",Vt,e.toDisplayString(a.fe?"\u2714":""),1),e.createElementVNode("td",gt,e.toDisplayString(a.non_fe?"\u2714":""),1),e.createElementVNode("td",Nt,e.toDisplayString(a.ss?"\u2714":""),1),e.createElementVNode("td",null,e.toDisplayString(a.operator?a.operator.name:""),1),Et,e.createElementVNode("td",null,e.toDisplayString(a.foreman?a.foreman.name:""),1),yt,e.createElementVNode("td",null,e.toDisplayString(a.wor_number),1)]))),128)),vt])])])]),e.createElementVNode("div",bt,[e.createElementVNode("div",Dt,[e.createElementVNode("table",kt,[wt,e.createElementVNode("tbody",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.productions,a=>(e.openBlock(),e.createElementBlock("tr",{key:a.id},[xt,e.createElementVNode("td",null,e.toDisplayString(`${l.fTime(a.started_at)} - ${l.fTime(a.finished_at)}`),1),e.createElementVNode("td",null,e.toDisplayString(a.production.product.name),1),e.createElementVNode("td",null,e.toDisplayString(a.production.batch_no),1),e.createElementVNode("td",null,e.toDisplayString(a.production.product.unit),1),e.createElementVNode("td",null,e.toDisplayString(a.order_text),1),e.createElementVNode("td",St,e.toDisplayString(a.fe_front?"\u2714":""),1),e.createElementVNode("td",Ct,e.toDisplayString(a.fe_mid?"\u2714":""),1),e.createElementVNode("td",At,e.toDisplayString(a.fe_end?"\u2714":""),1),e.createElementVNode("td",Bt,e.toDisplayString(a.non_fe_front?"\u2714":""),1),e.createElementVNode("td",Lt,e.toDisplayString(a.non_fe_mid?"\u2714":""),1),e.createElementVNode("td",Ot,e.toDisplayString(a.non_fe_end?"\u2714":""),1),e.createElementVNode("td",It,e.toDisplayString(a.ss_front?"\u2714":""),1),e.createElementVNode("td",qt,e.toDisplayString(a.ss_mid?"\u2714":""),1),e.createElementVNode("td",Pt,e.toDisplayString(a.ss_end?"\u2714":""),1),e.createElementVNode("td",null,e.toDisplayString(a.good_records_count),1),e.createElementVNode("td",null,e.toDisplayString(a.ng_records_count),1),e.createElementVNode("td",null,e.toDisplayString(a.operator?a.operator.name:""),1),Tt,e.createElementVNode("td",null,e.toDisplayString(a.foreman?a.foreman.name:""),1),$t,e.createElementVNode("td",null,e.toDisplayString(a.remark),1)]))),128)),Ft])])])])])}const Mt=h(Qe,[["render",Ut],["__scopeId","data-v-1664c35e"]]);w(b);const u=x({mounted(){},data(){return{active:null}}});b.setOptions({time:{timezone:"Asia/Jakarta"}});u.use(S);Object.defineProperty(String.prototype,"capitalize",{value:function(){let n=this.split(" ");for(let t=0;t<n.length;t++){const s=typeof(n==null?void 0:n[t][0])=="string"?n[t][0].toUpperCase():"";n[t]=s+n[t].substr(1)}return n.join(" ")},enumerable:!1});u.config.globalProperties.$filters={textFormat(n){return n.toLowerCase().capitalize()}};u.component("trend-view",Q);u.component("trend-live",se);u.component("log-table",_e);u.component("v-table",De);u.component("v-mqtt",xe);u.component("pie",Ie);u.component("pwr-trend",ze);u.component("score-bar",Xe);u.component("md-report",Mt);u.mount("#app");
