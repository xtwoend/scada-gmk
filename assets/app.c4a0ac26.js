import{a as N,h as g,v as $,b as e,c as f,m as b,D as k,C,d as w,s as A,H as D,x as F,e as B,f as I}from"./vendor.f367ad33.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerpolicy&&(a.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?a.credentials="include":o.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();window.axios=N;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";window.moment=g;const _=(s,t)=>{const n=s.__vccOpts||s;for(const[r,o]of t)n[r]=o;return n},T={props:{options:Array,type:{type:String,default:"select"},default:{type:Array,default:()=>[]}},data(){return{show:!1,selected:this.default}},methods:{showDropdown(){this.show=!this.show},hide(){this.show=!1},groupBy(s,t){return s.reduce((n,r,o)=>{var a;return(n[a=t(r,o,s)]||(n[a]=[])).push(r),n},{})}},computed:{groups(){return this.options[0].hasOwnProperty("group")?this.groupBy(this.options,s=>s.group):this.options}},watch:{selected(s){this.$emit("checked",s)}},directives:{clickOutside:$.directive}},L={class:"dd"},q={id:"list1",class:"dropdown-check-list",tabindex:"100"},P=e.createStaticVNode('<svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-adjustments-horizontal" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M14 6m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"></path><path d="M4 6l8 0"></path><path d="M16 6l4 0"></path><path d="M8 12m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"></path><path d="M4 12l2 0"></path><path d="M10 12l10 0"></path><path d="M17 18m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"></path><path d="M4 18l11 0"></path><path d="M19 18l1 0"></path></svg>',1),O=[P],U={key:2,class:"items"},M={key:0},z=["id","value"],j=["for"],W={key:1},Y=["id","value"],R=["for"];function H(s,t,n,r,o,a){const i=e.resolveDirective("click-outside");return e.withDirectives((e.openBlock(),e.createElementBlock("div",L,[e.createElementVNode("div",q,[n.type=="select"?(e.openBlock(),e.createElementBlock("span",{key:0,class:"anchor form-control",onClick:t[0]||(t[0]=(...l)=>a.showDropdown&&a.showDropdown(...l))}," Select Parameter ")):e.createCommentVNode("",!0),n.type=="icon"?(e.openBlock(),e.createElementBlock("span",{key:1,class:"icon",onClick:t[1]||(t[1]=(...l)=>a.showDropdown&&a.showDropdown(...l))},O)):e.createCommentVNode("",!0),o.show?(e.openBlock(),e.createElementBlock("ul",U,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.groups,(l,c)=>(e.openBlock(),e.createElementBlock("li",{key:c},[Array.isArray(l)?(e.openBlock(),e.createElementBlock("div",M,[e.createElementVNode("span",null,e.toDisplayString(c),1),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l,(p,h)=>(e.openBlock(),e.createElementBlock("div",{key:h},[e.withDirectives(e.createElementVNode("input",{type:"checkbox",id:h,value:p,"onUpdate:modelValue":t[2]||(t[2]=x=>o.selected=x)},null,8,z),[[e.vModelCheckbox,o.selected]]),e.createElementVNode("label",{for:h},e.toDisplayString(s.$filters.textFormat(p.text)),9,j)]))),128))])):e.createCommentVNode("",!0),Array.isArray(l)?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",W,[e.withDirectives(e.createElementVNode("input",{type:"checkbox",id:c,value:l,"onUpdate:modelValue":t[3]||(t[3]=p=>o.selected=p)},null,8,Y),[[e.vModelCheckbox,o.selected]]),e.createElementVNode("label",{for:c},e.toDisplayString(s.$filters.textFormat(l.text)),9,R)]))]))),128))])):e.createCommentVNode("",!0)])])),[[i,a.hide]])}const y=_(T,[["render",H]]);const v=["#2f7ed8","#8bbc21","#910000","#1aadce","#492970","#f28f43","#77a1e5","#c42525","#a6c96a","#7cb5ec","#434348","#90ed7d","#f7a35c","#8085e9","#f15c80","#e4d354","#2b908f","#f45b5b","#91e8e1","#0d233a"];const J={props:{url:String,title:String,defaultData:{type:Array,default:()=>[]},columns:{type:Array,default:()=>[]}},components:{Datepicker:f,Dropdown:y},data(){return{items:this.defaultData,params:{from:new Date,to:new Date,interval:3600,limit:1e3,select:[]},data:[],realtime:{},fetchReady:!1,colors:v,options:{chart:{type:"line",zoomType:"x",height:600},time:{useUTC:!1},title:{text:this.title,style:{fontSize:"24px",fontWeight:"bold"}},xAxis:{type:"datetime",title:{text:""}},yAxis:[],tooltip:{pointFormat:"{series.name}: <b>{point.y:.2f}</b><br/>",crosshairs:!0,shared:!0},legend:{enabled:!0},series:[]}}},mounted(){this.fetchData()},methods:{interval(s){this.params.interval=s,this.fetchData()},selected(s){this.items=s,this.fetchData()},async fetchData(){this.$refs.chart.chart.showLoading();let s=[],t=[],n=[];this.items.forEach((r,o)=>{let a=this.colors[o];t[o]={title:{text:this.textFormat(r.text),style:{color:a,fontSize:"16px"}},lineColor:a,labels:{style:{color:a},align:"left",x:14},lineWidth:1,opposite:!0},r.range&&(t[o].min=r.range[0],t[o].max=r.range[1]);let i=null;!!r.data.match(/\./g)&&(i=parseInt(r.data.split(".")[1])),s[o]={id:r.data,row:r.data.split(".")[0],colIndex:i,yAxis:o,type:r.type?r.type:"spline",name:this.textFormat(r.text),color:a,lineWidth:1,data:[]},n[o]=r.data}),this.options.series=s,this.options.yAxis=t,this.params.select=n,await axios.get(this.url,{params:this.params}).then(r=>{r.data.data.forEach(a=>{let i=a.unix_time;this.options.series.forEach((l,c)=>{let p=a[l.row];l.colIndex!==null?this.options.series[c].data.push([i,p[l.colIndex]]):this.options.series[c].data.push([i,p])})})}),this.$refs.chart.chart.hideLoading()},textFormat(s){let t=s.trim().toLowerCase().split(" ");for(let n=0;n<t.length;n++)t[n]=t[n][0].toUpperCase()+t[n].substr(1);return t.join(" ")}}},K={class:"report"},Q={class:"table-wrapper"},G={class:"toolbox"},X={class:"date-selected"},Z=e.createStaticVNode('<option value="10">10s</option><option value="60">1m</option><option value="900">15m</option><option value="1800">30m</option><option value="3600">1h</option><option value="7200">2h</option><option value="10800">3h</option><option value="18000">5h</option><option value="36000">10h</option><option value="86400">24h</option>',10),ee=[Z],te={class:"chart"};function oe(s,t,n,r,o,a){const i=e.resolveComponent("dropdown"),l=e.resolveComponent("datepicker"),c=e.resolveComponent("highcharts");return e.openBlock(),e.createElementBlock("div",K,[e.createElementVNode("div",Q,[e.createElementVNode("div",G,[e.createVNode(i,{options:n.columns,onChecked:a.selected,default:n.defaultData},null,8,["options","onChecked","default"]),e.createElementVNode("div",X,[e.createVNode(l,{class:"mr-2",type:"datetime",modelValue:o.params.from,"onUpdate:modelValue":t[0]||(t[0]=p=>o.params.from=p),name:"from",textInput:"",autoApply:"",closeOnAutoApply:!1,placeholder:"from"},null,8,["modelValue"]),e.createVNode(l,{class:"mr-2",type:"datetime",modelValue:o.params.to,"onUpdate:modelValue":t[1]||(t[1]=p=>o.params.to=p),name:"to",textInput:"",autoApply:"",closeOnAutoApply:!1,placeholder:"to"},null,8,["modelValue"]),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":t[2]||(t[2]=p=>o.params.interval=p),class:"form-control wd-80 mr-2"},ee,512),[[e.vModelSelect,o.params.interval]]),e.createElementVNode("button",{class:"btn btn-primary",onClick:t[3]||(t[3]=(...p)=>a.fetchData&&a.fetchData(...p))},"Show")])]),e.createElementVNode("div",te,[e.createVNode(c,{ref:"chart",class:"hc","constructor-type":"stockChart",options:o.options},null,8,["options"])])])])}const se=_(J,[["render",oe]]),ne={props:{url:String,title:String,mqtt:{type:Object,default(s){return{url:null,username:null,password:null,topic:null,timefield:"_terminalTime"}}},defaultData:{type:Array,default:()=>[]},columns:{type:Array,default:()=>[]}},components:{Dropdown:y},data(){return{items:this.defaultData,mqttConnection:null,colors:v,params:{last:30},options:{chart:{type:"line",zoomType:"x",height:600},time:{useUTC:!1},title:{text:this.title,style:{fontSize:"24px",fontWeight:"bold"}},xAxis:{type:"datetime",title:{text:""}},yAxis:[],tooltip:{pointFormat:"{series.name}: <b>{point.y:.2f}</b><br/>",crosshairs:!0,shared:!0},legend:{enabled:!0},series:[]}}},created(){this.mqttConnection=b.exports.connect(this.mqtt.url,{username:this.mqtt.username,password:this.mqtt.password})},mounted(){this.fetchData(),this.listen()},methods:{listen(){if(this.mqttConnection){let s=this;this.mqttConnection.on("connect",function(){s.mqttConnection.subscribe(s.mqtt.topic,function(t){t||console.log("connected")})}),this.mqttConnection.on("message",this.received)}},received(s,t){let n=JSON.parse(t.toString()),r=this.mqtt.timefield?this.mqtt.timefield:"_terminalTime",o=Date.parse(n[r]);console.log(n.mc_run),this.options.series.forEach((a,i)=>{this.options.series[i].data.shift();let l=n[a.row];if(a.colIndex!==null){let c=l[a.colIndex];typeof c=="boolean"&&(c=c?1:0),this.options.series[i].data.push([o,c])}else typeof l=="boolean"&&(l=l?1:0),this.options.series[i].data.push([o,parseFloat(l)])})},selected(s){this.items=s,this.fetchData()},async fetchData(){this.$refs.chart.chart.showLoading();let s=[],t=[];this.mqttI&&this.mqttI.end(),this.items.forEach((n,r)=>{let o=this.colors[r];t[r]={title:{text:this.textFormat(n.text),style:{color:o,fontSize:"14px"}},lineColor:o,labels:{style:{color:o},align:"left",x:14},lineWidth:2,opposite:!0},n.range&&(t[r].min=n.range[0],t[r].max=n.range[1]);let a=null,i=!!n.data.match(/\./g);i&&(a=parseInt(n.data.split(".")[1])),console.log(i),s[r]={id:n.data,row:n.data.split(".")[0],colIndex:a,yAxis:r,type:n.type?n.type:"spline",name:this.textFormat(n.text),color:o,lineWidth:1,data:[]}}),this.options.series=s,this.options.yAxis=t,await axios.get(this.url,{params:this.params}).then(n=>{n.data.data.forEach(o=>{let a=Date.parse(o.terminal_time),i=JSON.parse(o.data);this.options.series.forEach((l,c)=>{let p=i[l.row];if(l.colIndex!==null){let h=p[l.colIndex];typeof h=="boolean"&&(h=h?1:0),this.options.series[c].data.push([a,h])}else typeof p=="boolean"&&(p=p?1:0),this.options.series[c].data.push([a,parseFloat(p)])})})}),this.$refs.chart.chart.hideLoading()},textFormat(s){let t=s.trim().toLowerCase().split(" ");for(let n=0;n<t.length;n++)t[n]=t[n][0].toUpperCase()+t[n].substr(1);return t.join(" ")}}},le={class:"report"},ae={class:"table-wrapper"},re={class:"toolbox"},ie={class:"chart"};function ce(s,t,n,r,o,a){const i=e.resolveComponent("dropdown"),l=e.resolveComponent("highcharts");return e.openBlock(),e.createElementBlock("div",le,[e.createElementVNode("div",ae,[e.createElementVNode("div",re,[e.createVNode(i,{options:n.columns,onChecked:a.selected,default:n.defaultData},null,8,["options","onChecked","default"])]),e.createElementVNode("div",ie,[e.createVNode(l,{ref:"chart","constructor-type":"stockChart",class:"hc",options:o.options},null,8,["options"])])])])}const de=_(ne,[["render",ce]]),me={props:{url:String,title:String,mqtt:{type:Object,default(s){return{url:null,username:null,password:null,topic:null,timefield:"_terminalTime"}}},defaultData:{type:Array,default:()=>[]},columns:{type:Array,default:()=>[]}},components:{Dropdown:y},data(){return{items:this.defaultData,mqttConnection:null,colors:v,params:{last:30},options:{chart:{type:"line",zoomType:"x",height:600},time:{useUTC:!1},title:{text:this.title,style:{fontSize:"24px",fontWeight:"bold"}},xAxis:{type:"datetime",title:{text:""}},yAxis:[],tooltip:{pointFormat:"{series.name}: <b>{point.y:.2f}</b><br/>",crosshairs:!0,shared:!0},legend:{enabled:!0},series:[]}}},created(){this.mqttConnection=b.exports.connect(this.mqtt.url,{username:this.mqtt.username,password:this.mqtt.password})},mounted(){this.fetchData(),this.listen()},methods:{listen(){if(this.mqttConnection){let s=this;this.mqttConnection.on("connect",function(){s.mqttConnection.subscribe(s.mqtt.topic,function(t){t||console.log("connected")})}),this.mqttConnection.on("message",this.received)}},received(s,t){let n=JSON.parse(t.toString()),r=this.mqtt.timefield?this.mqtt.timefield:"_terminalTime",o=Date.parse(n[r]);this.options.series.forEach((a,i)=>{this.options.series[i].data.shift();let l=n[a.row];if(a.colIndex!==null){let c=l[a.colIndex];typeof c=="boolean"&&(c=c?1:0),this.options.series[i].data.push([o,c])}else typeof l=="boolean"&&(l=l?1:0),this.options.series[i].data.push([o,parseFloat(l)])})},selected(s){this.items=s,this.fetchData()},async fetchData(){this.$refs.chart.chart.showLoading();let s=[],t=[];this.mqttI&&this.mqttI.end(),this.items.forEach((n,r)=>{let o=this.colors[r];t[r]={title:{text:this.textFormat(n.text),style:{color:o,fontSize:"14px"}},lineColor:o,labels:{style:{color:o},align:"left",x:14},lineWidth:2,opposite:!0},n.range&&(t[r].min=n.range[0],t[r].max=n.range[1]);let a=null;!!n.data.match(/\->/g)&&(a=parseInt(n.data.split("->")[1])),s[r]={id:n.data,row:n.data.split("->")[0],colIndex:a,yAxis:r,type:n.type?n.type:"spline",name:this.textFormat(n.text),color:o,lineWidth:1,data:[]}}),this.options.series=s,this.options.yAxis=t,await axios.get(this.url,{params:this.params}).then(n=>{n.data.data.forEach(o=>{let a=Date.parse(o.terminal_time),i=JSON.parse(o.data);this.options.series.forEach((l,c)=>{let p=i[l.row];if(l.colIndex!==null){let h=p[l.colIndex];typeof h=="boolean"&&(h=h?1:0),this.options.series[c].data.push([a,h])}else typeof p=="boolean"&&(p=p?1:0),this.options.series[c].data.push([a,parseFloat(p)])})})}),this.$refs.chart.chart.hideLoading()},textFormat(s){let t=s.trim().toLowerCase().split(" ");for(let n=0;n<t.length;n++)t[n]=t[n][0].toUpperCase()+t[n].substr(1);return t.join(" ")}}},pe={class:"report"},he={class:"table-wrapper"},ue={class:"toolbox"},_e={class:"chart"};function Ve(s,t,n,r,o,a){const i=e.resolveComponent("dropdown"),l=e.resolveComponent("highcharts");return e.openBlock(),e.createElementBlock("div",pe,[e.createElementVNode("div",he,[e.createElementVNode("div",ue,[e.createVNode(i,{options:n.columns,onChecked:a.selected,default:n.defaultData},null,8,["options","onChecked","default"])]),e.createElementVNode("div",_e,[e.createVNode(l,{ref:"chart","constructor-type":"stockChart",class:"hc",options:o.options},null,8,["options"])])])])}const Ee=_(me,[["render",Ve]]);const Ne={props:{url:String,export:String,headers:Array,title:String,useInterval:{type:Boolean,default:!1}},components:{Vue3EasyDataTable:k,Datepicker:f},data(){return{options:{page:1,rowsPerPage:25},params:{from:new Date,to:new Date,interval:60},dataLength:0,isLoading:!1,items:[]}},mounted(){this.fetchData()},watch:{options:{handler(s){this.fetchData()},deep:!0}},methods:{async fetchData(){let s=Object.assign(this.params,this.options);this.isLoading=!0,this.items=[];let t=await axios.get(this.url,{params:s}).then(n=>n.data);this.items=t.data,this.dataLength=t.meta.total,this.options.page=t.meta.current_page,this.options.rowsPerPage=t.meta.per_page,this.isLoading=!1},download(){let s=this.export.split("?");const t=new URLSearchParams(s[1]);t.append("interval",this.params.interval),t.append("from",this.params.from.toISOString()),t.append("to",this.params.to.toISOString()),window.open(s[0]+"?"+t.toString(),"_blank")}}},fe={class:"report"},ge={class:"table-wrapper"},ye={class:"toolbox"},ve={class:"title"},be={class:"date-selected"},xe=e.createStaticVNode('<option value="10">10s</option><option value="60">1m</option><option value="900">15m</option><option value="1800">30m</option><option value="3600">1h</option><option value="7200">2h</option><option value="10800">3h</option><option value="18000">5h</option><option value="36000">10h</option><option value="86400">24h</option>',10),De=[xe],Se={class:"table-content"};function ke(s,t,n,r,o,a){const i=e.resolveComponent("datepicker"),l=e.resolveComponent("Vue3EasyDataTable");return e.openBlock(),e.createElementBlock("div",fe,[e.createElementVNode("div",ge,[e.createElementVNode("div",ye,[e.createElementVNode("h2",ve,e.toDisplayString(n.title),1),e.createElementVNode("div",be,[e.createVNode(i,{class:"mr-2",modelValue:o.params.from,"onUpdate:modelValue":t[0]||(t[0]=c=>o.params.from=c),name:"from",textInput:"",autoApply:"",closeOnAutoApply:!1,placeholder:"from"},null,8,["modelValue"]),e.createVNode(i,{class:"mr-2",modelValue:o.params.to,"onUpdate:modelValue":t[1]||(t[1]=c=>o.params.to=c),name:"to",textInput:"",autoApply:"",closeOnAutoApply:!1,placeholder:"to"},null,8,["modelValue"]),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":t[2]||(t[2]=c=>o.params.interval=c),class:"form-control wd-80 mr-2"},De,512),[[e.vModelSelect,o.params.interval],[e.vShow,n.useInterval]]),e.createElementVNode("button",{class:"btn btn-primary mr-2",onClick:t[3]||(t[3]=(...c)=>a.fetchData&&a.fetchData(...c))},"Show"),e.createElementVNode("button",{class:"btn btn-success",onClick:t[4]||(t[4]=(...c)=>a.download&&a.download(...c))},"Download")])]),e.createElementVNode("div",Se,[e.createVNode(l,{"show-index":"","buttons-pagination":"","table-class-name":"customize-table","server-options":o.options,"onUpdate:server-options":t[5]||(t[5]=c=>o.options=c),"server-items-length":o.dataLength,loading:o.isLoading,headers:n.headers,items:o.items,ref:"vtable"},e.createSlots({_:2},[e.renderList(s.$slots,(c,p)=>({name:p,fn:e.withCtx(h=>[e.renderSlot(s.$slots,p,e.normalizeProps(e.guardReactiveProps(h||{})))])}))]),1032,["server-options","server-items-length","loading","headers","items"])])])])}const we=_(Ne,[["render",ke]]);const $e={props:{url:String,headers:Array,title:String},components:{Vue3EasyDataTable:k},data(){return{options:{page:1,rowsPerPage:25},dataLength:0,isLoading:!1,items:[]}},mounted(){this.fetchData()},watch:{options:{handler(s){this.fetchData()},deep:!0}},methods:{async fetchData(){this.isLoading=!0,this.items=[];let s=await axios.get(this.url,{params:this.options}).then(t=>t.data);this.items=s.data,this.dataLength=s.meta.total,this.options.page=s.meta.current_page,this.options.rowsPerPage=s.meta.per_page,this.isLoading=!1}}},Ce={class:"report"},Ae={class:"table-wrapper"},Fe={class:"toolbox"},Be={class:"title"},Ie=e.createElementVNode("div",{class:"date-selected"},null,-1),Te={class:"table-content"};function Le(s,t,n,r,o,a){const i=e.resolveComponent("Vue3EasyDataTable");return e.openBlock(),e.createElementBlock("div",Ce,[e.createElementVNode("div",Ae,[e.createElementVNode("div",Fe,[e.createElementVNode("h2",Be,e.toDisplayString(n.title),1),Ie]),e.createElementVNode("div",Te,[e.createVNode(i,{"show-index":"","buttons-pagination":"","table-class-name":"customize-table","server-options":o.options,"onUpdate:server-options":t[0]||(t[0]=l=>o.options=l),"server-items-length":o.dataLength,loading:o.isLoading,headers:n.headers,items:o.items,ref:"vtable"},e.createSlots({_:2},[e.renderList(s.$slots,(l,c)=>({name:c,fn:e.withCtx(p=>[e.renderSlot(s.$slots,c,e.normalizeProps(e.guardReactiveProps(p||{})))])}))]),1032,["server-options","server-items-length","loading","headers","items"])])])])}const qe=_($e,[["render",Le]]),Pe={props:{topic:String},data(){return{message:null,options:{}}},created(){this.listen()},methods:{listen(){let s=b.exports.connect("ws://192.168.170.87:9001",this.options),t=this;s.on("connect",function(){s.subscribe(t.topic,function(n){n||(console.log("connected"),s.publish(t.topic,"Hello mqtt"))})}),s.on("message",function(n,r){console.log("topic",n),console.log(r.toString()),t.message=r})}}};function Oe(s,t,n,r,o,a){return e.openBlock(),e.createElementBlock("div",null,e.toDisplayString(o.message),1)}const Ue=_(Pe,[["render",Oe]]);const Me={props:{title:String,station:String,defaultData:{type:Array,default:()=>[]},columns:{type:Array,default:()=>[]},mqtt:{type:Object,default(){return{url:null,username:null,password:null,topic:null}}}},components:{CircleProgress:C,Dropdown:y},data(){return{items:this.defaultData,mqttConnection:null,score:0,total:0}},created(){this.mqttConnection=b.exports.connect(this.mqtt.url,{username:this.mqtt.username,password:this.mqtt.password})},mounted(){this.listen()},methods:{selected(s){this.items=s},listen(){if(this.mqttConnection){let s=this;this.mqttConnection.on("connect",function(){s.mqttConnection.subscribe(s.mqtt.topic,function(t){t||console.log("connected")})}),this.mqttConnection.on("message",this.received)}},received(s,t){let n=JSON.parse(t.toString());if(n.group==this.station){let r=this.items.length;this.total=n.data.count_record*r;let o=n.data,a=0;this.items.forEach(i=>{a=a+parseInt(o[i.data])}),this.score=parseInt(a/this.total*100)}}}},ze={class:"card"},je={class:"card-title"},We={class:"card-body"},Ye={class:"total"};function Re(s,t,n,r,o,a){const i=e.resolveComponent("dropdown"),l=e.resolveComponent("circle-progress");return e.openBlock(),e.createElementBlock("div",ze,[e.createElementVNode("div",je,[e.createVNode(i,{type:"icon",class:"opsi",options:n.columns,onChecked:a.selected,default:n.defaultData},null,8,["options","onChecked","default"]),e.createTextVNode(" "+e.toDisplayString(n.title),1)]),e.createElementVNode("div",We,[e.createVNode(l,{percent:o.score,"show-percent":""},null,8,["percent"]),e.createElementVNode("div",Ye,[e.createTextVNode("Total Record "),e.createElementVNode("b",null,e.toDisplayString(o.total.toLocaleString()),1)])])])}const He=_(Me,[["render",Re]]),Je={props:{url:String,title:String,defaultData:{type:Array,default:()=>[]},columns:{type:Array,default:()=>[]}},components:{Datepicker:f,Dropdown:y},data(){return{items:this.defaultData,params:{from:new Date,to:new Date},data:[],realtime:{},fetchReady:!1,colors:v,options:{chart:{type:"line",zoomType:"x",height:600},time:{useUTC:!0},title:{text:this.title,style:{fontSize:"24px",fontWeight:"bold"}},xAxis:{type:"datetime",title:{text:""}},yAxis:[],tooltip:{pointFormat:"{series.name}: <b>{point.y:.2f} KWh</b><br/>",crosshairs:!0,shared:!0},legend:{enabled:!0},series:[]}}},mounted(){this.fetchData()},methods:{selected(s){this.items=s,this.fetchData()},async fetchData(){this.$refs.chart.chart.showLoading();let s=[],t=[],n=[];this.items.forEach((r,o)=>{let a=this.colors[o];t[o]={title:{text:this.textFormat(r.text),style:{color:a,fontSize:"16px"}},lineColor:a,labels:{style:{color:a},align:"left",x:14},lineWidth:1,opposite:!0},r.range&&(t[o].min=r.range[0],t[o].max=r.range[1]),s[o]={id:r.data,yAxis:o,type:r.type?r.type:"spline",name:this.textFormat(r.text),color:a,lineWidth:1,data:[]},n[o]=r.data}),this.options.series=s,this.options.yAxis=t,this.params.select=n,await axios.get(this.url,{params:this.params}).then(r=>{let o=r.data.data;for(const[a,i]of Object.entries(o)){let l=this.options.series.findIndex(c=>c.id==a);l>=0&&i.forEach(c=>{this.options.series[l].data.push([c.time*1e3,c.total/1e3])})}}),this.$refs.chart.chart.hideLoading()},textFormat(s){let t=s.toLowerCase().split(" ");for(let n=0;n<t.length;n++)t[n]=t[n][0].toUpperCase()+t[n].substr(1);return t.join(" ")}}},Ke={class:"report"},Qe={class:"table-wrapper"},Ge={class:"toolbox"},Xe={class:"date-selected"},Ze={class:"chart"};function et(s,t,n,r,o,a){const i=e.resolveComponent("dropdown"),l=e.resolveComponent("datepicker"),c=e.resolveComponent("highcharts");return e.openBlock(),e.createElementBlock("div",Ke,[e.createElementVNode("div",Qe,[e.createElementVNode("div",Ge,[e.createVNode(i,{options:n.columns,onChecked:a.selected,default:n.defaultData},null,8,["options","onChecked","default"]),e.createElementVNode("div",Xe,[e.createVNode(l,{class:"mr-2","enable-time-picker":!1,modelValue:o.params.from,"onUpdate:modelValue":t[0]||(t[0]=p=>o.params.from=p),name:"from",textInput:"",autoApply:"",closeOnAutoApply:!1,placeholder:"from"},null,8,["modelValue"]),e.createVNode(l,{class:"mr-2","enable-time-picker":!1,modelValue:o.params.to,"onUpdate:modelValue":t[1]||(t[1]=p=>o.params.to=p),name:"to",textInput:"",autoApply:"",closeOnAutoApply:!1,placeholder:"to"},null,8,["modelValue"]),e.createElementVNode("button",{class:"btn btn-primary",onClick:t[2]||(t[2]=(...p)=>a.fetchData&&a.fetchData(...p))},"Show")])]),e.createElementVNode("div",Ze,[e.createVNode(c,{ref:"chart",class:"hc",options:o.options},null,8,["options"])])])])}const tt=_(Je,[["render",et]]),ot={props:{url:String,title:String,defaultData:{type:Array,default:()=>[]},columns:{type:Array,default:()=>[]}},components:{Datepicker:f,Dropdown:y},data(){return{items:this.defaultData,params:{from:new Date,to:new Date},data:[],realtime:{},fetchReady:!1,colors:v,options:{chart:{type:"column"},time:{useUTC:!0},title:{text:this.title,style:{fontSize:"24px",fontWeight:"bold"}},tooltip:{pointFormat:"{series.name}: <b>{point.y} %</b><br/>",crosshairs:!0},legend:{enabled:!0},xAxis:{crosshair:!0},yAxis:{min:0,max:100,title:{text:"Score Conformance (%)"}},series:[]}}},mounted(){this.fetchData()},methods:{selected(s){this.items=s,this.fetchData()},async fetchData(){this.$refs.chart.chart.showLoading();let s=[],t=[],n=this;await axios.get(this.url,{params:this.params}).then(r=>{let o=r.data.data,a=n.items.length;o.forEach(i=>{let l=g(i.date,"YYYY-MM-DD");s.push(l.format("ll"));let c=i.count_record*a,p=0;n.items.forEach(x=>{p=p+parseInt(i[x.data])});let h=parseInt(p/c*100);t.push(h)})}),this.options.xAxis.categories=s,this.options.series=[{name:this.title,data:t}],this.$refs.chart.chart.hideLoading()},textFormat(s){let t=s.toLowerCase().split(" ");for(let n=0;n<t.length;n++)t[n]=t[n][0].toUpperCase()+t[n].substr(1);return t.join(" ")}}},st={class:"report"},nt={class:"table-wrapper"},lt={class:"toolbox"},at={class:"date-selected"},rt={class:"chart"};function it(s,t,n,r,o,a){const i=e.resolveComponent("dropdown"),l=e.resolveComponent("datepicker"),c=e.resolveComponent("highcharts");return e.openBlock(),e.createElementBlock("div",st,[e.createElementVNode("div",nt,[e.createElementVNode("div",lt,[e.createVNode(i,{options:n.columns,onChecked:a.selected,default:n.defaultData},null,8,["options","onChecked","default"]),e.createElementVNode("div",at,[e.createVNode(l,{class:"mr-2","enable-time-picker":!1,modelValue:o.params.from,"onUpdate:modelValue":t[0]||(t[0]=p=>o.params.from=p),name:"from",textInput:"",autoApply:"",closeOnAutoApply:!1,placeholder:"from"},null,8,["modelValue"]),e.createVNode(l,{class:"mr-2","enable-time-picker":!1,modelValue:o.params.to,"onUpdate:modelValue":t[1]||(t[1]=p=>o.params.to=p),name:"to",textInput:"",autoApply:"",closeOnAutoApply:!1,placeholder:"to"},null,8,["modelValue"]),e.createElementVNode("button",{class:"btn btn-primary",onClick:t[2]||(t[2]=(...p)=>a.fetchData&&a.fetchData(...p))},"Show")])]),e.createElementVNode("div",rt,[e.createVNode(c,{ref:"chart",class:"hc",options:o.options},null,8,["options"])])])])}const ct=_(ot,[["render",it]]);const dt={components:{Datepicker:f},props:{url:String,export:String,title:String},data(){return{params:{date:new Date},device:{name:null,size_fe:null,size_non_fe:null,size_ss:null},date:null,verifications:[],productions:[]}},methods:{async fetchData(){let s=await N.get(this.url,{params:this.params}).then(t=>t.data.data);this.device=s.startup.device,this.date=g(s.startup.started_at).format("DD MMMM YYYY"),this.productions=s.productions,this.verifications=s.startup.verifications},fTime(s){return g(s).format("HH:mm:ss")},download(){let s=this.export.split("?");const t=new URLSearchParams(s[1]);t.append("date",this.params.date.toISOString()),window.open(s[0]+"?"+t.toString(),"_blank")}}},V=s=>(e.pushScopeId("data-v-8c19b233"),s=s(),e.popScopeId(),s),mt={class:"report"},pt={class:"toolbox"},ht={class:"title"},ut={class:"date-selected"},_t={class:"row"},Vt={class:"column"},Et={class:"table bordered"},Nt=V(()=>e.createElementVNode("td",{class:"bg-grey"},"Metal Detector",-1)),ft={colspan:"3",class:"text-center"},gt=V(()=>e.createElementVNode("tr",{class:"bg-grey"},[e.createElementVNode("td",null,"Test Piece"),e.createElementVNode("td",null,"Fe"),e.createElementVNode("td",null,"Non Fe"),e.createElementVNode("td",null,"SS")],-1)),yt=V(()=>e.createElementVNode("td",{class:"bg-grey"},"Ukuran",-1)),vt=V(()=>e.createElementVNode("div",{class:"column"},null,-1)),bt=V(()=>e.createElementVNode("div",{class:"column"},null,-1)),xt={class:"row date"},Dt={class:"column"},St={class:"row"},kt={class:"column column-60"},wt={class:"table bordered"},$t=V(()=>e.createElementVNode("thead",null,[e.createElementVNode("tr",{class:"bg-grey"},[e.createElementVNode("td",{rowspan:"2"},"Jam"),e.createElementVNode("td",{rowspan:"2"},"Keterangan"),e.createElementVNode("td",{colspan:"3"},"Verifikasi"),e.createElementVNode("td",{colspan:"2"},"Dibuat Oleh"),e.createElementVNode("td",{colspan:"2"},"Divalidasi Oleh"),e.createElementVNode("td",{rowspan:"2"},"Tindakan koreksi jika MD Error (input no. wor)")]),e.createElementVNode("tr",{class:"bg-grey"},[e.createElementVNode("td",null,"Fe"),e.createElementVNode("td",null,"Non Fe"),e.createElementVNode("td",null,"SS"),e.createElementVNode("td",null,"Nama Operator"),e.createElementVNode("td",null,"Paraf"),e.createElementVNode("td",null,"Nama Foreman"),e.createElementVNode("td",null,"Paraf")])],-1)),Ct={class:"text-center"},At={class:"text-center"},Ft={class:"text-center"},Bt=V(()=>e.createElementVNode("td",null,null,-1)),It=V(()=>e.createElementVNode("td",null,null,-1)),Tt=V(()=>e.createElementVNode("tr",null,[e.createElementVNode("td",null,"\xA0"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td")],-1)),Lt={class:"row"},qt={class:"column"},Pt={class:"table bordered"},Ot=V(()=>e.createElementVNode("thead",null,[e.createElementVNode("tr",{class:"bg-grey"},[e.createElementVNode("td",{rowspan:"3"},"No"),e.createElementVNode("td",{rowspan:"3"},"Jam"),e.createElementVNode("td",{rowspan:"3"},"Nama Produk"),e.createElementVNode("td",{rowspan:"3"},"BN"),e.createElementVNode("td",{rowspan:"3"},"Satuan Kemasan"),e.createElementVNode("td",{rowspan:"3"},"Verifikasi"),e.createElementVNode("td",{colspan:"9"},"Kondisi Sensitif Produk"),e.createElementVNode("td",{rowspan:"3"},"Jumlah Produk OK (pcs)"),e.createElementVNode("td",{rowspan:"3"},"Jumlah Produk Non OK (pcs)"),e.createElementVNode("td",{colspan:"2"},"Dibuat Oleh"),e.createElementVNode("td",{colspan:"2"},"Divalidasi Oleh"),e.createElementVNode("td",{rowspan:"3"},"Tindakan Koreksi untuk Produk Not OK")]),e.createElementVNode("tr",{class:"bg-grey"},[e.createElementVNode("td",{colspan:"3"},"Fe"),e.createElementVNode("td",{colspan:"3"},"Non Fe"),e.createElementVNode("td",{colspan:"3"},"SS"),e.createElementVNode("td",{rowspan:"2"},"Nama Operator"),e.createElementVNode("td",{rowspan:"2"},"Paraf"),e.createElementVNode("td",{rowspan:"2"},"Nama Foreman"),e.createElementVNode("td",{rowspan:"2"},"Paraf")]),e.createElementVNode("tr",{class:"bg-grey"},[e.createElementVNode("td",null,"Ujung Depan"),e.createElementVNode("td",null,"Tengah"),e.createElementVNode("td",null,"Ujung Belakang"),e.createElementVNode("td",null,"Ujung Depan"),e.createElementVNode("td",null,"Tengah"),e.createElementVNode("td",null,"Ujung Belakang"),e.createElementVNode("td",null,"Ujung Depan"),e.createElementVNode("td",null,"Tengah"),e.createElementVNode("td",null,"Ujung Belakang")])],-1)),Ut=V(()=>e.createElementVNode("td",null,null,-1)),Mt={class:"text-center"},zt={class:"text-center"},jt={class:"text-center"},Wt={class:"text-center"},Yt={class:"text-center"},Rt={class:"text-center"},Ht={class:"text-center"},Jt={class:"text-center"},Kt={class:"text-center"},Qt=V(()=>e.createElementVNode("td",null,null,-1)),Gt=V(()=>e.createElementVNode("td",null,null,-1)),Xt=V(()=>e.createElementVNode("tr",null,[e.createElementVNode("td",null,"\xA0"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td"),e.createElementVNode("td")],-1));function Zt(s,t,n,r,o,a){const i=e.resolveComponent("datepicker");return e.openBlock(),e.createElementBlock("div",mt,[e.createElementVNode("div",pt,[e.createElementVNode("h2",ht,e.toDisplayString(n.title),1),e.createElementVNode("div",ut,[e.createVNode(i,{"enable-time-picker":!1,class:"mr-2",modelValue:o.params.date,"onUpdate:modelValue":t[0]||(t[0]=l=>o.params.date=l),name:"date",textInput:"",autoApply:"",closeOnAutoApply:!1,placeholder:"date"},null,8,["modelValue"]),e.createElementVNode("button",{class:"btn btn-primary mr-2",onClick:t[1]||(t[1]=(...l)=>a.fetchData&&a.fetchData(...l))},"Show"),e.createElementVNode("button",{class:"btn btn-success",onClick:t[2]||(t[2]=(...l)=>a.download&&a.download(...l))},"Download")])]),e.createElementVNode("div",_t,[e.createElementVNode("div",Vt,[e.createElementVNode("table",Et,[e.createElementVNode("tbody",null,[e.createElementVNode("tr",null,[Nt,e.createElementVNode("td",ft,e.toDisplayString(o.device.name),1)]),gt,e.createElementVNode("tr",null,[yt,e.createElementVNode("td",null,e.toDisplayString(o.device.size_fe),1),e.createElementVNode("td",null,e.toDisplayString(o.device.size_non_fe),1),e.createElementVNode("td",null,e.toDisplayString(o.device.size_ss),1)])])])]),vt,bt]),e.createElementVNode("div",xt,[e.createElementVNode("div",Dt," Tanggal : "+e.toDisplayString(o.date),1)]),e.createElementVNode("div",St,[e.createElementVNode("div",kt,[e.createElementVNode("table",wt,[$t,e.createElementVNode("tbody",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.verifications,l=>(e.openBlock(),e.createElementBlock("tr",{key:l.id},[e.createElementVNode("td",null,e.toDisplayString(l.started_at),1),e.createElementVNode("td",null,e.toDisplayString(l.type_text),1),e.createElementVNode("td",Ct,e.toDisplayString(l.fe?"\u2714":""),1),e.createElementVNode("td",At,e.toDisplayString(l.non_fe?"\u2714":""),1),e.createElementVNode("td",Ft,e.toDisplayString(l.ss?"\u2714":""),1),e.createElementVNode("td",null,e.toDisplayString(l.operator?l.operator.name:""),1),Bt,e.createElementVNode("td",null,e.toDisplayString(l.foreman?l.foreman.name:""),1),It,e.createElementVNode("td",null,e.toDisplayString(l.wor_number),1)]))),128)),Tt])])])]),e.createElementVNode("div",Lt,[e.createElementVNode("div",qt,[e.createElementVNode("table",Pt,[Ot,e.createElementVNode("tbody",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.productions,l=>(e.openBlock(),e.createElementBlock("tr",{key:l.id},[Ut,e.createElementVNode("td",null,e.toDisplayString(`${a.fTime(l.started_at)} - ${a.fTime(l.finished_at)}`),1),e.createElementVNode("td",null,e.toDisplayString(l.production.product.name),1),e.createElementVNode("td",null,e.toDisplayString(l.production.batch_no),1),e.createElementVNode("td",null,e.toDisplayString(l.production.product.unit),1),e.createElementVNode("td",null,e.toDisplayString(l.order_text),1),e.createElementVNode("td",Mt,e.toDisplayString(l.fe_front?"\u2714":""),1),e.createElementVNode("td",zt,e.toDisplayString(l.fe_mid?"\u2714":""),1),e.createElementVNode("td",jt,e.toDisplayString(l.fe_end?"\u2714":""),1),e.createElementVNode("td",Wt,e.toDisplayString(l.non_fe_front?"\u2714":""),1),e.createElementVNode("td",Yt,e.toDisplayString(l.non_fe_mid?"\u2714":""),1),e.createElementVNode("td",Rt,e.toDisplayString(l.non_fe_end?"\u2714":""),1),e.createElementVNode("td",Ht,e.toDisplayString(l.ss_front?"\u2714":""),1),e.createElementVNode("td",Jt,e.toDisplayString(l.ss_mid?"\u2714":""),1),e.createElementVNode("td",Kt,e.toDisplayString(l.ss_end?"\u2714":""),1),e.createElementVNode("td",null,e.toDisplayString(l.good_records_count),1),e.createElementVNode("td",null,e.toDisplayString(l.ng_records_count),1),e.createElementVNode("td",null,e.toDisplayString(l.operator?l.operator.name:""),1),Qt,e.createElementVNode("td",null,e.toDisplayString(l.foreman?l.foreman.name:""),1),Gt,e.createElementVNode("td",null,e.toDisplayString(l.remark),1)]))),128)),Xt])])])])])}const eo=_(dt,[["render",Zt],["__scopeId","data-v-8c19b233"]]),to={props:{timesheets:Array},data(){return{colors:{run:"rgb(15, 153, 96)",idle:"rgb(217, 130, 43)",breakdown:"rgb(219, 55, 55)"},options:{chart:{type:"xrange",zoomType:"x",height:200},title:{text:"Timeline",align:"left"},time:{useUTC:!1},xAxis:{type:"datetime"},yAxis:{visible:!1},plotOptions:{xrange:{borderRadius:0}},tooltip:{enabled:!1},series:[{showInLegend:!1,borderColor:"none",pointWidth:40,dataLabels:{shadow:!1,align:"left",enabled:!0,verticalAlign:"middle"},data:[]}]}}},watch:{timesheets:function(s,t){let n=this;this.options.series[0].data=[],s.forEach(function(r){n.options.series[0].data.push({x:Date.parse(r.started_at),x2:Date.parse(r.ended_at),y:0,color:n.colors[r.status],dataLabels:[{format:r.status}]})})}}};function oo(s,t,n,r,o,a){const i=e.resolveComponent("highcharts");return e.openBlock(),e.createElementBlock("div",null,[e.createVNode(i,{ref:"chart",options:o.options},null,8,["options"])])}const S=_(to,[["render",oo]]);const so={components:{VeProgress:w.exports.VeProgress,Datepicker:f,Timesheets:S},props:{title:String,isSupervisor:Boolean,settingShowed:Boolean,url:String,saveUrl:String},data(){return{params:{date:new Date},oee:{oee:0,availability:0,performance:0,quality:0,timesheets:[]}}},created(){this.fetchData()},mounted(){let s=this;setInterval(async function(){s.fetchData()},1e3*5)},methods:{async fetchData(){this.params.date=g(this.params.date).format("YYYY-MM-DD");let s=await N.get(this.url,{params:this.params}).then(t=>t.data.data);s&&(this.oee=s)},async save(){this.variable.date=this.params.date,await N.post(this.saveUrl,this.variable),this.fetchData()}}},d=s=>(e.pushScopeId("data-v-c82969bc"),s=s(),e.popScopeId(),s),no={class:"toolbox"},lo={class:"title"},ao={class:"date-selected"},ro={class:"row"},io={class:"column column-8"},co={class:"row"},mo={class:"column column-12"},po={class:"card"},ho=d(()=>e.createElementVNode("div",{class:"card-title"}," OEE Score ",-1)),uo={class:"card-body"},_o=d(()=>e.createElementVNode("span",null,"%",-1)),Vo={class:"row"},Eo={class:"column column-4"},No={class:"card"},fo=d(()=>e.createElementVNode("div",{class:"card-title"}," Availability ",-1)),go={class:"card-body"},yo=d(()=>e.createElementVNode("span",null,"%",-1)),vo={class:"column column-4"},bo={class:"card"},xo=d(()=>e.createElementVNode("div",{class:"card-title"}," Performance ",-1)),Do={class:"card-body"},So=d(()=>e.createElementVNode("span",null,"%",-1)),ko={class:"column column-4"},wo={class:"card"},$o=d(()=>e.createElementVNode("div",{class:"card-title"}," Quality ",-1)),Co={class:"card-body"},Ao=d(()=>e.createElementVNode("span",null,"%",-1)),Fo={key:0,class:"column column-4"},Bo={key:0,class:"table"},Io=d(()=>e.createElementVNode("thead",null,[e.createElementVNode("tr",null,[e.createElementVNode("th",null,"AVAILABILITY"),e.createElementVNode("th"),e.createElementVNode("th"),e.createElementVNode("th",{class:"text-right"},"Time (hour)")])],-1)),To=d(()=>e.createElementVNode("td",null,"Total Available Time",-1)),Lo=d(()=>e.createElementVNode("td",null,null,-1)),qo=d(()=>e.createElementVNode("td",null,null,-1)),Po={class:"text-right"},Oo=d(()=>e.createElementVNode("td",null,"Current Running Time ",-1)),Uo=d(()=>e.createElementVNode("td",null,null,-1)),Mo={class:"text-right"},zo=d(()=>e.createElementVNode("td",null,"Downtime Loss",-1)),jo=d(()=>e.createElementVNode("td",null,"(sum by alarm sensor)",-1)),Wo=d(()=>e.createElementVNode("td",null,null,-1)),Yo={class:"text-right"},Ro=d(()=>e.createElementVNode("td",null,"Idle Time",-1)),Ho=d(()=>e.createElementVNode("td",null,null,-1)),Jo=d(()=>e.createElementVNode("td",null,null,-1)),Ko={class:"text-right"},Qo=d(()=>e.createElementVNode("td",null,"Effective operating time",-1)),Go=d(()=>e.createElementVNode("td",null,null,-1)),Xo=d(()=>e.createElementVNode("td",null,null,-1)),Zo={class:"text-right"},es=d(()=>e.createElementVNode("tr",{class:"title"},[e.createElementVNode("th",{colspan:"3"},"PERFORMANCE"),e.createElementVNode("th",{class:"text-right"})],-1)),ts=d(()=>e.createElementVNode("td",null,"Speed LME Mill Performance",-1)),os=d(()=>e.createElementVNode("td",null,"(%)",-1)),ss=d(()=>e.createElementVNode("td",null,null,-1)),ns={class:"text-right"},ls=d(()=>e.createElementVNode("td",null,"Speed LME Mill SV",-1)),as=d(()=>e.createElementVNode("td",null,"(rpm)",-1)),rs=d(()=>e.createElementVNode("td",null,null,-1)),is={class:"text-right"},cs=d(()=>e.createElementVNode("td",null,"Speed LME Mill PV",-1)),ds=d(()=>e.createElementVNode("td",null,"(rpm)",-1)),ms=d(()=>e.createElementVNode("td",null,null,-1)),ps={class:"text-right"},hs=d(()=>e.createElementVNode("td",null,"Speed Feed Pump Performance",-1)),us=d(()=>e.createElementVNode("td",null,"(%)",-1)),_s=d(()=>e.createElementVNode("td",null,null,-1)),Vs={class:"text-right"},Es=d(()=>e.createElementVNode("td",null,"Speed Feed Pump SV",-1)),Ns=d(()=>e.createElementVNode("td",null,"(rpm)",-1)),fs=d(()=>e.createElementVNode("td",null,null,-1)),gs={class:"text-right"},ys=d(()=>e.createElementVNode("td",null,"Speed Feed Pump PV",-1)),vs=d(()=>e.createElementVNode("td",null,"(rpm)",-1)),bs=d(()=>e.createElementVNode("td",null,null,-1)),xs={class:"text-right"},Ds=d(()=>e.createElementVNode("tr",{class:"title"},[e.createElementVNode("th",{colspan:"3"},"QUALITY"),e.createElementVNode("th",{class:"text-right"},"Units")],-1)),Ss=d(()=>e.createElementVNode("td",null,"Total Production",-1)),ks=d(()=>e.createElementVNode("td",null,null,-1)),ws=d(()=>e.createElementVNode("td",null,null,-1)),$s={class:"text-right"},Cs=d(()=>e.createElementVNode("td",null,"Good Production",-1)),As=d(()=>e.createElementVNode("td",null,null,-1)),Fs=d(()=>e.createElementVNode("td",null,null,-1)),Bs={class:"text-right"},Is=d(()=>e.createElementVNode("td",null,"Production Reject",-1)),Ts=d(()=>e.createElementVNode("td",null,null,-1)),Ls=d(()=>e.createElementVNode("td",null,null,-1)),qs={class:"text-right"},Ps=d(()=>e.createElementVNode("tr",{class:"title"},[e.createElementVNode("th",{colspan:"3"},"OEE Factors"),e.createElementVNode("th",{class:"text-right"},"Factor %")],-1)),Os=d(()=>e.createElementVNode("td",null,"Availability",-1)),Us=d(()=>e.createElementVNode("td",null,null,-1)),Ms=d(()=>e.createElementVNode("td",null,null,-1)),zs={class:"text-right"},js=d(()=>e.createElementVNode("td",null,"Performance",-1)),Ws=d(()=>e.createElementVNode("td",null,null,-1)),Ys=d(()=>e.createElementVNode("td",null,null,-1)),Rs={class:"text-right"},Hs=d(()=>e.createElementVNode("td",null,"Quality",-1)),Js=d(()=>e.createElementVNode("td",null,null,-1)),Ks=d(()=>e.createElementVNode("td",null,null,-1)),Qs={class:"text-right"},Gs=d(()=>e.createElementVNode("th",null,"OEE",-1)),Xs=d(()=>e.createElementVNode("th",null,null,-1)),Zs=d(()=>e.createElementVNode("th",null,null,-1)),en={class:"text-right"},tn={class:"row"},on={class:"column column-12"};function sn(s,t,n,r,o,a){const i=e.resolveComponent("datepicker"),l=e.resolveComponent("ve-progress"),c=e.resolveComponent("timesheets");return e.openBlock(),e.createElementBlock("div",null,[e.createElementVNode("div",no,[e.createElementVNode("h2",lo,e.toDisplayString(n.title),1),e.createElementVNode("div",ao,[e.createVNode(i,{"enable-time-picker":!1,utc:"",class:"mr-2",modelValue:o.params.date,"onUpdate:modelValue":t[0]||(t[0]=p=>o.params.date=p),name:"date",textInput:"",autoApply:"",closeOnAutoApply:!1,placeholder:"date"},null,8,["modelValue"]),e.createElementVNode("button",{class:"btn btn-primary mr-2",onClick:t[1]||(t[1]=(...p)=>a.fetchData&&a.fetchData(...p))},"Show")])]),e.createElementVNode("div",ro,[e.createElementVNode("div",io,[e.createElementVNode("div",co,[e.createElementVNode("div",mo,[e.createElementVNode("div",po,[ho,e.createElementVNode("div",uo,[e.createVNode(l,{progress:parseFloat(o.oee.oee*100).toFixed(2),thickness:30,size:250,color:"#1aadce","empty-thickness":"10%","font-size":"40px"},{legend:e.withCtx(()=>[_o]),_:1},8,["progress"])])])])]),e.createElementVNode("div",Vo,[e.createElementVNode("div",Eo,[e.createElementVNode("div",No,[fo,e.createElementVNode("div",go,[e.createVNode(l,{progress:parseFloat(o.oee.availability*100).toFixed(2),color:"#e4d354",thickness:20,size:150,"empty-thickness":"10%","font-size":"22px"},{legend:e.withCtx(()=>[yo]),_:1},8,["progress"])])])]),e.createElementVNode("div",vo,[e.createElementVNode("div",bo,[xo,e.createElementVNode("div",Do,[e.createVNode(l,{progress:parseFloat(o.oee.performance*100).toFixed(2),color:"#8085e9",thickness:20,size:150,"empty-thickness":"10%","font-size":"22px"},{legend:e.withCtx(()=>[So]),_:1},8,["progress"])])])]),e.createElementVNode("div",ko,[e.createElementVNode("div",wo,[$o,e.createElementVNode("div",Co,[e.createVNode(l,{progress:parseFloat(o.oee.quality*100).toFixed(2),color:"#f45b5b",thickness:20,size:150,"empty-thickness":"10%","font-size":"22px"},{legend:e.withCtx(()=>[Ao]),_:1},8,["progress"])])])])])]),n.settingShowed?(e.openBlock(),e.createElementBlock("div",Fo,[o.oee?(e.openBlock(),e.createElementBlock("table",Bo,[Io,e.createElementVNode("tbody",null,[e.createElementVNode("tr",null,[To,Lo,qo,e.createElementVNode("td",Po,e.toDisplayString(o.oee.avail_duration),1)]),e.createElementVNode("tr",null,[Oo,e.createElementVNode("td",null,"( start from "+e.toDisplayString(o.oee.started_at)+" )",1),Uo,e.createElementVNode("td",Mo,e.toDisplayString(o.oee.running),1)]),e.createElementVNode("tr",null,[zo,jo,Wo,e.createElementVNode("td",Yo,e.toDisplayString(o.oee.down_duration),1)]),e.createElementVNode("tr",null,[Ro,Ho,Jo,e.createElementVNode("td",Ko,e.toDisplayString(o.oee.stop_duration),1)]),e.createElementVNode("tr",null,[Qo,Go,Xo,e.createElementVNode("td",Zo,e.toDisplayString(o.oee.run_duration),1)]),es,e.createElementVNode("tr",null,[ts,os,ss,e.createElementVNode("td",ns,e.toDisplayString(parseFloat(o.oee.ppm*100).toFixed(2)),1)]),e.createElementVNode("tr",null,[ls,as,rs,e.createElementVNode("td",is,e.toDisplayString(o.oee.ppm_sv?parseFloat(o.oee.ppm_sv).toFixed(2):0),1)]),e.createElementVNode("tr",null,[cs,ds,ms,e.createElementVNode("td",ps,e.toDisplayString(o.oee.ppm_pv?parseFloat(o.oee.ppm_pv).toFixed(2):0),1)]),e.createElementVNode("tr",null,[hs,us,_s,e.createElementVNode("td",Vs,e.toDisplayString(parseFloat(o.oee.ppm2*100).toFixed(2)),1)]),e.createElementVNode("tr",null,[Es,Ns,fs,e.createElementVNode("td",gs,e.toDisplayString(o.oee.ppm2_sv?parseFloat(o.oee.ppm2_sv).toFixed(2):0),1)]),e.createElementVNode("tr",null,[ys,vs,bs,e.createElementVNode("td",xs,e.toDisplayString(o.oee.ppm2_pv?parseFloat(o.oee.ppm2_pv).toFixed(2):0),1)]),Ds,e.createElementVNode("tr",null,[Ss,ks,ws,e.createElementVNode("td",$s,e.toDisplayString(o.oee.reject_qty+o.oee.output_qty),1)]),e.createElementVNode("tr",null,[Cs,As,Fs,e.createElementVNode("td",Bs,e.toDisplayString(o.oee.output_qty),1)]),e.createElementVNode("tr",null,[Is,Ts,Ls,e.createElementVNode("td",qs,e.toDisplayString(o.oee.reject_qty),1)]),Ps,e.createElementVNode("tr",null,[Os,Us,Ms,e.createElementVNode("td",zs,e.toDisplayString(parseFloat(o.oee.availability*100).toFixed(2)),1)]),e.createElementVNode("tr",null,[js,Ws,Ys,e.createElementVNode("td",Rs,e.toDisplayString(parseFloat(o.oee.performance*100).toFixed(2)),1)]),e.createElementVNode("tr",null,[Hs,Js,Ks,e.createElementVNode("td",Qs,e.toDisplayString(parseFloat(o.oee.quality*100).toFixed(2)),1)])]),e.createElementVNode("tfoot",null,[e.createElementVNode("tr",null,[Gs,Xs,Zs,e.createElementVNode("th",en,e.toDisplayString(parseFloat(o.oee.oee*100).toFixed(2)),1)])])])):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0)]),e.createElementVNode("div",tn,[e.createElementVNode("div",on,[e.createVNode(c,{timesheets:o.oee.timesheets},null,8,["timesheets"])])])])}const nn=_(so,[["render",sn],["__scopeId","data-v-c82969bc"]]);const ln={components:{VeProgress:w.exports.VeProgress,Datepicker:f,Timesheets:S},props:{title:String,isSupervisor:Boolean,settingShowed:Boolean,url:String,saveUrl:String,products:Array},data(){return{params:{date:new Date,shift_id:1},oee:{oee:0,availability:0,performance:0,quality:0,timesheets:[]}}},created(){this.fetchData()},mounted(){let s=this;setInterval(async function(){s.fetchData()},1e3*5)},methods:{async fetchData(){this.params.date=g(this.params.date).format("YYYY-MM-DD");let s=await N.get(this.url,{params:this.params}).then(t=>t.data);s&&(this.oee=s.data,this.params.shift_id=s.meta.current_shift.id?s.meta.current_shift.id:1)},async save(){this.variable.date=this.params.date,await N.post(this.saveUrl,this.variable),this.fetchData()}}},m=s=>(e.pushScopeId("data-v-ced5555e"),s=s(),e.popScopeId(),s),an={class:"toolbox"},rn={class:"title"},cn={class:"date-selected"},dn=m(()=>e.createElementVNode("option",{value:"1"},"Shift 1",-1)),mn=m(()=>e.createElementVNode("option",{value:"2"},"Shift 2",-1)),pn=m(()=>e.createElementVNode("option",{value:"3"},"Shift 3",-1)),hn=[dn,mn,pn],un={class:"row"},_n={class:"column column-8"},Vn={class:"row"},En={class:"column column-12"},Nn={class:"card"},fn=m(()=>e.createElementVNode("div",{class:"card-title"}," OEE Score ",-1)),gn={class:"card-body"},yn=m(()=>e.createElementVNode("span",null,"%",-1)),vn={class:"row"},bn={class:"column column-4"},xn={class:"card"},Dn=m(()=>e.createElementVNode("div",{class:"card-title"}," Availability ",-1)),Sn={class:"card-body"},kn=m(()=>e.createElementVNode("span",null,"%",-1)),wn={class:"column column-4"},$n={class:"card"},Cn=m(()=>e.createElementVNode("div",{class:"card-title"}," Performance ",-1)),An={class:"card-body"},Fn=m(()=>e.createElementVNode("span",null,"%",-1)),Bn={class:"column column-4"},In={class:"card"},Tn=m(()=>e.createElementVNode("div",{class:"card-title"}," Quality ",-1)),Ln={class:"card-body"},qn=m(()=>e.createElementVNode("span",null,"%",-1)),Pn={key:0,class:"column column-4"},On={class:"table"},Un=m(()=>e.createElementVNode("tr",{class:"title"},[e.createElementVNode("th",null,"AVAILABILITY"),e.createElementVNode("th"),e.createElementVNode("th"),e.createElementVNode("th",{class:"text-right"},"Time (hour)")],-1)),Mn=m(()=>e.createElementVNode("td",null,"Total Available Time",-1)),zn=m(()=>e.createElementVNode("td",null,null,-1)),jn=m(()=>e.createElementVNode("td",null,null,-1)),Wn={class:"text-right"},Yn=m(()=>e.createElementVNode("td",null,"Current Running Time ",-1)),Rn=m(()=>e.createElementVNode("td",null,null,-1)),Hn={class:"text-right"},Jn=m(()=>e.createElementVNode("td",null,"Downtime Loss",-1)),Kn=m(()=>e.createElementVNode("td",null,"(sum by alarm sensor)",-1)),Qn=m(()=>e.createElementVNode("td",null,null,-1)),Gn={class:"text-right"},Xn=m(()=>e.createElementVNode("td",null,"Idle Time",-1)),Zn=m(()=>e.createElementVNode("td",null,null,-1)),el=m(()=>e.createElementVNode("td",null,null,-1)),tl={class:"text-right"},ol=m(()=>e.createElementVNode("td",null,"Effective operating time",-1)),sl=m(()=>e.createElementVNode("td",null,null,-1)),nl=m(()=>e.createElementVNode("td",null,null,-1)),ll={class:"text-right"},al=m(()=>e.createElementVNode("tr",{class:"title"},[e.createElementVNode("th",{colspan:"3"},"PERFORMANCE"),e.createElementVNode("th",{class:"text-right"},"Seconds")],-1)),rl=m(()=>e.createElementVNode("td",null,"Ideal Cycle Time",-1)),il=m(()=>e.createElementVNode("td",null,null,-1)),cl=m(()=>e.createElementVNode("td",null,null,-1)),dl={class:"text-right"},ml=m(()=>e.createElementVNode("td",null,"Actual Cycle Time",-1)),pl=m(()=>e.createElementVNode("td",null,null,-1)),hl=m(()=>e.createElementVNode("td",null,null,-1)),ul={class:"text-right"},_l=m(()=>e.createElementVNode("tr",{class:"title"},[e.createElementVNode("th",{colspan:"3"},"QUALITY"),e.createElementVNode("th",{class:"text-right"},"Units")],-1)),Vl=m(()=>e.createElementVNode("td",null,"Total Production",-1)),El=m(()=>e.createElementVNode("td",null,null,-1)),Nl=m(()=>e.createElementVNode("td",null,null,-1)),fl={class:"text-right"},gl=m(()=>e.createElementVNode("td",null,"Good Production",-1)),yl=m(()=>e.createElementVNode("td",null,null,-1)),vl=m(()=>e.createElementVNode("td",null,null,-1)),bl={class:"text-right"},xl=m(()=>e.createElementVNode("td",null,"Production Reject",-1)),Dl=m(()=>e.createElementVNode("td",null,null,-1)),Sl=m(()=>e.createElementVNode("td",null,null,-1)),kl={class:"text-right"},wl=m(()=>e.createElementVNode("tr",{class:"title"},[e.createElementVNode("th",{colspan:"3"},"OEE Factors"),e.createElementVNode("th",{class:"text-right"},"Factor %")],-1)),$l=m(()=>e.createElementVNode("td",null,"Availability",-1)),Cl=m(()=>e.createElementVNode("td",null,null,-1)),Al=m(()=>e.createElementVNode("td",null,null,-1)),Fl={class:"text-right"},Bl=m(()=>e.createElementVNode("td",null,"Performance",-1)),Il=m(()=>e.createElementVNode("td",null,null,-1)),Tl=m(()=>e.createElementVNode("td",null,null,-1)),Ll={class:"text-right"},ql=m(()=>e.createElementVNode("td",null,"Quality",-1)),Pl=m(()=>e.createElementVNode("td",null,null,-1)),Ol=m(()=>e.createElementVNode("td",null,null,-1)),Ul={class:"text-right"},Ml=m(()=>e.createElementVNode("th",null,"OEE",-1)),zl=m(()=>e.createElementVNode("th",null,null,-1)),jl=m(()=>e.createElementVNode("th",null,null,-1)),Wl={class:"text-right"},Yl={class:"row"},Rl={class:"column column-12"};function Hl(s,t,n,r,o,a){var p;const i=e.resolveComponent("datepicker"),l=e.resolveComponent("ve-progress"),c=e.resolveComponent("timesheets");return e.openBlock(),e.createElementBlock("div",null,[e.createElementVNode("div",an,[e.createElementVNode("h2",rn,e.toDisplayString(n.title)+" ("+e.toDisplayString((p=n.products[o.oee.product_id])!=null?p:"")+")",1),e.createElementVNode("div",cn,[e.createVNode(i,{"enable-time-picker":!1,utc:"",class:"mr-2",modelValue:o.params.date,"onUpdate:modelValue":t[0]||(t[0]=h=>o.params.date=h),name:"date",textInput:"",autoApply:"",closeOnAutoApply:!1,placeholder:"date"},null,8,["modelValue"]),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":t[1]||(t[1]=h=>o.params.shift_id=h),name:"shift",id:"#",class:"form-control wd-120 mr-2"},hn,512),[[e.vModelSelect,o.params.shift_id]]),e.createElementVNode("button",{class:"btn btn-primary mr-2",onClick:t[2]||(t[2]=(...h)=>a.fetchData&&a.fetchData(...h))},"Show")])]),e.createElementVNode("div",un,[e.createElementVNode("div",_n,[e.createElementVNode("div",Vn,[e.createElementVNode("div",En,[e.createElementVNode("div",Nn,[fn,e.createElementVNode("div",gn,[e.createVNode(l,{progress:parseFloat(o.oee.oee*100).toFixed(2),thickness:30,size:250,color:"#1aadce","empty-thickness":"10%","font-size":"40px"},{legend:e.withCtx(()=>[yn]),_:1},8,["progress"])])])])]),e.createElementVNode("div",vn,[e.createElementVNode("div",bn,[e.createElementVNode("div",xn,[Dn,e.createElementVNode("div",Sn,[e.createVNode(l,{progress:parseFloat(o.oee.availability*100).toFixed(2),color:"#e4d354",thickness:20,size:150,"empty-thickness":"10%","font-size":"22px"},{legend:e.withCtx(()=>[kn]),_:1},8,["progress"])])])]),e.createElementVNode("div",wn,[e.createElementVNode("div",$n,[Cn,e.createElementVNode("div",An,[e.createVNode(l,{progress:parseFloat(o.oee.performance*100).toFixed(2),color:"#8085e9",thickness:20,size:150,"empty-thickness":"10%","font-size":"22px"},{legend:e.withCtx(()=>[Fn]),_:1},8,["progress"])])])]),e.createElementVNode("div",Bn,[e.createElementVNode("div",In,[Tn,e.createElementVNode("div",Ln,[e.createVNode(l,{progress:parseFloat(o.oee.quality*100).toFixed(2),color:"#f45b5b",thickness:20,size:150,"empty-thickness":"10%","font-size":"22px"},{legend:e.withCtx(()=>[qn]),_:1},8,["progress"])])])])])]),n.settingShowed?(e.openBlock(),e.createElementBlock("div",Pn,[e.createElementVNode("table",On,[e.createElementVNode("tbody",null,[Un,e.createElementVNode("tr",null,[Mn,zn,jn,e.createElementVNode("td",Wn,e.toDisplayString(o.oee.avail_duration),1)]),e.createElementVNode("tr",null,[Yn,e.createElementVNode("td",null,"( start from "+e.toDisplayString(o.oee.started_at)+" )",1),Rn,e.createElementVNode("td",Hn,e.toDisplayString(o.oee.running),1)]),e.createElementVNode("tr",null,[Jn,Kn,Qn,e.createElementVNode("td",Gn,e.toDisplayString(o.oee.down_duration),1)]),e.createElementVNode("tr",null,[Xn,Zn,el,e.createElementVNode("td",tl,e.toDisplayString(o.oee.stop_duration),1)]),e.createElementVNode("tr",null,[ol,sl,nl,e.createElementVNode("td",ll,e.toDisplayString(o.oee.run_duration),1)]),al,e.createElementVNode("tr",null,[rl,il,cl,e.createElementVNode("td",dl,e.toDisplayString(o.oee.ppm),1)]),e.createElementVNode("tr",null,[ml,pl,hl,e.createElementVNode("td",ul,e.toDisplayString(o.oee.ppm2),1)]),_l,e.createElementVNode("tr",null,[Vl,El,Nl,e.createElementVNode("td",fl,e.toDisplayString(o.oee.reject_qty+o.oee.output_qty),1)]),e.createElementVNode("tr",null,[gl,yl,vl,e.createElementVNode("td",bl,e.toDisplayString(o.oee.output_qty),1)]),e.createElementVNode("tr",null,[xl,Dl,Sl,e.createElementVNode("td",kl,e.toDisplayString(o.oee.reject_qty),1)]),wl,e.createElementVNode("tr",null,[$l,Cl,Al,e.createElementVNode("td",Fl,e.toDisplayString(parseFloat(o.oee.availability*100).toFixed(2)),1)]),e.createElementVNode("tr",null,[Bl,Il,Tl,e.createElementVNode("td",Ll,e.toDisplayString(parseFloat(o.oee.performance*100).toFixed(2)),1)]),e.createElementVNode("tr",null,[ql,Pl,Ol,e.createElementVNode("td",Ul,e.toDisplayString(parseFloat(o.oee.quality*100).toFixed(2)),1)])]),e.createElementVNode("tfoot",null,[e.createElementVNode("tr",null,[Ml,zl,jl,e.createElementVNode("th",Wl,e.toDisplayString(parseFloat(o.oee.oee*100).toFixed(2)),1)])])])])):e.createCommentVNode("",!0)]),e.createElementVNode("div",Yl,[e.createElementVNode("div",Rl,[e.createVNode(c,{timesheets:o.oee.timesheets},null,8,["timesheets"])])])])}const Jl=_(ln,[["render",Hl],["__scopeId","data-v-ced5555e"]]),Kl={components:{Datepicker:f},props:{url:String,title:String},data(){return{params:{date:{month:new Date().getMonth(),year:new Date().getFullYear()}},options:{chart:{type:"bar"},title:{text:this.title,align:"left"},xAxis:{categories:[],title:{text:null},gridLineWidth:1,lineWidth:0},yAxis:{min:0,title:{text:"Duration (hours)",align:"high"},labels:{overflow:"justify"},gridLineWidth:0},tooltip:{valueSuffix:" Hours"},series:[{name:"High Losses",data:[]}]}}},mounted(){this.fetchData()},methods:{async fetchData(){this.options.xAxis.categories=[],this.options.series[0].data=[];let s=await N.get(this.url,{params:this.params.date}).then(t=>t.data);s.error||s.data.forEach(t=>{this.options.xAxis.categories.push(t.message),this.options.series[0].data.push(parseFloat(t.seconds/(60*60)))})}}},Ql={class:"report"},Gl={class:"table-wrapper"},Xl={class:"toolbox"},Zl={class:"date-selected"},ea={class:"chart"};function ta(s,t,n,r,o,a){const i=e.resolveComponent("datepicker"),l=e.resolveComponent("highcharts");return e.openBlock(),e.createElementBlock("div",Ql,[e.createElementVNode("div",Gl,[e.createElementVNode("div",Xl,[e.createElementVNode("div",Zl,[e.createVNode(i,{"month-picker":"",class:"mr-2",modelValue:o.params.date,"onUpdate:modelValue":t[0]||(t[0]=c=>o.params.date=c),name:"date",autoApply:"",placeholder:"date"},null,8,["modelValue"]),e.createElementVNode("button",{class:"btn btn-primary",onClick:t[1]||(t[1]=(...c)=>a.fetchData&&a.fetchData(...c))},"Show")])]),e.createElementVNode("div",ea,[e.createVNode(l,{ref:"chart",class:"hc",options:o.options},null,8,["options"])])])])}const oa=_(Kl,[["render",ta]]),sa={components:{Datepicker:f},props:{url:String,title:String},data(){return{params:{from:new Date,to:new Date},options:{chart:{type:"line"},title:{text:this.title},xAxis:{categories:[],crosshair:!0},yAxis:{min:0,title:{text:"Score (%)"}},tooltip:{headerFormat:'<span style="font-size:10px">{point.key}</span><table>',pointFormat:'<tr><td style="color:{series.color};padding:0">{series.name}: </td><td style="padding:0"><b>{point.y:.1f} %</b></td></tr>',footerFormat:"</table>",shared:!0,useHTML:!0},plotOptions:{column:{pointPadding:.2,borderWidth:0}},series:[]}}},methods:{async fetchData(){let s=await N.get(this.url,{params:this.params}).then(n=>n.data);["Availability","Performance","Quality","OEE"].forEach((n,r)=>{this.options.series[r]={name:n,data:[]}}),this.options.xAxis.categories=[],s.data.forEach(n=>{this.options.xAxis.categories.push(n.production_date),this.options.series[0].data.push(n.availability),this.options.series[1].data.push(n.performance),this.options.series[2].data.push(n.quality),this.options.series[3].data.push(n.oee)})}}},na={class:"report"},la={class:"table-wrapper"},aa={class:"toolbox"},ra={class:"date-selected"},ia={class:"chart"};function ca(s,t,n,r,o,a){const i=e.resolveComponent("datepicker"),l=e.resolveComponent("highcharts");return e.openBlock(),e.createElementBlock("div",na,[e.createElementVNode("div",la,[e.createElementVNode("div",aa,[e.createElementVNode("div",ra,[e.createVNode(i,{class:"mr-2",type:"datetime",modelValue:o.params.from,"onUpdate:modelValue":t[0]||(t[0]=c=>o.params.from=c),name:"from",textInput:"","enable-time-picker":!1,autoApply:"",closeOnAutoApply:!1,placeholder:"from"},null,8,["modelValue"]),e.createVNode(i,{class:"mr-2",type:"datetime",modelValue:o.params.to,"onUpdate:modelValue":t[1]||(t[1]=c=>o.params.to=c),name:"to",textInput:"","enable-time-picker":!1,autoApply:"",closeOnAutoApply:!1,placeholder:"to"},null,8,["modelValue"]),e.createElementVNode("button",{class:"btn btn-primary",onClick:t[2]||(t[2]=(...c)=>a.fetchData&&a.fetchData(...c))},"Show")])]),e.createElementVNode("div",ia,[e.createVNode(l,{ref:"chart",class:"hc",options:o.options},null,8,["options"])])])])}const da=_(sa,[["render",ca]]);const ma={props:{title:String,isSupervisor:Boolean,settingShowed:Boolean,url:String,saveUrl:String,products:Array},data(){return{variable:{product_id:0,number_of_shift:3,hours_per_shift:8,planned_shutdown_shift:1,downtime_loss:0,ideal_cycle_time_seconds:30},params:{product_id:0}}},mounted(){this.fetchData()},methods:{async fetchData(){this.params.product_id=this.variable.product_id;let s=await N.get(this.url,{params:this.params}).then(t=>t.data);s.data?this.variable=s.data:this.variable={product_id:0,number_of_shift:3,hours_per_shift:8,planned_shutdown_shift:1,downtime_loss:0,ideal_cycle_time_seconds:30}},async save(){await N.post(this.saveUrl,this.variable),this.fetchData()},onChange(s){this.params.product_id=s.target.value,this.fetchData()}},computed:{availability(){return this.operating_time/this.total_available_time*100},performance(){return this.ideal_cycle_time*this.variable.total_production/this.operating_time*100},quality(){return this.variable.good_production/this.variable.total_production*100},oee(){return this.availability*this.performance*this.quality/1e4},total_available_time(){return this.variable.number_of_shift*this.variable.hours_per_shift},planned_shutdown(){return this.variable.number_of_shift*this.variable.planned_shutdown_shift},scheduled_operating_time(){return this.total_available_time-this.planned_shutdown},ideal_cycle_time(){return this.variable.ideal_cycle_time_seconds/3600},operating_time(){return this.total_available_time-this.planned_shutdown-this.variable.downtime_loss},effective_operating_time(){return this.variable.total_production*this.ideal_cycle_time},speed_loss(){return this.operating_time-this.effective_operating_time}}},E=s=>(e.pushScopeId("data-v-c3ad9ec9"),s=s(),e.popScopeId(),s),pa={class:"toolbox"},ha={class:"title"},ua={class:"row"},_a={key:0,class:"column column-4"},Va={class:"table"},Ea=E(()=>e.createElementVNode("thead",null,[e.createElementVNode("tr",null,[e.createElementVNode("th",null,"Factors"),e.createElementVNode("th",null,"Number Of Shifts"),e.createElementVNode("th",null,"Hours per Shift"),e.createElementVNode("th",{class:"text-right"},"Time (hour)")])],-1)),Na=E(()=>e.createElementVNode("td",null,"Product",-1)),fa=E(()=>e.createElementVNode("td",null,null,-1)),ga=["value"],ya=E(()=>e.createElementVNode("td",{class:"text-right"},null,-1)),va=E(()=>e.createElementVNode("td",null,"Total Available Time",-1)),ba=["readonly"],xa=["readonly"],Da={class:"text-right"},Sa=E(()=>e.createElementVNode("td",null,"Planned Shutdown",-1)),ka=["readonly"],wa=["readonly"],$a={class:"text-right"},Ca=E(()=>e.createElementVNode("td",null,"Scheduled Operating Time",-1)),Aa=E(()=>e.createElementVNode("td",null,null,-1)),Fa=E(()=>e.createElementVNode("td",null,null,-1)),Ba={class:"text-right"},Ia=E(()=>e.createElementVNode("td",null,"Downtime Loss",-1)),Ta=E(()=>e.createElementVNode("td",null,null,-1)),La=E(()=>e.createElementVNode("td",null,null,-1)),qa={class:"text-right"},Pa=E(()=>e.createElementVNode("td",null,"Ideal Cycle Time",-1)),Oa=E(()=>e.createElementVNode("td",null,"Cycle time in Sec",-1)),Ua=["readonly"],Ma={class:"text-right"};function za(s,t,n,r,o,a){return e.openBlock(),e.createElementBlock("div",null,[e.createElementVNode("div",pa,[e.createElementVNode("h2",ha,e.toDisplayString(n.title),1)]),e.createElementVNode("div",ua,[n.settingShowed?(e.openBlock(),e.createElementBlock("div",_a,[e.createElementVNode("table",Va,[Ea,e.createElementVNode("tbody",null,[e.createElementVNode("tr",null,[Na,fa,e.createElementVNode("td",null,[e.withDirectives(e.createElementVNode("select",{name:"product_id","onUpdate:modelValue":t[0]||(t[0]=i=>o.variable.product_id=i),onChange:t[1]||(t[1]=(...i)=>a.fetchData&&a.fetchData(...i))},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.products,(i,l)=>(e.openBlock(),e.createElementBlock("option",{value:l,key:l},e.toDisplayString(i),9,ga))),128))],544),[[e.vModelSelect,o.variable.product_id]])]),ya]),e.createElementVNode("tr",null,[va,e.createElementVNode("td",null,[e.withDirectives(e.createElementVNode("input",{readonly:!n.isSupervisor,type:"number",class:"form-input","onUpdate:modelValue":t[2]||(t[2]=i=>o.variable.number_of_shift=i),placeholder:"Shifts"},null,8,ba),[[e.vModelText,o.variable.number_of_shift]])]),e.createElementVNode("td",null,[e.withDirectives(e.createElementVNode("input",{readonly:!n.isSupervisor,type:"number",class:"form-input","onUpdate:modelValue":t[3]||(t[3]=i=>o.variable.hours_per_shift=i),placeholder:"Hours/Shift"},null,8,xa),[[e.vModelText,o.variable.hours_per_shift]])]),e.createElementVNode("td",Da,e.toDisplayString(a.total_available_time),1)]),e.createElementVNode("tr",null,[Sa,e.createElementVNode("td",null,[e.withDirectives(e.createElementVNode("input",{readonly:!n.isSupervisor,type:"number",class:"form-input","onUpdate:modelValue":t[4]||(t[4]=i=>o.variable.number_of_shift=i),placeholder:"Shifts"},null,8,ka),[[e.vModelText,o.variable.number_of_shift]])]),e.createElementVNode("td",null,[e.withDirectives(e.createElementVNode("input",{readonly:!n.isSupervisor,type:"number",class:"form-input","onUpdate:modelValue":t[5]||(t[5]=i=>o.variable.planned_shutdown_shift=i),placeholder:"Hours/Shift"},null,8,wa),[[e.vModelText,o.variable.planned_shutdown_shift]])]),e.createElementVNode("td",$a,e.toDisplayString(a.planned_shutdown),1)]),e.createElementVNode("tr",null,[Ca,Aa,Fa,e.createElementVNode("td",Ba,e.toDisplayString(a.scheduled_operating_time),1)]),e.createElementVNode("tr",null,[Ia,Ta,La,e.createElementVNode("td",qa,e.toDisplayString(o.variable.downtime_loss),1)]),e.createElementVNode("tr",null,[Pa,Oa,e.createElementVNode("td",null,[e.withDirectives(e.createElementVNode("input",{readonly:!n.isSupervisor,type:"number",class:"form-input","onUpdate:modelValue":t[6]||(t[6]=i=>o.variable.ideal_cycle_time_seconds=i)},null,8,Ua),[[e.vModelText,o.variable.ideal_cycle_time_seconds]])]),e.createElementVNode("td",Ma,e.toDisplayString(a.ideal_cycle_time.toFixed(3)),1)])])]),n.isSupervisor?(e.openBlock(),e.createElementBlock("button",{key:0,class:"btn btn-primary btn-right",onClick:t[7]||(t[7]=(...i)=>a.save&&a.save(...i))},"Save Setting")):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0)])])}const ja=_(ma,[["render",za],["__scopeId","data-v-c3ad9ec9"]]),Wa={components:{Datepicker:f},props:{url:String,title:String},data(){return{colors:{run:"rgb(15, 153, 96)",idle:"rgb(217, 130, 43)",breakdown:"rgb(219, 55, 55)"},params:{from:new Date,to:new Date},options:{chart:{type:"line"},title:{text:this.title},xAxis:{categories:[],crosshair:!0},yAxis:{min:0,title:{text:"Times (in minutes)"}},tooltip:{headerFormat:'<span style="font-size:10px">{point.key}</span><table>',pointFormat:'<tr><td style="color:{series.color};padding:0">{series.name}: </td><td style="padding:0"><b>{point.y:.0f} minutes</b></td></tr>',footerFormat:"</table>",shared:!0,useHTML:!0},plotOptions:{column:{pointPadding:.2,borderWidth:0}},series:[]}}},methods:{async fetchData(){let s=this,t=await N.get(this.url,{params:this.params}).then(r=>r.data);["idle","run","breakdown"].forEach((r,o)=>{this.options.series[o]={name:r,color:s.colors[r],data:[]}}),this.options.xAxis.categories=[],t.data.forEach(r=>{this.options.xAxis.categories.push(r.production_date),this.options.series[0].data.push(r.idle/60),this.options.series[1].data.push(r.run/60),this.options.series[2].data.push(r.breakdown/60)})}}},Ya={class:"report"},Ra={class:"table-wrapper"},Ha={class:"toolbox"},Ja={class:"date-selected"},Ka={class:"chart"};function Qa(s,t,n,r,o,a){const i=e.resolveComponent("datepicker"),l=e.resolveComponent("highcharts");return e.openBlock(),e.createElementBlock("div",Ya,[e.createElementVNode("div",Ra,[e.createElementVNode("div",Ha,[e.createElementVNode("div",Ja,[e.createVNode(i,{class:"mr-2",type:"datetime",modelValue:o.params.from,"onUpdate:modelValue":t[0]||(t[0]=c=>o.params.from=c),name:"from",textInput:"","enable-time-picker":!1,autoApply:"",closeOnAutoApply:!1,placeholder:"from"},null,8,["modelValue"]),e.createVNode(i,{class:"mr-2",type:"datetime",modelValue:o.params.to,"onUpdate:modelValue":t[1]||(t[1]=c=>o.params.to=c),name:"to",textInput:"","enable-time-picker":!1,autoApply:"",closeOnAutoApply:!1,placeholder:"to"},null,8,["modelValue"]),e.createElementVNode("button",{class:"btn btn-primary",onClick:t[2]||(t[2]=(...c)=>a.fetchData&&a.fetchData(...c))},"Show")])]),e.createElementVNode("div",Ka,[e.createVNode(l,{ref:"chart",class:"hc",options:o.options},null,8,["options"])])])])}const Ga=_(Wa,[["render",Qa]]);A(D);F(D);const u=B({mounted(){},data(){return{active:null}}});D.setOptions({time:{timezone:"Asia/Jakarta"}});u.use(I);Object.defineProperty(String.prototype,"capitalize",{value:function(){let s=this.split(" ");for(let t=0;t<s.length;t++){const n=typeof(s==null?void 0:s[t][0])=="string"?s[t][0].toUpperCase():"";s[t]=n+s[t].substr(1)}return s.join(" ")},enumerable:!1});u.config.globalProperties.$filters={textFormat(s){return s.toLowerCase().capitalize()}};u.component("trend-view",se);u.component("trend-live",de);u.component("trend-live-lme",Ee);u.component("log-table",we);u.component("v-table",qe);u.component("v-mqtt",Ue);u.component("pie",He);u.component("pwr-trend",tt);u.component("score-bar",ct);u.component("md-report",eo);u.component("oee-score-lme",nn);u.component("oee-score-leepack",Jl);u.component("bar-chart",oa);u.component("oee-history",da);u.component("oee-setting",ja);u.component("timesheets",S);u.component("timesheet-history",Ga);u.mount("#app");
